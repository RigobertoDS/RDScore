Directory structure:
└── rigobertods-rdscore/
    ├── build.gradle.kts
    ├── gradle.properties
    ├── gradlew
    ├── gradlew.bat
    ├── settings.gradle.kts
    ├── app/
    │   ├── build.gradle.kts
    │   ├── proguard-rules.pro
    │   ├── release/
    │   │   └── output-metadata.json
    │   └── src/
    │       ├── androidTest/
    │       │   └── java/
    │       │       └── com/
    │       │           └── rigobertods/
    │       │               └── rdscore/
    │       │                   └── ExampleInstrumentedTest.kt
    │       ├── debug/
    │       │   └── java/
    │       │       └── com/
    │       │           └── rigobertods/
    │       │               └── rdscore/
    │       │                   ├── PantallaDetallePartidoPreview.kt
    │       │                   └── ui/
    │       │                       ├── components/
    │       │                       │   ├── BannerAvisoPreview.kt
    │       │                       │   ├── BarraNavegacionFlechasPreview.kt
    │       │                       │   ├── DialogoFiltrosPreview.kt
    │       │                       │   └── PartidoItemPreview.kt
    │       │                       └── main/
    │       │                           ├── ContenidoEquipoClasificacionPreview.kt
    │       │                           ├── PantallaEditarPasswordPreview.kt
    │       │                           ├── PantallaEditarPerfilPreview.kt
    │       │                           └── PantallaPerfilPreview.kt
    │       ├── main/
    │       │   ├── AndroidManifest.xml
    │       │   ├── java/
    │       │   │   └── com/
    │       │   │       └── rigobertods/
    │       │   │           └── rdscore/
    │       │   │               ├── MainActivity.kt
    │       │   │               ├── RDScoreApplication.kt
    │       │   │               ├── core/
    │       │   │               │   ├── common/
    │       │   │               │   │   ├── LanguageManager.kt
    │       │   │               │   │   ├── mapEquipoToStatItems.kt
    │       │   │               │   │   ├── ThemeManager.kt
    │       │   │               │   │   └── UiState.kt
    │       │   │               │   ├── data/
    │       │   │               │   │   ├── Converters.kt
    │       │   │               │   │   ├── PartidoMapper.kt
    │       │   │               │   │   ├── RDScoreDatabase.kt
    │       │   │               │   │   ├── dao/
    │       │   │               │   │   │   └── PartidoDao.kt
    │       │   │               │   │   └── entities/
    │       │   │               │   │       └── PartidoEntity.kt
    │       │   │               │   ├── network/
    │       │   │               │   │   ├── ApiService.kt
    │       │   │               │   │   ├── AuthAuthenticator.kt
    │       │   │               │   │   ├── AuthInterceptor.kt
    │       │   │               │   │   ├── NetworkUtils.kt
    │       │   │               │   │   └── adapters/
    │       │   │               │   │       └── PrediccionAdapter.kt
    │       │   │               │   ├── ui/
    │       │   │               │   │   ├── Color.kt
    │       │   │               │   │   ├── Theme.kt
    │       │   │               │   │   └── Type.kt
    │       │   │               │   └── util/
    │       │   │               │       └── LocaleHelper.kt
    │       │   │               ├── data/
    │       │   │               │   ├── SessionManager.kt
    │       │   │               │   └── error/
    │       │   │               │       └── ErrorResponse.kt
    │       │   │               ├── di/
    │       │   │               │   ├── AppModule.kt
    │       │   │               │   ├── DatabaseModule.kt
    │       │   │               │   ├── NetworkModule.kt
    │       │   │               │   └── RepositoryModule.kt
    │       │   │               ├── features/
    │       │   │               │   ├── auth/
    │       │   │               │   │   ├── data/
    │       │   │               │   │   │   ├── AuthRepository.kt
    │       │   │               │   │   │   ├── ForgotPasswordRequest.kt
    │       │   │               │   │   │   ├── ForgotPasswordResponse.kt
    │       │   │               │   │   │   ├── LoginRequest.kt
    │       │   │               │   │   │   ├── LoginResponse.kt
    │       │   │               │   │   │   ├── LogoutResponse.kt
    │       │   │               │   │   │   ├── RefreshTokenResponse.kt
    │       │   │               │   │   │   ├── RegisterRequest.kt
    │       │   │               │   │   │   ├── RegisterResponse.kt
    │       │   │               │   │   │   ├── ResetPasswordRequest.kt
    │       │   │               │   │   │   └── ResetPasswordResponse.kt
    │       │   │               │   │   └── ui/
    │       │   │               │   │       ├── AuthViewModel.kt
    │       │   │               │   │       ├── LoginScreen.kt
    │       │   │               │   │       ├── PantallaInicio.kt
    │       │   │               │   │       ├── PantallaRecuperarCuenta.kt
    │       │   │               │   │       ├── PantallaRegistro.kt
    │       │   │               │   │       ├── PantallaRestablecerPassword.kt
    │       │   │               │   │       ├── RecoverPasswordScreen.kt
    │       │   │               │   │       ├── RecuperarCuentaViewModel.kt
    │       │   │               │   │       ├── RegisterScreen.kt
    │       │   │               │   │       ├── ResetPasswordScreen.kt
    │       │   │               │   │       └── RestablecerPasswordViewModel.kt
    │       │   │               │   ├── cuotascalientes/
    │       │   │               │   │   ├── data/
    │       │   │               │   │   │   └── CuotaCalienteResponse.kt
    │       │   │               │   │   └── ui/
    │       │   │               │   │       ├── CuotasCalientesScreen.kt
    │       │   │               │   │       ├── CuotasCalientesViewModel.kt
    │       │   │               │   │       └── PantallaCuotasCalientes.kt
    │       │   │               │   ├── equipo/
    │       │   │               │   │   ├── data/
    │       │   │               │   │   │   ├── DatosEquipoResponse.kt
    │       │   │               │   │   │   └── TeamRepository.kt
    │       │   │               │   │   └── ui/
    │       │   │               │   │       ├── DetalleEquipoScreen.kt
    │       │   │               │   │       ├── DetalleEquipoViewModel.kt
    │       │   │               │   │       └── PantallaDetalleEquipo.kt
    │       │   │               │   ├── ligas/
    │       │   │               │   │   └── data/
    │       │   │               │   │       ├── LeagueRepository.kt
    │       │   │               │   │       └── Liga.kt
    │       │   │               │   ├── partidos/
    │       │   │               │   │   ├── data/
    │       │   │               │   │   │   ├── CuotaCaliente.kt
    │       │   │               │   │   │   ├── DatosEquipo.kt
    │       │   │               │   │   │   ├── Equipo.kt
    │       │   │               │   │   │   ├── GamesByDateResponse.kt
    │       │   │               │   │   │   ├── Liga.kt
    │       │   │               │   │   │   ├── Partido.kt
    │       │   │               │   │   │   ├── PartidosRepository.kt
    │       │   │               │   │   │   ├── Prediccion.kt
    │       │   │               │   │   │   ├── Resumen.kt
    │       │   │               │   │   │   ├── ResumenMercado.kt
    │       │   │               │   │   │   ├── StatItem.kt
    │       │   │               │   │   │   ├── StatItemEquipo.kt
    │       │   │               │   │   │   └── TipoPrediccion.kt
    │       │   │               │   │   ├── ui/
    │       │   │               │   │   │   ├── DetallePartidoScreen.kt
    │       │   │               │   │   │   ├── DetallePartidoViewModel.kt
    │       │   │               │   │   │   ├── MainScreen.kt
    │       │   │               │   │   │   ├── MainViewModel.kt
    │       │   │               │   │   │   ├── PantallaDetallePartido.kt
    │       │   │               │   │   │   ├── PantallaMain.kt
    │       │   │               │   │   │   └── PantallaPrincipalPartidos.kt
    │       │   │               │   │   └── util/
    │       │   │               │   │       └── PredictionHelper.kt
    │       │   │               │   ├── perfil/
    │       │   │               │   │   ├── data/
    │       │   │               │   │   │   ├── DeleteAccountResponse.kt
    │       │   │               │   │   │   ├── EditPasswordRequest.kt
    │       │   │               │   │   │   ├── EditPasswordResponse.kt
    │       │   │               │   │   │   ├── EditProfileRequest.kt
    │       │   │               │   │   │   ├── EditProfileResponse.kt
    │       │   │               │   │   │   ├── GetProfileResponse.kt
    │       │   │               │   │   │   └── UserRepository.kt
    │       │   │               │   │   └── ui/
    │       │   │               │   │       ├── EditarPasswordScreen.kt
    │       │   │               │   │       ├── EditarPasswordViewModel.kt
    │       │   │               │   │       ├── EditarPerfilScreen.kt
    │       │   │               │   │       ├── EditarPerfilViewModel.kt
    │       │   │               │   │       ├── PantallaEditarPassword.kt
    │       │   │               │   │       ├── PantallaEditarPerfil.kt
    │       │   │               │   │       ├── PantallaPerfil.kt
    │       │   │               │   │       ├── PerfilScreen.kt
    │       │   │               │   │       └── PerfilViewModel.kt
    │       │   │               │   └── resumen/
    │       │   │               │       ├── data/
    │       │   │               │       │   ├── PrecisionMercadoResponse.kt
    │       │   │               │       │   ├── PrecisionResponse.kt
    │       │   │               │       │   └── StatsRepository.kt
    │       │   │               │       └── ui/
    │       │   │               │           ├── PantallaResumen.kt
    │       │   │               │           ├── ResumenScreen.kt
    │       │   │               │           └── ResumenViewModel.kt
    │       │   │               └── ui/
    │       │   │                   ├── components/
    │       │   │                   │   ├── BannerAviso.kt
    │       │   │                   │   ├── BarraNavegacionFlechas.kt
    │       │   │                   │   ├── CabeceraHistorialCuotaCaliente.kt
    │       │   │                   │   ├── CabeceraLiga.kt
    │       │   │                   │   ├── ContenidoEquipoClasificacion.kt
    │       │   │                   │   ├── ContenidoEquipoEstadisticas.kt
    │       │   │                   │   ├── ContenidoEquipoPartidos.kt
    │       │   │                   │   ├── ContenidoEstadisticas.kt
    │       │   │                   │   ├── ContenidoInformacion.kt
    │       │   │                   │   ├── ContenidoRecomendaciones.kt
    │       │   │                   │   ├── CuotaCalienteItem.kt
    │       │   │                   │   ├── DialogoFiltros.kt
    │       │   │                   │   ├── EquipoLogoYNombre.kt
    │       │   │                   │   ├── FiltroState.kt
    │       │   │                   │   ├── InfoDialog.kt
    │       │   │                   │   ├── InfoRow.kt
    │       │   │                   │   ├── LanguageSelectorDialog.kt
    │       │   │                   │   ├── PaginaDePartidos.kt
    │       │   │                   │   ├── PaginaResumen.kt
    │       │   │                   │   ├── PartidoItem.kt
    │       │   │                   │   ├── PrediccionCard.kt
    │       │   │                   │   ├── RecomendacionRow.kt
    │       │   │                   │   └── ResumenModeloRow.kt
    │       │   │                   ├── navigation/
    │       │   │                   │   └── NavRoutes.kt
    │       │   │                   └── util/
    │       │   │                       ├── DateUtils.kt
    │       │   │                       ├── MessageMapper.kt
    │       │   │                       └── TraducirPrediccion.kt
    │       │   └── res/
    │       │       ├── mipmap-hdpi/
    │       │       │   ├── ic_launcher.webp
    │       │       │   └── ic_launcher_round.webp
    │       │       ├── mipmap-mdpi/
    │       │       │   ├── ic_launcher.webp
    │       │       │   └── ic_launcher_round.webp
    │       │       ├── mipmap-xhdpi/
    │       │       │   ├── ic_launcher.webp
    │       │       │   └── ic_launcher_round.webp
    │       │       ├── mipmap-xxhdpi/
    │       │       │   ├── ic_launcher.webp
    │       │       │   └── ic_launcher_round.webp
    │       │       ├── mipmap-xxxhdpi/
    │       │       │   ├── ic_launcher.webp
    │       │       │   └── ic_launcher_round.webp
    │       │       ├── values/
    │       │       │   ├── colors.xml
    │       │       │   ├── strings.xml
    │       │       │   └── theme.xml
    │       │       ├── values-de/
    │       │       │   └── strings.xml
    │       │       ├── values-en/
    │       │       │   └── strings.xml
    │       │       ├── values-fr/
    │       │       │   └── strings.xml
    │       │       ├── values-it/
    │       │       │   └── strings.xml
    │       │       ├── values-night/
    │       │       │   └── theme.xml
    │       │       └── xml/
    │       │           ├── backup_rules.xml
    │       │           └── data_extraction_rules.xml
    │       └── test/
    │           └── java/
    │               └── com/
    │                   └── rigobertods/
    │                       └── rdscore/
    │                           └── ExampleUnitTest.kt
    └── gradle/
        ├── gradle-daemon-jvm.properties
        ├── libs.versions.toml
        └── wrapper/
            └── gradle-wrapper.properties

================================================
FILE: build.gradle.kts
================================================
// Top-level build file where you can add configuration options common to all subprojects/modules.
plugins {
    alias(libs.plugins.android.application) apply false
    alias(libs.plugins.kotlin.android) apply false
    alias(libs.plugins.compose.compiler) apply false
    alias(libs.plugins.hilt) apply false
    alias(libs.plugins.ksp) apply false
}



================================================
FILE: gradle.properties
================================================
# Project-wide Gradle settings.
# IDE (e.g. Android Studio) users:
# Gradle settings configured through the IDE *will override*
# any settings specified in this file.
# For more details on how to configure your build environment visit
# http://www.gradle.org/docs/current/userguide/build_environment.html
# Specifies the JVM arguments used for the daemon process.
# The setting is particularly useful for tweaking memory settings.
org.gradle.jvmargs=-Xmx2048m -Dfile.encoding=UTF-8
# When configured, Gradle will run in incubating parallel mode.
# This option should only be used with decoupled projects. For more details, visit
# https://developer.android.com/r/tools/gradle-multi-project-decoupled-projects
# org.gradle.parallel=true
# AndroidX package structure to make it clearer which packages are bundled with the
# Android operating system, and which are packaged with your app's APK
# https://developer.android.com/topic/libraries/support-library/androidx-rn
android.useAndroidX=true
# Kotlin code style for this project: "official" or "obsolete":
kotlin.code.style=official
# Enables namespacing of each library's R class so that its R class includes only the
# thereby reducing the size of the R class for that library
android.disallowKotlinSourceSets=false



================================================
FILE: gradlew
================================================
#!/usr/bin/env sh

#
# Copyright 2015 the original author or authors.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      https://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

##############################################################################
##
##  Gradle start up script for UN*X
##
##############################################################################

# Attempt to set APP_HOME
# Resolve links: $0 may be a link
PRG="$0"
# Need this for relative symlinks.
while [ -h "$PRG" ] ; do
    ls=`ls -ld "$PRG"`
    link=`expr "$ls" : '.*-> \(.*\)$'`
    if expr "$link" : '/.*' > /dev/null; then
        PRG="$link"
    else
        PRG=`dirname "$PRG"`"/$link"
    fi
done
SAVED="`pwd`"
cd "`dirname \"$PRG\"`/" >/dev/null
APP_HOME="`pwd -P`"
cd "$SAVED" >/dev/null

APP_NAME="Gradle"
APP_BASE_NAME=`basename "$0"`

# Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.
DEFAULT_JVM_OPTS='"-Xmx64m" "-Xms64m"'

# Use the maximum available, or set MAX_FD != -1 to use that value.
MAX_FD="maximum"

warn () {
    echo "$*"
}

die () {
    echo
    echo "$*"
    echo
    exit 1
}

# OS specific support (must be 'true' or 'false').
cygwin=false
msys=false
darwin=false
nonstop=false
case "`uname`" in
  CYGWIN* )
    cygwin=true
    ;;
  Darwin* )
    darwin=true
    ;;
  MINGW* )
    msys=true
    ;;
  NONSTOP* )
    nonstop=true
    ;;
esac

CLASSPATH=$APP_HOME/gradle/wrapper/gradle-wrapper.jar


# Determine the Java command to use to start the JVM.
if [ -n "$JAVA_HOME" ] ; then
    if [ -x "$JAVA_HOME/jre/sh/java" ] ; then
        # IBM's JDK on AIX uses strange locations for the executables
        JAVACMD="$JAVA_HOME/jre/sh/java"
    else
        JAVACMD="$JAVA_HOME/bin/java"
    fi
    if [ ! -x "$JAVACMD" ] ; then
        die "ERROR: JAVA_HOME is set to an invalid directory: $JAVA_HOME

Please set the JAVA_HOME variable in your environment to match the
location of your Java installation."
    fi
else
    JAVACMD="java"
    which java >/dev/null 2>&1 || die "ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.

Please set the JAVA_HOME variable in your environment to match the
location of your Java installation."
fi

# Increase the maximum file descriptors if we can.
if [ "$cygwin" = "false" -a "$darwin" = "false" -a "$nonstop" = "false" ] ; then
    MAX_FD_LIMIT=`ulimit -H -n`
    if [ $? -eq 0 ] ; then
        if [ "$MAX_FD" = "maximum" -o "$MAX_FD" = "max" ] ; then
            MAX_FD="$MAX_FD_LIMIT"
        fi
        ulimit -n $MAX_FD
        if [ $? -ne 0 ] ; then
            warn "Could not set maximum file descriptor limit: $MAX_FD"
        fi
    else
        warn "Could not query maximum file descriptor limit: $MAX_FD_LIMIT"
    fi
fi

# For Darwin, add options to specify how the application appears in the dock
if $darwin; then
    GRADLE_OPTS="$GRADLE_OPTS \"-Xdock:name=$APP_NAME\" \"-Xdock:icon=$APP_HOME/media/gradle.icns\""
fi

# For Cygwin or MSYS, switch paths to Windows format before running java
if [ "$cygwin" = "true" -o "$msys" = "true" ] ; then
    APP_HOME=`cygpath --path --mixed "$APP_HOME"`
    CLASSPATH=`cygpath --path --mixed "$CLASSPATH"`

    JAVACMD=`cygpath --unix "$JAVACMD"`

    # We build the pattern for arguments to be converted via cygpath
    ROOTDIRSRAW=`find -L / -maxdepth 1 -mindepth 1 -type d 2>/dev/null`
    SEP=""
    for dir in $ROOTDIRSRAW ; do
        ROOTDIRS="$ROOTDIRS$SEP$dir"
        SEP="|"
    done
    OURCYGPATTERN="(^($ROOTDIRS))"
    # Add a user-defined pattern to the cygpath arguments
    if [ "$GRADLE_CYGPATTERN" != "" ] ; then
        OURCYGPATTERN="$OURCYGPATTERN|($GRADLE_CYGPATTERN)"
    fi
    # Now convert the arguments - kludge to limit ourselves to /bin/sh
    i=0
    for arg in "$@" ; do
        CHECK=`echo "$arg"|egrep -c "$OURCYGPATTERN" -`
        CHECK2=`echo "$arg"|egrep -c "^-"`                                 ### Determine if an option

        if [ $CHECK -ne 0 ] && [ $CHECK2 -eq 0 ] ; then                    ### Added a condition
            eval `echo args$i`=`cygpath --path --ignore --mixed "$arg"`
        else
            eval `echo args$i`="\"$arg\""
        fi
        i=`expr $i + 1`
    done
    case $i in
        0) set -- ;;
        1) set -- "$args0" ;;
        2) set -- "$args0" "$args1" ;;
        3) set -- "$args0" "$args1" "$args2" ;;
        4) set -- "$args0" "$args1" "$args2" "$args3" ;;
        5) set -- "$args0" "$args1" "$args2" "$args3" "$args4" ;;
        6) set -- "$args0" "$args1" "$args2" "$args3" "$args4" "$args5" ;;
        7) set -- "$args0" "$args1" "$args2" "$args3" "$args4" "$args5" "$args6" ;;
        8) set -- "$args0" "$args1" "$args2" "$args3" "$args4" "$args5" "$args6" "$args7" ;;
        9) set -- "$args0" "$args1" "$args2" "$args3" "$args4" "$args5" "$args6" "$args7" "$args8" ;;
    esac
fi

# Escape application args
save () {
    for i do printf %s\\n "$i" | sed "s/'/'\\\\''/g;1s/^/'/;\$s/\$/' \\\\/" ; done
    echo " "
}
APP_ARGS=`save "$@"`

# Collect all arguments for the java command, following the shell quoting and substitution rules
eval set -- $DEFAULT_JVM_OPTS $JAVA_OPTS $GRADLE_OPTS "\"-Dorg.gradle.appname=$APP_BASE_NAME\"" -classpath "\"$CLASSPATH\"" org.gradle.wrapper.GradleWrapperMain "$APP_ARGS"

exec "$JAVACMD" "$@"



================================================
FILE: gradlew.bat
================================================
@rem
@rem Copyright 2015 the original author or authors.
@rem
@rem Licensed under the Apache License, Version 2.0 (the "License");
@rem you may not use this file except in compliance with the License.
@rem You may obtain a copy of the License at
@rem
@rem      https://www.apache.org/licenses/LICENSE-2.0
@rem
@rem Unless required by applicable law or agreed to in writing, software
@rem distributed under the License is distributed on an "AS IS" BASIS,
@rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
@rem See the License for the specific language governing permissions and
@rem limitations under the License.
@rem

@if "%DEBUG%" == "" @echo off
@rem ##########################################################################
@rem
@rem  Gradle startup script for Windows
@rem
@rem ##########################################################################

@rem Set local scope for the variables with windows NT shell
if "%OS%"=="Windows_NT" setlocal

set DIRNAME=%~dp0
if "%DIRNAME%" == "" set DIRNAME=.
set APP_BASE_NAME=%~n0
set APP_HOME=%DIRNAME%

@rem Resolve any "." and ".." in APP_HOME to make it shorter.
for %%i in ("%APP_HOME%") do set APP_HOME=%%~fi

@rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.
set DEFAULT_JVM_OPTS="-Xmx64m" "-Xms64m"

@rem Find java.exe
if defined JAVA_HOME goto findJavaFromJavaHome

set JAVA_EXE=java.exe
%JAVA_EXE% -version >NUL 2>&1
if "%ERRORLEVEL%" == "0" goto execute

echo.
echo ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.
echo.
echo Please set the JAVA_HOME variable in your environment to match the
echo location of your Java installation.

goto fail

:findJavaFromJavaHome
set JAVA_HOME=%JAVA_HOME:"=%
set JAVA_EXE=%JAVA_HOME%/bin/java.exe

if exist "%JAVA_EXE%" goto execute

echo.
echo ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME%
echo.
echo Please set the JAVA_HOME variable in your environment to match the
echo location of your Java installation.

goto fail

:execute
@rem Setup the command line

set CLASSPATH=%APP_HOME%\gradle\wrapper\gradle-wrapper.jar


@rem Execute Gradle
"%JAVA_EXE%" %DEFAULT_JVM_OPTS% %JAVA_OPTS% %GRADLE_OPTS% "-Dorg.gradle.appname=%APP_BASE_NAME%" -classpath "%CLASSPATH%" org.gradle.wrapper.GradleWrapperMain %*

:end
@rem End local scope for the variables with windows NT shell
if "%ERRORLEVEL%"=="0" goto mainEnd

:fail
rem Set variable GRADLE_EXIT_CONSOLE if you need the _script_ return code instead of
rem the _cmd.exe /c_ return code!
if  not "" == "%GRADLE_EXIT_CONSOLE%" exit 1
exit /b 1

:mainEnd
if "%OS%"=="Windows_NT" endlocal

:omega



================================================
FILE: settings.gradle.kts
================================================
@file:Suppress("UnstableApiUsage")

pluginManagement {
    repositories {
        google {
            content {
                includeGroupByRegex("com\\.android.*")
                includeGroupByRegex("com\\.google.*")
                includeGroupByRegex("androidx.*")
            }
        }
        mavenCentral()
        gradlePluginPortal()
    }
}
plugins {
    id("org.gradle.toolchains.foojay-resolver-convention") version "1.0.0"
}
dependencyResolutionManagement {
    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)
    repositories {
        google()
        mavenCentral()
    }
}

rootProject.name = "RDScore"
include(":app")



================================================
FILE: app/build.gradle.kts
================================================
plugins {
    alias(libs.plugins.android.application)

    alias(libs.plugins.compose.compiler)
    id("kotlin-parcelize")
    alias(libs.plugins.ksp)
    alias(libs.plugins.hilt)
}

// Configurar Android Application Extension (Nuevo DSL)
configure<com.android.build.api.dsl.ApplicationExtension> {
    namespace = "com.rigobertods.rdscore"
    compileSdk = 36

    lint {
        disable += "NullSafeMutableLiveData"
    }

    defaultConfig {
        applicationId = "com.rigobertods.rdscore"
        minSdk = 29
        targetSdk = 36
        versionCode = 35
        versionName = "5.01"

        testInstrumentationRunner = "androidx.test.runner.AndroidJUnitRunner"
    }

    buildTypes {
        release {
            isMinifyEnabled = true
            isShrinkResources = true
            proguardFiles(
                getDefaultProguardFile("proguard-android-optimize.txt"),
                "proguard-rules.pro"
            )
            ndk {
                debugSymbolLevel = "FULL"
            }
        }
    }

    compileOptions {
        sourceCompatibility = JavaVersion.VERSION_11
        targetCompatibility = JavaVersion.VERSION_11
    }
    buildFeatures {
        compose = true
        buildConfig = true
    }

    // IMPORTANTE: Desactivar separación de idiomas para permitir el cambio de idioma en la App
    @Suppress("UnstableApiUsage")
    bundle {
        language {
            enableSplit = false
        }
    }
}

kotlin {
    compilerOptions {
        jvmTarget.set(org.jetbrains.kotlin.gradle.dsl.JvmTarget.JVM_11)
    }
}

// Nombre del archivo APK y AAB
androidComponents {
    onVariants(selector().withBuildType("release")) { variant ->
        // APK
        variant.outputs.forEach { output ->
            val outputImpl = output as? com.android.build.api.variant.impl.VariantOutputImpl
            outputImpl?.outputFileName?.set("RDScore.apk")
        }
        // AAB
        variant.artifacts.get(com.android.build.api.artifact.SingleArtifact.BUNDLE).map {
            project.layout.buildDirectory.file("outputs/bundle/release/RDScore.aab").get()
        }
    }
}

dependencies {
    implementation(libs.androidx.core.ktx)
    implementation(libs.androidx.appcompat)
    implementation(libs.material)
    implementation(libs.androidx.activity)

    implementation(libs.androidx.annotation)
    implementation(libs.androidx.lifecycle.livedata.ktx)
    implementation(libs.androidx.lifecycle.viewmodel.ktx)
    implementation(libs.androidx.lifecycle.runtime.compose)
    implementation(libs.androidx.core.i18n)
    testImplementation(libs.junit)
    androidTestImplementation(libs.androidx.junit)
    androidTestImplementation(libs.androidx.espresso.core)

    // Retrofit para las peticiones de red
    implementation(libs.retrofit)

    // Gson para convertir JSON a objetos Kotlin/Java
    implementation(libs.converter.gson)

    // OkHttp para la inspección y logging (muy útil para depurar)
    implementation(libs.logging.interceptor)

    // Coroutines para manejar operaciones asíncronas
    implementation(libs.kotlinx.coroutines.android)
    implementation(libs.kotlinx.coroutines.core)

    // Javax Inject para inyección de dependencias
    implementation(libs.javax.inject)
    debugImplementation(libs.androidx.ui.tooling)

    // BoM
    implementation(platform(libs.androidx.compose.bom))

    // Compose
    implementation(libs.androidx.activity.compose)
    implementation(libs.androidx.navigation.compose)
    implementation(libs.androidx.ui)
    implementation(libs.androidx.foundation)
    implementation(libs.androidx.material3)
    implementation(libs.androidx.compose.material.icons.extended)

    // 3. Dependencias de Debug/Test para Compose
    debugImplementation(libs.androidx.ui.tooling)
    debugImplementation(libs.androidx.ui.tooling.preview)

    // Coil compose
    implementation(libs.coil.compose)

    // Hilt
    implementation(libs.hilt.android)
    implementation(libs.androidx.hilt.navigation.compose)
    ksp(libs.hilt.compiler)

    // DataStore
    implementation(libs.androidx.datastore.preferences)

    // Room
    implementation(libs.androidx.room.runtime)
    implementation(libs.androidx.room.ktx)
    ksp(libs.androidx.room.compiler)
}



================================================
FILE: app/proguard-rules.pro
================================================
# =================================================================================
# REGLAS DE PROGUARD/R8 PARA LA APP RDSCORE
# Estas reglas son VITALES para que el APK de producción funcione.
# =================================================================================

# --- Reglas para Gson ---
# Conserva los nombres de los campos de las clases que usan la anotación @SerializedName.
# Esto es CRUCIAL para que la conversión de JSON a objetos funcione.
-keepclassmembers,allowobfuscation class * {
    @com.google.gson.annotations.SerializedName <fields>;
}

# --- Reglas para tus Clases de Datos (Data Classes) ---
# Es la forma más segura de asegurar que R8 no elimina ni ofusca tus modelos.
# Esto le dice a R8: "No toques NADA dentro de cualquier clase que esté en los
# paquetes de 'data' y sus subpaquetes".

# Paquete legacy (por si queda algo)
-keep class com.rigobertods.rdscore.data.** { *; }

# Nuevos paquetes después de la modularización
-keep class com.rigobertods.rdscore.core.data.** { *; }
-keep class com.rigobertods.rdscore.core.network.** { *; }
-keep class com.rigobertods.rdscore.core.common.** { *; }
-keep class com.rigobertods.rdscore.features.auth.data.** { *; }
-keep class com.rigobertods.rdscore.features.partidos.data.** { *; }
-keep class com.rigobertods.rdscore.features.perfil.data.** { *; }
-keep class com.rigobertods.rdscore.features.historial.data.** { *; }
-keep class com.rigobertods.rdscore.features.cuotascalientes.data.** { *; }
-keep class com.rigobertods.rdscore.features.resumen.data.** { *; }
-keep class com.rigobertods.rdscore.features.equipo.data.** { *; }
-keep class com.rigobertods.rdscore.features.ligas.data.** { *; }

# --- Reglas para Retrofit y OkHttp ---
# Evita problemas con las interfaces y clases internas de estas librerías,
# ya que también usan reflexión.
-dontwarn retrofit2.**
-keep class retrofit2.** { *; }
-keep interface retrofit2.** { *; }
-keep @retrofit2.http.POST class * { <methods>; }
-keep @retrofit2.http.GET class * { <methods>; }
# Añade más si usas @PUT, @DELETE, etc.

-dontwarn okhttp3.**
-keep class okhttp3.** { *; }
-keep interface okhttp3.** { *; }

# --- Reglas para Coroutines ---
# Conserva metadatos necesarios para el funcionamiento interno de las corrutinas,
# especialmente cuando se usan con otras librerías.
-keepattributes Signature
-keepattributes *Annotation*
-keepattributes InnerClasses
-keep,allowobfuscation,allowshrinking class kotlinx.coroutines.flow.internal.SafeCollector

# --- Regla para Javax Inject ---
# Conserva las anotaciones de inyección de dependencias.
-keep @javax.inject.Inject class * { *; }

    


================================================
FILE: app/release/output-metadata.json
================================================
{
  "version": 3,
  "artifactType": {
    "type": "APK",
    "kind": "Directory"
  },
  "applicationId": "com.rigobertods.rdscore",
  "variantName": "release",
  "elements": [
    {
      "type": "SINGLE",
      "filters": [],
      "attributes": [],
      "versionCode": 34,
      "versionName": "5.00",
      "outputFile": "RDScore.apk"
    }
  ],
  "elementType": "File",
  "baselineProfiles": [
    {
      "minApi": 28,
      "maxApi": 30,
      "baselineProfiles": [
        "baselineProfiles/1/RDScore.dm"
      ]
    },
    {
      "minApi": 31,
      "maxApi": 2147483647,
      "baselineProfiles": [
        "baselineProfiles/0/RDScore.dm"
      ]
    }
  ],
  "minSdkVersionForDexing": 29
}


================================================
FILE: app/src/androidTest/java/com/rigobertods/rdscore/ExampleInstrumentedTest.kt
================================================
package com.rigobertods.rdscore

import androidx.test.ext.junit.runners.AndroidJUnit4
import androidx.test.platform.app.InstrumentationRegistry
import org.junit.Assert
import org.junit.Test
import org.junit.runner.RunWith

/**
 * Instrumented test, which will execute on an Android device.
 *
 * @see [Testing documentation](http://d.android.com/tools/testing)
 */
@RunWith(AndroidJUnit4::class)
class ExampleInstrumentedTest {
    @Test
    fun useAppContext() {
        // Context of the app under test.
        val appContext = InstrumentationRegistry.getInstrumentation().targetContext
        Assert.assertEquals("com.rigobertods.rdscore", appContext.packageName)
    }
}


================================================
FILE: app/src/debug/java/com/rigobertods/rdscore/PantallaDetallePartidoPreview.kt
================================================
﻿package com.rigobertods.rdscore

import androidx.compose.runtime.Composable
import androidx.compose.ui.tooling.preview.Preview
import com.rigobertods.rdscore.features.partidos.data.Btts
import com.rigobertods.rdscore.features.partidos.data.Equipo
import com.rigobertods.rdscore.features.partidos.data.GolesEsperados
import com.rigobertods.rdscore.features.partidos.data.Liga
import com.rigobertods.rdscore.features.partidos.data.Over25
import com.rigobertods.rdscore.features.partidos.data.Partido
import com.rigobertods.rdscore.features.partidos.data.Prediccion
import com.rigobertods.rdscore.features.partidos.data.Probabilidades
import com.rigobertods.rdscore.features.partidos.data.Recomendacion
import com.rigobertods.rdscore.features.partidos.data.Resultado1x2
import com.rigobertods.rdscore.features.partidos.data.TipoPrediccion
import com.rigobertods.rdscore.features.partidos.ui.PantallaDetallePartido
import java.time.LocalDate
import java.time.format.DateTimeFormatter

@Preview(showBackground = true)
@Composable
fun PantallaDetallePartidoPreview() {
    val equipoEjemplo = Equipo(
        0,
        "",
        "",
        0,
        0,
        0.0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        "",
        0,
        0.0,
        0,
        0.0,
        0,
        0,
        0.0,
        0,
        0.0,
        0,
        0,
        0.0,
        0,
        0.0,
        0,
        "",
        Liga(0, "La Liga", "España", "", "")
    )
    val prediccionEjemplo = Prediccion(
        GolesEsperados(1.5, 0.5),
        Resultado1x2("Local", Probabilidades(0.7, 0.2, 0.1), 0.7, Recomendacion(1, 1, 1)),
        Btts("", 0.6, Recomendacion(1, 1, 1)),
        Over25("", 0.4, Recomendacion(1, 1, 1))
    )
    val tipoPrediccionEjemplo = TipoPrediccion.Detallada(prediccionEjemplo)
    val partidoEjemplo = Partido(
        1,
        "FT",
        1,
        2025,
        "J1",
        "Equipo A",
        "Equipo B",
        equipoEjemplo,
        equipoEjemplo,
        LocalDate.now().format(DateTimeFormatter.ofPattern("dd/MM/yyyy")),
        "21:00",
        "Madrid",
        "Estadio",
        "Arbitro",
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        tipoPrediccionEjemplo)
    PantallaDetallePartido(partidoEjemplo)
}



================================================
FILE: app/src/debug/java/com/rigobertods/rdscore/ui/components/BannerAvisoPreview.kt
================================================
﻿package com.rigobertods.rdscore.ui.components

import androidx.compose.runtime.Composable
import androidx.compose.ui.tooling.preview.Preview


@Preview(showBackground = true)
@Composable
fun BannerAvisoPreview () {
    BannerAviso(
        titulo = "Mercado Resultado temporalmente desactivado",
        texto = "El modelo de predicción del mercado Resultado se encuentra en proceso de recalibración.\n" +
                "Los pronósticos se volverán a habilitar una vez finalizado el ajuste."
    )
}



================================================
FILE: app/src/debug/java/com/rigobertods/rdscore/ui/components/BarraNavegacionFlechasPreview.kt
================================================
﻿package com.rigobertods.rdscore.ui.components

import androidx.compose.runtime.Composable
import androidx.compose.ui.tooling.preview.Preview
import com.rigobertods.rdscore.core.ui.RDScoreTheme
import java.time.LocalDate

@Preview(
    name = "Modo Claro",
    showBackground = true
)
@Preview(
    name = "Modo Noche",
    showBackground = true,
    uiMode = android.content.res.Configuration.UI_MODE_NIGHT_YES
)
@Composable
fun BarraNavegacionFlechasPreview () {
    val fechaHoy = LocalDate.now()

    RDScoreTheme(darkTheme = false) {
        BarraNavegacionFechas(
            fecha = fechaHoy,
            enabled = true,
            onFechaAnterior = {},
            onFechaSiguiente = {},
            onCalendarioClick = {},
            onFiltroClick = {}
        )
    }
}



================================================
FILE: app/src/debug/java/com/rigobertods/rdscore/ui/components/DialogoFiltrosPreview.kt
================================================
﻿package com.rigobertods.rdscore.ui.components

import androidx.compose.runtime.Composable
import androidx.compose.runtime.getValue
import androidx.compose.runtime.mutableStateOf
import androidx.compose.runtime.remember
import androidx.compose.runtime.setValue
import androidx.compose.ui.tooling.preview.Preview

@Preview(showBackground = true)
@Composable
fun DialogoFiltrosPreview() {
    var filtros by remember { mutableStateOf(FiltroState()) }

    DialogoFiltros(
        filtroState = filtros,
        onDismiss = { },
        onAplicarFiltros = { _ ->
        }
    )
}



================================================
FILE: app/src/debug/java/com/rigobertods/rdscore/ui/components/PartidoItemPreview.kt
================================================
﻿package com.rigobertods.rdscore.ui.components

import androidx.compose.runtime.Composable
import androidx.compose.ui.tooling.preview.Preview
import com.rigobertods.rdscore.features.partidos.data.Btts
import com.rigobertods.rdscore.features.partidos.data.Equipo
import com.rigobertods.rdscore.features.partidos.data.GolesEsperados
import com.rigobertods.rdscore.features.partidos.data.Liga
import com.rigobertods.rdscore.features.partidos.data.Over25
import com.rigobertods.rdscore.features.partidos.data.Partido
import com.rigobertods.rdscore.features.partidos.data.Prediccion
import com.rigobertods.rdscore.features.partidos.data.Probabilidades
import com.rigobertods.rdscore.features.partidos.data.Recomendacion
import com.rigobertods.rdscore.features.partidos.data.Resultado1x2
import com.rigobertods.rdscore.features.partidos.data.TipoPrediccion
import java.time.LocalDate
import java.time.format.DateTimeFormatter

@Preview (showBackground = true, name = "Partido Terminado")
@Composable
fun PartidoItemPreviewTerminado() {
    val equipoEjemplo = Equipo(
        0,
        "",
        "",
        0,
        0,
        0.0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        "",
        0,
        0.0,
        0,
        0.0,
        0,
        0,
        0.0,
        0,
        0.0,
        0,
        0,
        0.0,
        0,
        0.0,
        0,
        "",
        Liga(0, "La Liga", "España", "", "")
    )
    val prediccionEjemplo = Prediccion(
        GolesEsperados(1.5, 0.5),
        Resultado1x2("Local", Probabilidades(0.7, 0.2, 0.1), 0.7, Recomendacion(1, 1, 1)),
        Btts("", 0.6, Recomendacion(1, 1, 1)),
        Over25("", 0.4, Recomendacion(1, 1, 1))
    )
    val tipoPrediccionEjemplo = TipoPrediccion.Detallada(prediccionEjemplo)
    val partidoEjemplo = Partido(
        1,
        "FT",
        1,
        2025,
        "J1",
        "Equipo A",
        "Equipo B",
        equipoEjemplo,
        equipoEjemplo,
        LocalDate.now().format(DateTimeFormatter.ofPattern("dd/MM/yyyy")),
        "21:00",
        "Madrid",
        "Estadio",
        "Arbitro",
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        tipoPrediccionEjemplo)
    PartidoItem(partidoEjemplo, 0, onClick = {})
}

@Preview (showBackground = true, name = "Partido Predecido Resultado")
@Composable
fun PartidoItemPreviewPredecidoResultado() {
    val equipoEjemplo = Equipo(
        0,
        "",
        "",
        0,
        0,
        0.0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        "",
        0,
        0.0,
        0,
        0.0,
        0,
        0,
        0.0,
        0,
        0.0,
        0,
        0,
        0.0,
        0,
        0.0,
        0,
        "",
        Liga(0, "La Liga", "España", "", "")
    )
    val prediccionEjemplo = Prediccion(
        GolesEsperados(1.5, 0.5),
        Resultado1x2("Local", Probabilidades(0.7, 0.2, 0.1), 0.7, Recomendacion(1, 1, 1)),
        Btts("Si", 0.6, Recomendacion(1, 1, 1)),
        Over25("Over", 0.4, Recomendacion(1, 1, 1))
    )
    val tipoPrediccionEjemplo = TipoPrediccion.Detallada(prediccionEjemplo)
    val partidoEjemplo = Partido(
        1,
        "",
        1,
        2025,
        "J1",
        "Equipo A",
        "Equipo B",
        equipoEjemplo,
        equipoEjemplo,
        LocalDate.now().format(DateTimeFormatter.ofPattern("dd/MM/yyyy")),
        "21:00",
        "Madrid",
        "Estadio",
        "Arbitro",
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        tipoPrediccionEjemplo)
    PartidoItem(partidoEjemplo, 0, onClick = {})
}

@Preview (showBackground = true, name = "Partido Predecido Btts")
@Composable
fun PartidoItemPreviewPredecidoBtts() {
    val equipoEjemplo = Equipo(
        0,
        "",
        "",
        0,
        0,
        0.0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        "",
        0,
        0.0,
        0,
        0.0,
        0,
        0,
        0.0,
        0,
        0.0,
        0,
        0,
        0.0,
        0,
        0.0,
        0,
        "",
        Liga(0, "La Liga", "España", "", "")
    )
    val prediccionEjemplo = Prediccion(
        GolesEsperados(1.5, 0.5),
        Resultado1x2("Local", Probabilidades(0.7, 0.2, 0.1), 0.7, Recomendacion(1, 1, 1)),
        Btts("Si", 0.6, Recomendacion(1, 1, 1)),
        Over25("Over", 0.4, Recomendacion(1, 1, 1))
    )
    val tipoPrediccionEjemplo = TipoPrediccion.Detallada(prediccionEjemplo)
    val partidoEjemplo = Partido(
        1,
        "",
        1,
        2025,
        "J1",
        "Equipo A",
        "Equipo B",
        equipoEjemplo,
        equipoEjemplo,
        LocalDate.now().format(DateTimeFormatter.ofPattern("dd/MM/yyyy")),
        "21:00",
        "Madrid",
        "Estadio",
        "Arbitro",
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        tipoPrediccionEjemplo)
    PartidoItem(partidoEjemplo, 1, onClick = {})
}

@Preview (showBackground = true, name = "Partido Predecido Over")
@Composable
fun PartidoItemPreviewPredecidoOver() {
    val equipoEjemplo = Equipo(
        0,
        "",
        "",
        0,
        0,
        0.0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        "",
        0,
        0.0,
        0,
        0.0,
        0,
        0,
        0.0,
        0,
        0.0,
        0,
        0,
        0.0,
        0,
        0.0,
        0,
        "",
        Liga(0, "La Liga", "España", "", "")
    )
    val prediccionEjemplo = Prediccion(
        GolesEsperados(1.5, 0.5),
        Resultado1x2("Local", Probabilidades(0.7, 0.2, 0.1), 0.7, Recomendacion(1, 1, 1)),
        Btts("Si", 0.6, Recomendacion(1, 1, 1)),
        Over25("Over", 0.4, Recomendacion(1, 1, 1))
    )
    val tipoPrediccionEjemplo = TipoPrediccion.Detallada(prediccionEjemplo)
    val partidoEjemplo = Partido(
        1,
        "",
        1,
        2025,
        "J1",
        "Equipo A",
        "Equipo B",
        equipoEjemplo,
        equipoEjemplo,
        LocalDate.now().format(DateTimeFormatter.ofPattern("dd/MM/yyyy")),
        "21:00",
        "Madrid",
        "Estadio",
        "Arbitro",
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        tipoPrediccionEjemplo)
    PartidoItem(partidoEjemplo, 2, onClick = {})
}

@Preview (showBackground = true, name = "Partido Sin Prediccion")
@Composable
fun PartidoItemPreviewSinPrediccion() {
    val equipoEjemplo = Equipo(
        0,
        "",
        "",
        0,
        0,
        0.0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        "",
        0,
        0.0,
        0,
        0.0,
        0,
        0,
        0.0,
        0,
        0.0,
        0,
        0,
        0.0,
        0,
        0.0,
        0,
        "",
        Liga(0, "La Liga", "España", "", "")
    )
    val prediccionEjemplo = ""
    val tipoPrediccionEjemplo = TipoPrediccion.Simple(prediccionEjemplo)
    val partidoEjemplo = Partido(
        1,
        "",
        1,
        2025,
        "J1",
        "Equipo A",
        "Equipo B",
        equipoEjemplo,
        equipoEjemplo,
        LocalDate.now().format(DateTimeFormatter.ofPattern("dd/MM/yyyy")),
        "21:00",
        "Madrid",
        "Estadio",
        "Arbitro",
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        tipoPrediccionEjemplo)
    PartidoItem(partidoEjemplo, 0, onClick = {})
}



================================================
FILE: app/src/debug/java/com/rigobertods/rdscore/ui/main/ContenidoEquipoClasificacionPreview.kt
================================================
﻿package com.rigobertods.rdscore.ui.main

import androidx.compose.runtime.Composable
import androidx.compose.ui.tooling.preview.Preview
import com.rigobertods.rdscore.features.partidos.data.Equipo
import com.rigobertods.rdscore.features.partidos.data.Liga
import com.rigobertods.rdscore.ui.components.ContenidoEquipoClasificacion
import com.rigobertods.rdscore.core.ui.RDScoreTheme

@Preview(showBackground = true)
@Composable
fun ContenidoEquipoClasificacionPreview () {
    val equipo1 = Equipo(
        1, "Atleti", "", 1, 50, 0.0, 10, 10,
        10, 10, 0, 0, 0, 0, 0, 0, 0, 0, "",
        0, 0.0, 0, 0.0, 0, 0, 0.0, 0, 0.0,
        0, 0, 0.0, 0, 0.0, 0, "", Liga()
    )

    val equipo2 = Equipo(
        2, "Barsa", "", 2, 45, 0.0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, "",
        0, 0.0, 0, 0.0, 0, 0, 0.0, 0, 0.0,
        0, 0, 0.0, 0, 0.0, 0, "", Liga()
    )

    val equipo3 = Equipo(
        3, "Madrid", "", 3, 44, 0.0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, "",
        0, 0.0, 0, 0.0, 0, 0, 0.0, 0, 0.0,
        0, 0, 0.0, 0, 0.0, 0, "", Liga()
    )

    val equipos = listOf(equipo1, equipo2, equipo3)

    RDScoreTheme {
        ContenidoEquipoClasificacion(equipo1, equipos)
    }
}



================================================
FILE: app/src/debug/java/com/rigobertods/rdscore/ui/main/PantallaEditarPasswordPreview.kt
================================================
﻿package com.rigobertods.rdscore.ui.main

import androidx.compose.material3.SnackbarHostState
import androidx.compose.runtime.Composable
import androidx.compose.ui.tooling.preview.Preview
import com.rigobertods.rdscore.core.ui.RDScoreTheme
import com.rigobertods.rdscore.features.perfil.ui.PantallaEditarPassword

@Preview(showBackground = true, name = "Estado por Defecto")
@Composable
fun PreviewPantallaEditarPassword() {
    RDScoreTheme {
        PantallaEditarPassword(
            isLoading = false,
            snackbarHostState = SnackbarHostState(),
            onGuardarClick = { _, _ -> },
            onCancelarClick = {},
            onNavigateBack = {}
        )
    }
}

@Preview(showBackground = true, name = "Estado de Carga")
@Composable
fun PreviewPantallaEditarPasswordCargando() {
    RDScoreTheme {
        PantallaEditarPassword(
            isLoading = true,
            snackbarHostState = SnackbarHostState(),
            onGuardarClick = { _, _ -> },
            onCancelarClick = {},
            onNavigateBack = {}
        )
    }
}



================================================
FILE: app/src/debug/java/com/rigobertods/rdscore/ui/main/PantallaEditarPerfilPreview.kt
================================================
﻿package com.rigobertods.rdscore.ui.main

import androidx.compose.material3.SnackbarHostState
import androidx.compose.runtime.Composable
import androidx.compose.ui.tooling.preview.Preview
import com.rigobertods.rdscore.core.ui.RDScoreTheme
import com.rigobertods.rdscore.features.perfil.ui.PantallaEditarPerfil

// Preview para ver el diseño en Android Studio en diferentes estados

@Preview(showBackground = true, name = "Estado por Defecto")
@Composable
fun PreviewPantallaEditarPerfil() {
    RDScoreTheme {
        PantallaEditarPerfil(
            initialUsername = "Rigo",
            initialEmail = "rigo@example.com",
            isLoading = false,
            snackbarHostState = SnackbarHostState(),
            onGuardarClick = { _, _ -> },
            onCancelarClick = {},
            onNavigateBack = {}
        )
    }
}

@Preview(showBackground = true, name = "Estado de Carga")
@Composable
fun PreviewPantallaEditarPerfilCargando() {
    RDScoreTheme {
        PantallaEditarPerfil(
            initialUsername = "Rigo",
            initialEmail = "rigo@example.com",
            isLoading = true, // <-- El Composable en modo carga
            snackbarHostState = SnackbarHostState(),
            onGuardarClick = { _, _ -> },
            onCancelarClick = {},
            onNavigateBack = {}
        )
    }
}



================================================
FILE: app/src/debug/java/com/rigobertods/rdscore/ui/main/PantallaPerfilPreview.kt
================================================
﻿package com.rigobertods.rdscore.ui.main

import androidx.compose.material3.SnackbarHostState
import androidx.compose.runtime.Composable
import androidx.compose.ui.tooling.preview.Preview
import com.rigobertods.rdscore.core.ui.RDScoreTheme
import com.rigobertods.rdscore.features.perfil.ui.PantallaPerfil

@Preview(showBackground = true, name = "Estado por Defecto")
@Composable
fun PreviewPantallaPerfil() {
    RDScoreTheme {
        PantallaPerfil(
            username = "rigobertods",
            email = "rigo.sanchez@email.com",
            isLoading = false,
            snackbarHostState = SnackbarHostState(),
            onEditClick = {},
            onChangePasswordClick = {},
            onLogoutClick = {},
            onDeleteAccountClick = {},
            onNavigateBack = {}
        )
    }
}

@Preview(showBackground = true, name = "Estado de Carga")
@Composable
fun PreviewPantallaPerfilCargando() {
    RDScoreTheme {
        PantallaPerfil(
            username = "",
            email = "",
            isLoading = true,
            snackbarHostState = SnackbarHostState(),
            onEditClick = {},
            onChangePasswordClick = {},
            onLogoutClick = {},
            onDeleteAccountClick = {},
            onNavigateBack = {}
        )
    }
}



================================================
FILE: app/src/main/AndroidManifest.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools">

    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:name=".RDScoreApplication"
        android:allowBackup="false"
        android:dataExtractionRules="@xml/data_extraction_rules"
        android:fullBackupContent="@xml/backup_rules"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:roundIcon="@mipmap/ic_launcher_round"
        android:supportsRtl="true"
        android:theme="@style/Mi.Tema"
        android:usesCleartextTraffic="false"
        tools:targetApi="31">
        <activity
            android:name=".MainActivity"
            android:exported="true"
            android:windowSoftInputMode="adjustResize">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest>


================================================
FILE: app/src/main/java/com/rigobertods/rdscore/MainActivity.kt
================================================
﻿package com.rigobertods.rdscore

import android.content.res.Configuration
import android.os.Bundle
import androidx.activity.ComponentActivity
import androidx.activity.compose.setContent
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.runtime.CompositionLocalProvider
import androidx.compose.runtime.getValue
import androidx.compose.runtime.mutableStateOf
import androidx.compose.runtime.remember
import androidx.compose.runtime.setValue
import androidx.compose.ui.platform.LocalConfiguration
import androidx.compose.ui.semantics.semantics
import androidx.compose.ui.semantics.testTagsAsResourceId
import androidx.core.content.edit
import androidx.lifecycle.compose.collectAsStateWithLifecycle
import androidx.navigation.NavType
import androidx.navigation.compose.NavHost
import androidx.navigation.compose.composable
import androidx.navigation.compose.rememberNavController
import androidx.navigation.navArgument
import com.rigobertods.rdscore.core.common.LanguageManager
import com.rigobertods.rdscore.core.common.ThemeManager
import com.rigobertods.rdscore.core.ui.RDScoreTheme
import com.rigobertods.rdscore.data.SessionManager
import com.rigobertods.rdscore.features.auth.ui.LoginScreen
import com.rigobertods.rdscore.features.auth.ui.RecoverPasswordScreen
import com.rigobertods.rdscore.features.auth.ui.RegisterScreen
import com.rigobertods.rdscore.features.auth.ui.ResetPasswordScreen
import com.rigobertods.rdscore.features.cuotascalientes.ui.CuotasCalientesScreen
import com.rigobertods.rdscore.features.equipo.ui.DetalleEquipoScreen
import com.rigobertods.rdscore.features.partidos.ui.DetallePartidoScreen
import com.rigobertods.rdscore.features.partidos.ui.MainScreen
import com.rigobertods.rdscore.features.perfil.ui.EditarPasswordScreen
import com.rigobertods.rdscore.features.perfil.ui.EditarPerfilScreen
import com.rigobertods.rdscore.features.perfil.ui.PerfilScreen
import com.rigobertods.rdscore.features.resumen.ui.ResumenScreen
import com.rigobertods.rdscore.ui.navigation.NavRoutes
import dagger.hilt.android.AndroidEntryPoint
import java.util.Locale
import javax.inject.Inject

@AndroidEntryPoint
class MainActivity : ComponentActivity() {
    @Inject
    lateinit var themeManager: ThemeManager
    
    @Inject
    lateinit var languageManager: LanguageManager

    @Inject
    lateinit var sessionManager: SessionManager

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        
        // --- BOMBA DE LIMPIEZA / MIGRATION BOMB (v5.00) ---
        // Se asegura de que la primera vez que se ejecute la v5.00, se borre el rastro anterior
        // para evitar conflictos con la nueva API y BD.
        val sharedPrefs = getSharedPreferences("app_migration", MODE_PRIVATE)
        val migrationDone = sharedPrefs.getBoolean("migration_v5_00_done", false)

        if (!migrationDone) {
            // 1. Borrar datos de sesión y base de datos local
            sessionManager.clearAllDataSync()
            
            // 2. Marcar migración como completada
            sharedPrefs.edit { putBoolean("migration_v5_00_done", true) }
            
            // 3. (Opcional) Log para debug
            android.util.Log.d("RDScoreMigration", "Migración v5.00 completada: Datos borrados.")
        }
        
        // Apply language on startup
        applyLanguage(languageManager.getEffectiveLanguage())

        setContent {
            val isDarkTheme by themeManager.isDarkTheme.collectAsStateWithLifecycle()
            
            // Track current language for recomposition
            var currentLanguage by remember { mutableStateOf(languageManager.getEffectiveLanguage()) }
            val supportedLanguages = languageManager.getSupportedLanguagesWithNames()



            
            // Create configuration for current language
            val locale = Locale.forLanguageTag(currentLanguage)
            val configuration = Configuration(LocalConfiguration.current)
            configuration.setLocale(locale)
            
    @OptIn(androidx.compose.ui.ExperimentalComposeUiApi::class)
        CompositionLocalProvider(LocalConfiguration provides configuration) {
            
            // Move navController here to be accessible for session observation
            val navController = rememberNavController()

            // Observe session state
            val isUserLoggedIn by sessionManager.isUserLoggedIn.collectAsStateWithLifecycle()

            // Effect to handle logout navigation
            androidx.compose.runtime.LaunchedEffect(isUserLoggedIn) {
                if (!isUserLoggedIn) {
                    navController.navigate(NavRoutes.Login.route) {
                        popUpTo(0) { inclusive = true } // Clear backstack completely
                    }
                }
            }

            androidx.compose.foundation.layout.Box(
                modifier = androidx.compose.ui.Modifier.fillMaxSize().semantics { testTagsAsResourceId = true }
            ) {
                RDScoreTheme(darkTheme = isDarkTheme) {
                    
                    // --- MANTENIMIENTO / MAINTENANCE MODE ---
                    // Set to true to block app access during server updates
                    val isMaintenanceActive = false

                    if (isMaintenanceActive) {
                        /*
                        MaintenanceScreen(
                            currentLanguage = currentLanguage,
                            supportedLanguages = supportedLanguages,
                            onLanguageChange = { newLanguage ->
                                languageManager.setLanguage(newLanguage)
                                currentLanguage = newLanguage
                                applyLanguage(newLanguage)
                                recreate()
                            }
                        )
                        */
                    } else {
                        NavHost(navController = navController, startDestination = NavRoutes.Login.route) {
                    
                    composable(NavRoutes.Login.route) {
                        val snackbarMessage = intent.getStringExtra("snackbar_message")
                        LoginScreen(
                            snackbarMessage = snackbarMessage,
                            onNavigateToMain = {
                                navController.navigate(NavRoutes.Main.route) {
                                    popUpTo(NavRoutes.Login.route) { inclusive = true }
                                }
                            },
                            onNavigateToRegister = { navController.navigate(NavRoutes.Registro.route) },
                            onNavigateToRecover = { navController.navigate(NavRoutes.RecuperarCuenta.route) }
                        )
                    }

                    composable(NavRoutes.Registro.route) {
                        RegisterScreen(
                            onNavigateToLogin = {
                                navController.navigate(NavRoutes.Login.route) {
                                    popUpTo(NavRoutes.Registro.route) { inclusive = true }
                                }
                            },
                            onNavigateBack = { navController.popBackStack() }
                        )
                    }

                    composable(NavRoutes.RecuperarCuenta.route) {
                        RecoverPasswordScreen(
                            onNavigateToResetPassword = { email ->
                                navController.navigate(
                                    NavRoutes.RestablecerPassword.createRoute(
                                        email
                                    )
                                )
                            },
                            onNavigateBack = { navController.popBackStack() }
                        )
                    }

                    composable(
                        route = NavRoutes.RestablecerPassword.route,
                        arguments = listOf(navArgument("email") { type = NavType.StringType })
                    ) { backStackEntry ->
                        val email = backStackEntry.arguments?.getString("email") ?: ""
                        ResetPasswordScreen(
                            email = email,
                            onNavigateToLogin = {
                                navController.navigate(NavRoutes.Login.route) {
                                    popUpTo(NavRoutes.Login.route) { inclusive = true }
                                }
                            },
                            onNavigateBack = { navController.popBackStack() }
                        )
                    }

                    composable(NavRoutes.Main.route) {
                        MainScreen(
                            isDarkTheme = isDarkTheme,
                            onToggleTheme = { themeManager.toggleTheme() },
                            onNavigateToDetalle = { partido ->
                                navController.navigate(NavRoutes.DetallePartido.createRoute(partido.idPartido))
                            },
                            onNavigateToPerfil = { navController.navigate(NavRoutes.Perfil.route) },
                            onNavigateToResumen = { navController.navigate(NavRoutes.Resumen.route) },
                            onNavigateToCuotas = { navController.navigate(NavRoutes.CuotasCalientes.route) },
                            currentLanguage = currentLanguage,
                            supportedLanguages = supportedLanguages,
                            onLanguageChange = { newLanguage ->
                                languageManager.setLanguage(newLanguage)
                                currentLanguage = newLanguage
                                applyLanguage(newLanguage)
                                // Recreate activity to apply new locale fully
                                recreate()
                            }
                        )
                    }

                    composable(NavRoutes.Perfil.route) {
                        // User logout handling inside PerfilScreen needs a way to navigate to Log in
                        // But PerfilScreen callback is not yet updated to handle logout navigation explicitly if it relies on activity finish.
                        // We check if PerfilScreen or its ViewModel handles logout.
                        // PerfilViewModel.logout() calls SessionManager.logout().
                        // SessionManager.logout clears data and starts InicioActivity via context.startActivity.
                        // THIS IS A PROBLEM. SessionManager should not start Activity directly in Single-Activity mode.
                        
                        PerfilScreen(
                            onNavigateToEditProfile = { username, email ->
                                navController.navigate(NavRoutes.EditarPerfil.createRoute(username, email))
                            },
                            onNavigateToEditPassword = { navController.navigate(NavRoutes.EditarPassword.route) },
                            onNavigateBack = { navController.popBackStack() }
                        )
                    }

                    composable(
                        route = NavRoutes.DetallePartido.route,
                        arguments = listOf(navArgument("partidoId") { type = NavType.IntType })
                    ) {
                        DetallePartidoScreen(
                            onNavigateToEquipo = { equipoId, ligaId ->
                                navController.navigate(NavRoutes.DetalleEquipo.createRoute(equipoId, ligaId))
                            },
                            onNavigateBack = { navController.popBackStack() }
                        )
                    }
                    
                    composable(
                        route = NavRoutes.DetalleEquipo.route,
                        arguments = listOf(
                            navArgument("equipoId") { type = NavType.IntType },
                            navArgument("ligaId") { type = NavType.IntType }
                        )
                    ) { backStackEntry ->
                        val equipoId = backStackEntry.arguments?.getInt("equipoId") ?: 0
                        val ligaId = backStackEntry.arguments?.getInt("ligaId") ?: 0
                        
                        DetalleEquipoScreen(
                            idEquipo = equipoId,
                            idLiga = ligaId,
                            onNavigateBack = { navController.popBackStack() },
                            onEquipoClick = { nuevoEquipoId, nuevoLigaId ->
                                navController.navigate(NavRoutes.DetalleEquipo.createRoute(nuevoEquipoId, nuevoLigaId))
                            },
                            onPartidoClick = { partidoId ->
                                navController.navigate(NavRoutes.DetallePartido.createRoute(partidoId))
                            }
                        )
                    }

                    composable(
                        route = NavRoutes.EditarPerfil.route,
                        arguments = listOf(
                            navArgument("username") { type = NavType.StringType },
                            navArgument("email") { type = NavType.StringType }
                        )
                    ) { backStackEntry ->
                        val username = backStackEntry.arguments?.getString("username") ?: ""
                        val email = backStackEntry.arguments?.getString("email") ?: ""
                        
                        EditarPerfilScreen(
                            initialUsername = username,
                            initialEmail = email,
                            onNavigateBack = { navController.popBackStack() },
                            onProfileUpdated = { navController.popBackStack() }
                        )
                    }

                    composable(NavRoutes.EditarPassword.route) {
                        EditarPasswordScreen(
                            onNavigateBack = { navController.popBackStack() },
                            onPasswordUpdated = { navController.popBackStack() }
                        )
                    }

                    composable(NavRoutes.Resumen.route) {
                        ResumenScreen(
                            onNavigateBack = { navController.popBackStack() }
                        )
                    }
                    
                    composable(NavRoutes.CuotasCalientes.route) {
                        CuotasCalientesScreen(
                            onNavigateToDetalle = { partido ->
                                navController.navigate(NavRoutes.DetallePartido.createRoute(partido.idPartido))
                            },
                            onNavigateBack = { navController.popBackStack() }
                        )
                    }

                }
                    }
                    }
                }
            }
        }
    }
    
    private fun applyLanguage(languageCode: String) {
        val locale = Locale.forLanguageTag(languageCode)
        Locale.setDefault(locale)
        val config = Configuration(resources.configuration)
        config.setLocale(locale)
        @Suppress("DEPRECATION")
        resources.updateConfiguration(config, resources.displayMetrics)
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/RDScoreApplication.kt
================================================
﻿package com.rigobertods.rdscore

import android.app.Application
import android.content.Context
import com.rigobertods.rdscore.core.util.LocaleHelper
import dagger.hilt.android.HiltAndroidApp

@HiltAndroidApp
class RDScoreApplication : Application() {
    
    override fun attachBaseContext(base: Context) {
        super.attachBaseContext(LocaleHelper.onAttach(base))
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/core/common/LanguageManager.kt
================================================
package com.rigobertods.rdscore.core.common

import android.content.Context
import com.rigobertods.rdscore.core.util.LocaleHelper
import com.rigobertods.rdscore.data.SessionManager
import dagger.hilt.android.qualifiers.ApplicationContext
import javax.inject.Inject
import javax.inject.Singleton

@Singleton
class LanguageManager @Inject constructor(
    @param:ApplicationContext private val context: Context,
    private val sessionManager: SessionManager
) {
    companion object {
        val SUPPORTED_LANGUAGES = listOf("es", "en", "de", "fr", "it")
        const val DEFAULT_LANGUAGE = "es"
    }

    /**
     * Obtiene el idioma efectivo a usar:
     * 1. Si hay idioma guardado, lo usa
     * 2. Si el idioma del dispositivo es soportado, lo usa
     * 3. Por defecto: español
     */
    fun getEffectiveLanguage(): String {
        // 1. Try Memory Cache from SessionManager (Fastest)
        val savedLanguage = sessionManager.getLanguageCode()
        if (savedLanguage != null) {
            return savedLanguage
        }

        // 2. Try SharedPreferences (Synchronous fallback for cold start)
        // This fixes the race condition where DataStore isn't ready in MainActivity.onCreate
        val persistedLanguage = LocaleHelper.getPersistedLanguage(context)
        if (persistedLanguage != null && persistedLanguage in SUPPORTED_LANGUAGES) {
            return persistedLanguage
        }

        // 3. Fallback to Device or Default
        val deviceLanguage = getDeviceLanguage()
        if (deviceLanguage in SUPPORTED_LANGUAGES) {
            return deviceLanguage
        }

        return DEFAULT_LANGUAGE
    }

    /**
     * Obtiene el código de idioma del dispositivo
     */
    fun getDeviceLanguage(): String {
        return android.content.res.Resources.getSystem().configuration.locales[0].language
    }

    /**
     * Guarda la preferencia de idioma en AMBOS storages:
     * - DataStore (para lectura reactiva en la app)
     * - SharedPreferences (para Application.attachBaseContext en cold start)
     */
    fun setLanguage(languageCode: String) {
        if (languageCode in SUPPORTED_LANGUAGES) {
            sessionManager.saveLanguage(languageCode)
            // Also persist to SharedPreferences for cold start locale
            LocaleHelper.setLocale(context, languageCode)
        }
    }

    /**
     * Devuelve la lista de idiomas soportados con sus nombres para mostrar en UI
     */
    fun getSupportedLanguagesWithNames(): List<LanguageInfo> {
        return listOf(
            LanguageInfo("es", "Español", "\uD83C\uDDEA\uD83C\uDDF8"),
            LanguageInfo("en", "English", "\uD83C\uDDEC\uD83C\uDDE7"),
            LanguageInfo("de", "Deutsch", "\uD83C\uDDE9\uD83C\uDDEA"),
            LanguageInfo("fr", "Français", "\uD83C\uDDEB\uD83C\uDDF7"),
            LanguageInfo("it", "Italiano", "\uD83C\uDDEE\uD83C\uDDF9")
        )
    }
}

data class LanguageInfo(
    val code: String,
    val displayName: String,
    val flag: String
)



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/core/common/mapEquipoToStatItems.kt
================================================
﻿package com.rigobertods.rdscore.core.common

import com.rigobertods.rdscore.R
import com.rigobertods.rdscore.features.partidos.data.Equipo
import com.rigobertods.rdscore.features.partidos.data.StatItem
import com.rigobertods.rdscore.features.partidos.data.StatItemEquipo
import java.util.Locale

fun mapEquipoToStatItemsEquipo(equipo: Equipo): List<StatItemEquipo> {
    return listOf(
        // -- Récord General --
        StatItemEquipo(R.string.stat_total_matches, equipo.partidosTotales.toString()),
        StatItemEquipo(
            R.string.stat_record_total,
            "${equipo.victoriasTotales}-${equipo.empatesTotales}-${equipo.derrotasTotales}"
        ),

        // -- Récord Casa --
        StatItemEquipo(R.string.stat_home_matches, equipo.partidosCasa.toString()),
        StatItemEquipo(
            R.string.stat_record_home,
            "${equipo.victoriasCasa}-${equipo.empatesCasa}-${equipo.derrotasCasa}"
        ),

        // -- Récord Fuera --
        StatItemEquipo(R.string.stat_away_matches, equipo.partidosFuera.toString()),
        StatItemEquipo(
            R.string.stat_record_away,
            "${equipo.victoriasFuera}-${equipo.empatesFuera}-${equipo.derrotasFuera}"
        ),

        // -- Goles  General --
        StatItemEquipo(R.string.stat_goals_for, equipo.golesFavor.toString()),
        StatItemEquipo(R.string.stat_goals_against, equipo.golesContra.toString()),
        StatItemEquipo(R.string.stat_goal_diff, equipo.diferenciaGoles.toString()),
        StatItemEquipo(
            R.string.stat_goals_for_per_match,
            String.format(Locale.getDefault(), "%.2f", equipo.golesFavorPorPartido)
        ),
        StatItemEquipo(
            R.string.stat_goals_against_per_match,
            String.format(Locale.getDefault(), "%.2f", equipo.golesContraPorPartido)
        ),

        // -- Goles  Casa --
        StatItemEquipo(R.string.stat_goals_for_home, equipo.golesFavorCasa.toString()),
        StatItemEquipo(R.string.stat_goals_against_home, equipo.golesContraCasa.toString()),
        StatItemEquipo(R.string.stat_goal_diff_home, equipo.diferenciaGolesCasa.toString()),
        StatItemEquipo(
            R.string.stat_goals_for_per_match_home,
            String.format(Locale.getDefault(), "%.2f", equipo.golesFavorCasaPorPartido)
        ),
        StatItemEquipo(
            R.string.stat_goals_against_per_match_home,
            String.format(Locale.getDefault(), "%.2f", equipo.golesContraCasaPorPartido)
        ),

        // -- Goles Fuera --
        StatItemEquipo(R.string.stat_goals_for_away, equipo.golesFavorFuera.toString()),
        StatItemEquipo(R.string.stat_goals_against_away, equipo.golesContraFuera.toString()),
        StatItemEquipo(R.string.stat_goal_diff_away, equipo.diferenciaGolesFuera.toString()),
        StatItemEquipo(
            R.string.stat_goals_for_per_match_away,
            String.format(Locale.getDefault(), "%.2f", equipo.golesFavorFueraPorPartido)
        ),
        StatItemEquipo(
            R.string.stat_goals_against_per_match_away,
            String.format(Locale.getDefault(), "%.2f", equipo.golesContraFueraPorPartido)
        )
    )
}

fun mapEquiposToStatItems(local: Equipo, visitante: Equipo): List<StatItem> {
    return listOf(
        // -- General --
        StatItem(R.string.stat_position, local.posicion.toString(), visitante.posicion.toString()),
        StatItem(R.string.stat_points, local.puntos.toString(), visitante.puntos.toString()),
        StatItem(
            R.string.stat_form,
            transformarForma(local.ultimosPartidos),
            transformarForma(visitante.ultimosPartidos)
        ),

        // -- Récord General --
        StatItem(R.string.stat_total_matches, local.partidosTotales.toString(), visitante.partidosTotales.toString()),
        StatItem(
            R.string.stat_record_total,
            "${local.victoriasTotales}-${local.empatesTotales}-${local.derrotasTotales}",
            "${visitante.victoriasTotales}-${visitante.empatesTotales}-${visitante.derrotasTotales}"
        ),

        // -- Récord Casa/Fuera --
        StatItem(R.string.stat_home_away_matches, local.partidosCasa.toString(), visitante.partidosFuera.toString()),
        StatItem(
            R.string.stat_record_home_away,
            "${local.victoriasCasa}-${local.empatesCasa}-${local.derrotasCasa}",
            "${visitante.victoriasFuera}-${visitante.empatesFuera}-${visitante.derrotasFuera}"
        ),

        // -- Goles  General --
        StatItem(R.string.stat_goals_for, local.golesFavor.toString(), visitante.golesFavor.toString()),
        StatItem(R.string.stat_goals_against, local.golesContra.toString(), visitante.golesContra.toString()),
        StatItem(R.string.stat_goal_diff, local.diferenciaGoles.toString(), visitante.diferenciaGoles.toString()),
        StatItem(
            R.string.stat_goals_for_per_match,
            String.format(Locale.getDefault(), "%.2f", local.golesFavorPorPartido),
            String.format(Locale.getDefault(), "%.2f", visitante.golesFavorPorPartido)
        ),
        StatItem(
            R.string.stat_goals_against_per_match,
            String.format(Locale.getDefault(), "%.2f", local.golesContraPorPartido),
            String.format(Locale.getDefault(), "%.2f", visitante.golesContraPorPartido)
        ),

        // -- Goles  Casa/Fuera --
        StatItem(R.string.stat_goals_for_home_away, local.golesFavorCasa.toString(), visitante.golesFavorFuera.toString()),
        StatItem(R.string.stat_goals_against_home_away, local.golesContraCasa.toString(), visitante.golesContraFuera.toString()),
        StatItem(R.string.stat_goal_diff_home_away, local.diferenciaGolesCasa.toString(), visitante.diferenciaGolesFuera.toString()),
        StatItem(
            R.string.stat_goals_for_per_match_home_away,
            String.format(Locale.getDefault(), "%.2f", local.golesFavorCasaPorPartido),
            String.format(Locale.getDefault(), "%.2f", visitante.golesFavorFueraPorPartido)
        ),
        StatItem(
            R.string.stat_goals_against_per_match_home_away,
            String.format(Locale.getDefault(), "%.2f", local.golesContraCasaPorPartido),
            String.format(Locale.getDefault(), "%.2f", visitante.golesContraFueraPorPartido)
        )
    )
}

fun transformarForma(forma: String): String {
    return forma.map { char ->
        when (char) {
            'W' -> 'V'
            'D' -> 'E'
            'L' -> 'D'
            else -> char
        }
    }.joinToString("")
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/core/common/ThemeManager.kt
================================================
﻿package com.rigobertods.rdscore.core.common

import com.rigobertods.rdscore.data.SessionManager
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.SupervisorJob
import kotlinx.coroutines.flow.SharingStarted
import kotlinx.coroutines.flow.StateFlow
import kotlinx.coroutines.flow.stateIn
import javax.inject.Inject
import javax.inject.Singleton

@Singleton
class ThemeManager @Inject constructor(
    private val sessionManager: SessionManager
) {
    private val scope = CoroutineScope(Dispatchers.Main + SupervisorJob())

    val isDarkTheme: StateFlow<Boolean> = sessionManager.isDarkThemeFlow
        .stateIn(
            scope = scope,
            started = SharingStarted.Eagerly,
            initialValue = true
        )

    fun toggleTheme() {
        sessionManager.saveTheme(!isDarkTheme.value)
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/core/common/UiState.kt
================================================
﻿package com.rigobertods.rdscore.core.common

sealed interface UiState<out T> {
    val data: T?

    data class Loading<T>(override val data: T? = null) : UiState<T>
    data class Success<T>(override val data: T) : UiState<T>
    data class Error<T>(val message: String, override val data: T? = null) : UiState<T>
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/core/data/Converters.kt
================================================
﻿package com.rigobertods.rdscore.core.data

import androidx.room.TypeConverter
import com.google.gson.GsonBuilder
import com.rigobertods.rdscore.core.network.adapters.PrediccionAdapter
import com.rigobertods.rdscore.features.partidos.data.Equipo
import com.rigobertods.rdscore.features.partidos.data.TipoPrediccion

class Converters {
    private val gson = GsonBuilder()
        .registerTypeAdapter(TipoPrediccion::class.java, PrediccionAdapter())
        .create()

    @TypeConverter
    fun fromEquipo(equipo: Equipo): String {
        return gson.toJson(equipo)
    }

    @TypeConverter
    fun toEquipo(json: String): Equipo {
        return gson.fromJson(json, Equipo::class.java)
    }

    @TypeConverter
    fun fromTipoPrediccion(prediccion: TipoPrediccion): String {
        val json = gson.toJson(prediccion)
        return json
    }

    @TypeConverter
    fun toTipoPrediccion(json: String): TipoPrediccion {
        if (json.isBlank()) {
            return TipoPrediccion.NoDisponible
        }
        val result = gson.fromJson(json, TipoPrediccion::class.java)
        return result
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/core/data/PartidoMapper.kt
================================================
﻿package com.rigobertods.rdscore.core.data

import com.rigobertods.rdscore.core.data.entities.PartidoEntity
import com.rigobertods.rdscore.features.partidos.data.Partido

fun mapPartidoToEntity(domain: Partido, cacheDate: String): PartidoEntity {
    return PartidoEntity(
        idPartido = domain.idPartido,
        estado = domain.estado,
        idLiga = domain.idLiga,
        temporada = domain.temporada,
        jornada = domain.jornada,
        nombreEquipoLocal = domain.nombreEquipoLocal,
        nombreEquipoVisitante = domain.nombreEquipoVisitante,
        estadisticasLocal = domain.estadisticasLocal,
        estadisticasVisitante = domain.estadisticasVisitante,
        fecha = domain.fecha,
        hora = domain.hora,
        ciudad = domain.ciudad,
        estadio = domain.estadio,
        arbitro = domain.arbitro,
        cuotaLocal = domain.cuotaLocal,
        cuotaEmpate = domain.cuotaEmpate,
        cuotaVisitante = domain.cuotaVisitante,
        cuotaOver = domain.cuotaOver,
        cuotaUnder = domain.cuotaUnder,
        cuotaBtts = domain.cuotaBtts,
        cuotaBttsNo = domain.cuotaBttsNo,
        golesLocal = domain.golesLocal,
        golesVisitante = domain.golesVisitante,
        resultado = domain.resultado,
        ambosMarcan = domain.ambosMarcan,
        localMarca = domain.localMarca,
        visitanteMarca = domain.visitanteMarca,
        mas25 = domain.mas25,
        prediccion = domain.prediccion,
        cacheDate = cacheDate
    )
}

fun mapEntityToDomain(entity: PartidoEntity): Partido {
    return Partido(
        idPartido = entity.idPartido,
        estado = entity.estado,
        idLiga = entity.idLiga,
        temporada = entity.temporada,
        jornada = entity.jornada,
        nombreEquipoLocal = entity.nombreEquipoLocal,
        nombreEquipoVisitante = entity.nombreEquipoVisitante,
        estadisticasLocal = entity.estadisticasLocal,
        estadisticasVisitante = entity.estadisticasVisitante,
        fecha = entity.fecha,
        hora = entity.hora,
        ciudad = entity.ciudad,
        estadio = entity.estadio,
        arbitro = entity.arbitro,
        cuotaLocal = entity.cuotaLocal,
        cuotaEmpate = entity.cuotaEmpate,
        cuotaVisitante = entity.cuotaVisitante,
        cuotaOver = entity.cuotaOver,
        cuotaUnder = entity.cuotaUnder,
        cuotaBtts = entity.cuotaBtts,
        cuotaBttsNo = entity.cuotaBttsNo,
        golesLocal = entity.golesLocal,
        golesVisitante = entity.golesVisitante,
        resultado = entity.resultado,
        ambosMarcan = entity.ambosMarcan,
        localMarca = entity.localMarca,
        visitanteMarca = entity.visitanteMarca,
        mas25 = entity.mas25,
        prediccion = entity.prediccion
    )
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/core/data/RDScoreDatabase.kt
================================================
﻿package com.rigobertods.rdscore.core.data

import androidx.room.Database
import androidx.room.RoomDatabase
import androidx.room.TypeConverters
import com.rigobertods.rdscore.core.data.dao.PartidoDao
import com.rigobertods.rdscore.core.data.entities.PartidoEntity

@Database(entities = [PartidoEntity::class], version = 1, exportSchema = false)
@TypeConverters(Converters::class)
abstract class RDScoreDatabase : RoomDatabase() {
    abstract fun partidoDao(): PartidoDao
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/core/data/dao/PartidoDao.kt
================================================
﻿package com.rigobertods.rdscore.core.data.dao

import androidx.room.Dao
import androidx.room.Insert
import androidx.room.OnConflictStrategy
import androidx.room.Query
import com.rigobertods.rdscore.core.data.entities.PartidoEntity
import kotlinx.coroutines.flow.Flow

@Dao
interface PartidoDao {
    @Query("SELECT * FROM partidos WHERE cacheDate = :fecha ORDER BY hora ASC")
    fun getPartidosPorFecha(fecha: String): Flow<List<PartidoEntity>>

    @Query("SELECT * FROM partidos WHERE cacheDate = :fecha ORDER BY hora ASC")
    suspend fun getPartidosPorFechaOnce(fecha: String): List<PartidoEntity>

    @Insert(onConflict = OnConflictStrategy.REPLACE)
    suspend fun insertPartidos(partidos: List<PartidoEntity>)

    @Query("DELETE FROM partidos WHERE cacheDate = :fecha")
    suspend fun deletePartidosPorFecha(fecha: String)

    @Query("DELETE FROM partidos")
    suspend fun clearAll()

    @Query("SELECT * FROM partidos WHERE idPartido = :id")
    suspend fun getPartidoById(id: Int): PartidoEntity?
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/core/data/entities/PartidoEntity.kt
================================================
﻿package com.rigobertods.rdscore.core.data.entities

import androidx.room.Entity
import androidx.room.PrimaryKey
import com.rigobertods.rdscore.features.partidos.data.Equipo
import com.rigobertods.rdscore.features.partidos.data.TipoPrediccion

@Entity(tableName = "partidos")
data class PartidoEntity(
    @PrimaryKey
    val idPartido: Int,
    val estado: String,
    val idLiga: Int,
    val temporada: Int,
    val jornada: String,
    val nombreEquipoLocal: String,
    val nombreEquipoVisitante: String,
    val estadisticasLocal: Equipo,
    val estadisticasVisitante: Equipo,
    val fecha: String,
    val hora: String,
    val ciudad: String,
    val estadio: String,
    val arbitro: String,
    val cuotaLocal: Double,
    val cuotaEmpate: Double,
    val cuotaVisitante: Double,
    val cuotaOver: Double,
    val cuotaUnder: Double,
    val cuotaBtts: Double,
    val cuotaBttsNo: Double,
    val golesLocal: Int,
    val golesVisitante: Int,
    val resultado: Int,
    val ambosMarcan: Int,
    val localMarca: Int,
    val visitanteMarca: Int,
    val mas25: Int,
    val prediccion: TipoPrediccion,
    val cacheDate: String // To group by date in local query
)



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/core/network/ApiService.kt
================================================
﻿package com.rigobertods.rdscore.core.network

import com.rigobertods.rdscore.features.cuotascalientes.data.CuotaCalienteResponse
import com.rigobertods.rdscore.features.equipo.data.DatosEquipoResponse
import com.rigobertods.rdscore.features.perfil.data.DeleteAccountResponse
import com.rigobertods.rdscore.features.perfil.data.EditPasswordRequest
import com.rigobertods.rdscore.features.perfil.data.EditPasswordResponse
import com.rigobertods.rdscore.features.perfil.data.EditProfileRequest
import com.rigobertods.rdscore.features.perfil.data.EditProfileResponse
import com.rigobertods.rdscore.features.auth.data.ForgotPasswordRequest
import com.rigobertods.rdscore.features.auth.data.ForgotPasswordResponse
import com.rigobertods.rdscore.features.partidos.data.GamesByDateResponse
import com.rigobertods.rdscore.features.perfil.data.GetProfileResponse
import com.rigobertods.rdscore.features.auth.data.LoginRequest
import com.rigobertods.rdscore.features.auth.data.LoginResponse
import com.rigobertods.rdscore.features.auth.data.LogoutResponse
import com.rigobertods.rdscore.features.resumen.data.PrecisionResponse
import com.rigobertods.rdscore.features.resumen.data.PrecisionMercadoResponse
import com.rigobertods.rdscore.features.auth.data.RefreshTokenResponse
import com.rigobertods.rdscore.features.auth.data.RegisterRequest
import com.rigobertods.rdscore.features.auth.data.RegisterResponse
import com.rigobertods.rdscore.features.auth.data.ResetPasswordRequest
import com.rigobertods.rdscore.features.auth.data.ResetPasswordResponse
import retrofit2.Response
import retrofit2.http.Body
import retrofit2.http.DELETE
import retrofit2.http.GET
import retrofit2.http.POST
import retrofit2.http.PUT
import retrofit2.http.Path
import retrofit2.http.Query

interface ApiService {

    // Define el endpoint para el registro
    @POST("register")
    suspend fun register(
        @Body request: RegisterRequest
    ): Response<RegisterResponse>

    // Define el endpoint para el login
    @POST("login")
    suspend fun login(
        @Body request: LoginRequest
    ): Response<LoginResponse>

    // Define el endpoint para cerrar sesión
    @POST("logout")
    suspend fun logout(
    ): Response<LogoutResponse>


    // Define el endpoint para recuperar la cuenta
    @POST("forgot-password")
    suspend fun forgotPassword(
        @Body request: ForgotPasswordRequest
    ): Response<ForgotPasswordResponse>

    // Define el endpoint para restablecer la contraseña
    @POST("reset-password")
    suspend fun resetPassword(
        @Body request: ResetPasswordRequest
    ): Response<ResetPasswordResponse>

    // Define el endpoint para refrescar el token
    @POST("refresh")
    suspend fun refreshToken(
    ): Response<RefreshTokenResponse>

    // Define el endpoint para obtener los partidos por fecha (V1 SQL backed)
    @GET("api/v1/partidos")
    suspend fun getGamesByDate(
        @Query("fecha") request: String
    ): Response<GamesByDateResponse>

    // Define el endpoint para obtener el perfil
    @GET("profile")
    suspend fun getProfile(
    ): Response<GetProfileResponse>

    // Define el endpoint para editar el perfil
    @PUT("modificar-datos")
    suspend fun editProfile(
        @Body request: EditProfileRequest
    ): Response<EditProfileResponse>

    // Define el endpoint para editar la contraseña
    @PUT("cambiar-password")
    suspend fun editPassword(
        @Body request: EditPasswordRequest
    ): Response<EditPasswordResponse>

    // Define el endpoint para eliminar la cuenta
    @DELETE("eliminar-cuenta")
    suspend fun deleteAccount(
    ): Response<DeleteAccountResponse>

    // Define el endpoint para obtener la precisión (V1)
    @GET("api/v1/precision")
    suspend fun getPrecision(
    ): Response<PrecisionResponse>

    // Define el endpoint para obtener la precisión por mercado (V1)
    @GET("api/v1/precision-apuesta")
    suspend fun getPrecisionPorMercado(
    ): Response<PrecisionMercadoResponse>

    // Define el endpoint para obtener las cuotas calientes (V1)
    @GET("api/v1/cuotas-calientes")
    suspend fun getCuotasCalientes(
    ): Response<CuotaCalienteResponse>

    // Define el endpoint para obtener los datos de un equipo (V1)
    @GET("api/v1/datos-equipo/{id_equipo}")
    suspend fun getDatosEquipo(
        @Path("id_equipo") request: Int
    ): Response<DatosEquipoResponse>

    // Define el endpoint para obtener la lista de ligas (V1)
    @GET("api/v1/ligas")
    suspend fun getLigas(): Response<com.rigobertods.rdscore.features.ligas.data.LigaResponse>

}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/core/network/AuthAuthenticator.kt
================================================
﻿package com.rigobertods.rdscore.core.network

import com.rigobertods.rdscore.data.SessionManager
import dagger.Lazy
import kotlinx.coroutines.runBlocking
import okhttp3.Authenticator
import okhttp3.Request
import okhttp3.Response
import okhttp3.Route
import javax.inject.Inject

class AuthAuthenticator @Inject constructor(
    private val sessionManager: SessionManager,
    private val apiService: Lazy<ApiService>
) : Authenticator {

    override fun authenticate(route: Route?, response: Response): Request? {
        // Si la petición original que falló fue a 'login', 'register', o endpoints de cambio de password,
        // no intentes refrescar el token. Simplemente cancela.
        val originalPath = response.request.url.encodedPath
        if (originalPath.endsWith("/login") || 
            originalPath.endsWith("/register") ||
            originalPath.endsWith("/refresh") ||
            originalPath.endsWith("/cambiar-password") ||
            originalPath.endsWith("/reset-password") ||
            originalPath.endsWith("/forgot-password")) {
            return null // Devuelve null para no reintentar y dejar que la Activity maneje el error 401.
        }

        // Optimizacion: Si ya estamos en proceso de logout, no hacemos nada
        if (sessionManager.isLoggingOutState()) {
            return null
        }

        // sessionManager is now injected
        val refreshToken = sessionManager.getRefreshToken()

        // Si no tenemos token de refresco, no podemos hacer nada, cerramos sesión.
        if (refreshToken == null) {
            sessionManager.logout()
            return null
        }

        // Bloqueamos la ejecución para hacer la llamada de refresco de forma síncrona.
        // runBlocking es adecuado aquí porque authenticate se ejecuta en un hilo de fondo de OkHttp.
        return runBlocking {
            // Hacemos la llamada a la API para refrescar el token
            val refreshResponse = apiService.get().refreshToken()

            if (refreshResponse.isSuccessful && refreshResponse.body() != null) {
                // Si el refresco fue exitoso, guardamos el nuevo token
                val newAccessToken = refreshResponse.body()!!.accessToken
                sessionManager.saveAccessToken(newAccessToken)

                // Reintentamos la petición original que falló con el nuevo token
                response.request.newBuilder()
                    .header("Authorization", "Bearer $newAccessToken")
                    .build()
            } else {
                // Si el refresco falla (ej: refresh token caducado), cerramos sesión.
                
                // Usamos logout con mensaje para que la UI se encargue de mostrar el error
                // y evitamos duplicidades gracias al control interno de SessionManager
                sessionManager.logout()
                null // Devolvemos null para cancelar la cadena de peticiones.
            }
        }
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/core/network/AuthInterceptor.kt
================================================
﻿package com.rigobertods.rdscore.core.network

import com.rigobertods.rdscore.data.SessionManager
import okhttp3.Interceptor
import okhttp3.Response
import javax.inject.Inject

class AuthInterceptor @Inject constructor(private val sessionManager: SessionManager) : Interceptor {
    override fun intercept(chain: Interceptor.Chain): Response {
        val originalRequest = chain.request()

        // Determinamos qué token usar
        val token = if (originalRequest.url.encodedPath.endsWith("/refresh")) {
            sessionManager.getRefreshToken()
        } else {
            sessionManager.getAccessToken()
        }

        // Si no hay token, simplemente continuamos con la petición original
        if (token == null) {
            return chain.proceed(originalRequest)
        }

        // Añadimos la cabecera Authorization con el token correspondiente
        val newRequest = originalRequest.newBuilder()
            .header("Authorization", "Bearer $token")
            .build()

        return chain.proceed(newRequest)
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/core/network/NetworkUtils.kt
================================================
package com.rigobertods.rdscore.core.network

import com.google.gson.Gson
import com.rigobertods.rdscore.data.error.ErrorResponse
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.withContext
import retrofit2.Response

class BackendException(val code: String?, override val message: String?) : Exception(message)

object NetworkUtils {

    suspend fun <T> safeApiCall(apiCall: suspend () -> Response<T>): Result<T> {
        return withContext(Dispatchers.IO) {
            try {
                val response = apiCall()
                if (response.isSuccessful) {
                    val body = response.body()
                    if (body != null) {
                        Result.success(body)
                    } else {
                        Result.failure(BackendException(null, "Respuesta vacía del servidor"))
                    }
                } else {
                    val errorBody = response.errorBody()?.string()
                    val result = parseBackendError(errorBody)
                    Result.failure(BackendException(result.first, result.second))
                }
            } catch (e: Exception) {
                Result.failure(e)
            }
        }
    }

    private fun parseBackendError(errorBody: String?): Pair<String?, String> {
        if (errorBody == null) return Pair(null, "Error desconocido")
        
        return try {
            val errorResponse = Gson().fromJson(errorBody, ErrorResponse::class.java)
            // Prioridad: mensaje > error (legacy) > "Error desconocido"
            val message = errorResponse.mensaje ?: errorResponse.error
            val code = errorResponse.errorCode
            Pair(code, message)
        } catch (_: Exception) {
            // Si falla el parseo, devolvemos el body tal cual o un mensaje genérico
            Pair(null, errorBody)
        }
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/core/network/adapters/PrediccionAdapter.kt
================================================
﻿package com.rigobertods.rdscore.core.network.adapters

import com.google.gson.JsonDeserializationContext
import com.google.gson.JsonDeserializer
import com.google.gson.JsonElement
import com.google.gson.JsonNull
import com.google.gson.JsonPrimitive
import com.google.gson.JsonSerializationContext
import com.google.gson.JsonSerializer
import com.rigobertods.rdscore.features.partidos.data.Prediccion
import com.rigobertods.rdscore.features.partidos.data.TipoPrediccion
import java.lang.reflect.Type

class PrediccionAdapter : JsonSerializer<TipoPrediccion>, JsonDeserializer<TipoPrediccion> {

    override fun serialize(
        src: TipoPrediccion?,
        typeOfSrc: Type?,
        context: JsonSerializationContext?
    ): JsonElement {
        if (src == null || context == null) {
            return JsonNull.INSTANCE
        }
        val result = when (src) {
            is TipoPrediccion.Detallada -> context.serialize(src.datos)
            is TipoPrediccion.Simple -> JsonPrimitive(src.mensaje)
            TipoPrediccion.NoDisponible -> JsonNull.INSTANCE
        }
        return result
    }

    override fun deserialize(
        json: JsonElement?,
        typeOfT: Type?,
        context: JsonDeserializationContext?
    ): TipoPrediccion {
        if (json == null || json.isJsonNull) {
            return TipoPrediccion.NoDisponible
        }

        // Si es un primitivo (como un String), lo parseamos como una predicción simple.
        if (json.isJsonPrimitive) {
            val mensaje = json.asString
            return TipoPrediccion.Simple(mensaje)
        }

        // Si el elemento JSON es un objeto
        if (json.isJsonObject && context != null) {
            val jsonObject = json.asJsonObject
            
            // Caso 1: Viene de Room con formato {"mensaje":"..."}
            if (jsonObject.has("mensaje") && !jsonObject.has("datos")) {
                val mensaje = jsonObject.get("mensaje").asString
                return TipoPrediccion.Simple(mensaje)
            }
            
            // Caso 2: Viene de Room con formato {"datos":{...}} (formato wrapper)
            if (jsonObject.has("datos")) {
                return try {
                    val datosJson = jsonObject.get("datos")
                    val datosPrediccion = context.deserialize<Prediccion>(datosJson, Prediccion::class.java)
                    TipoPrediccion.Detallada(datosPrediccion)
                } catch (_: Exception) {
                    TipoPrediccion.NoDisponible
                }
            }
            
            // Caso 3: Formato directo del API {"btts":...,"goles_esperados":...,"over25":...,"resultado_1x2":...}
            return try {
                val datosPrediccion = context.deserialize<Prediccion>(json, Prediccion::class.java)
                TipoPrediccion.Detallada(datosPrediccion)
            } catch (_: Exception) {
                TipoPrediccion.NoDisponible
            }
        }

        // Como fallback
        return TipoPrediccion.NoDisponible
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/core/ui/Color.kt
================================================
﻿package com.rigobertods.rdscore.core.ui

import androidx.compose.ui.graphics.Color

// Define tus colores base aquí
val Negro = Color(0xFF000000)
val Blanco = Color(0xFFFFFFFF)
val GrisOscuro = Color(0xFF494343)
val Naranja = Color(0xFFFF9800)
val VerdeFuerte = Color(0xFF00C853)
val VerdeMedio = Color(0xFF64DD17)
val VerdeDebil = Color(0xFFAAD500)
val Rojo = Color(0xFFF44336)

// Para el tema CLARO
val PrimaryLight = Negro
val OnPrimaryLight = Blanco
val PrimaryContainerLight = GrisOscuro
val OnPrimaryContainerLight = Blanco

// Para el tema OSCURO
val PrimaryDark = Negro
val OnPrimaryDark = Blanco
val PrimaryContainerDark = GrisOscuro
val OnPrimaryContainerDark = Blanco



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/core/ui/Theme.kt
================================================
﻿package com.rigobertods.rdscore.core.ui

import android.app.Activity
import android.os.Build
import androidx.compose.foundation.isSystemInDarkTheme
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.darkColorScheme
import androidx.compose.material3.dynamicDarkColorScheme
import androidx.compose.material3.dynamicLightColorScheme
import androidx.compose.material3.lightColorScheme
import androidx.compose.runtime.Composable
import androidx.compose.runtime.SideEffect
import androidx.compose.ui.platform.LocalContext
import androidx.compose.ui.platform.LocalView
import androidx.core.view.WindowCompat

// Define el esquema de colores para el modo oscuro
private val DarkColorScheme = darkColorScheme(
    primary = PrimaryDark,
    onPrimary = OnPrimaryDark,
    primaryContainer = PrimaryContainerDark,
    onPrimaryContainer = OnPrimaryContainerDark,
)

// Define el esquema de colores para el modo claro
private val LightColorScheme = lightColorScheme(
    primary = PrimaryLight,
    onPrimary = OnPrimaryLight,
    primaryContainer = PrimaryContainerLight,
    onPrimaryContainer = OnPrimaryContainerLight,
)

@Composable
fun RDScoreTheme(
    darkTheme: Boolean = isSystemInDarkTheme(),
    dynamicColor: Boolean = false,
    content: @Composable () -> Unit
) {
    val colorScheme = when {
        dynamicColor && Build.VERSION.SDK_INT >= Build.VERSION_CODES.S -> {
            val context = LocalContext.current
            if (darkTheme) dynamicDarkColorScheme(context) else dynamicLightColorScheme(context)
        }
        darkTheme -> DarkColorScheme
        else -> LightColorScheme
    }

    // Aplica el color a la barra de estado del sistema
    val view = LocalView.current
    if (!view.isInEditMode) {
        SideEffect {
            val window = (view.context as Activity).window
            WindowCompat.getInsetsController(window, view).isAppearanceLightStatusBars = !darkTheme
        }
    }

    // Aplica el tema de Material Design
    MaterialTheme(
        colorScheme = colorScheme,
        typography = Typography,
        content = content
    )
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/core/ui/Type.kt
================================================
﻿package com.rigobertods.rdscore.core.ui

import androidx.compose.material3.Typography
import androidx.compose.ui.text.TextStyle
import androidx.compose.ui.text.font.FontFamily
import androidx.compose.ui.text.font.FontWeight
import androidx.compose.ui.unit.sp

// Define los estilos de texto para tu aplicación
val Typography = Typography(
    bodyLarge = TextStyle(
        fontFamily = FontFamily.Default,
        fontWeight = FontWeight.Normal,
        fontSize = 16.sp,
        lineHeight = 24.sp,
        letterSpacing = 0.5.sp
    ),
    titleLarge = TextStyle(
        fontFamily = FontFamily.Default,
        fontWeight = FontWeight.Bold,
        fontSize = 22.sp,
        lineHeight = 28.sp,
        letterSpacing = 0.sp
    ),
    headlineSmall = TextStyle(
        fontFamily = FontFamily.Default,
        fontWeight = FontWeight.SemiBold,
        fontSize = 24.sp,
        lineHeight = 32.sp,
        letterSpacing = 0.sp
    )
)



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/core/util/LocaleHelper.kt
================================================
package com.rigobertods.rdscore.core.util

import android.annotation.SuppressLint
import android.content.Context
import android.content.SharedPreferences
import java.util.Locale
import androidx.core.content.edit

/**
 * Helper class to manage app locale/language settings.
 * Persists the user's language preference and applies it to the app context.
 * 
 * Note: The SuppressLint for AppBundleLocaleChanges is added because this app
 * includes all language resources in the APK and does not use Play Core's
 * on-demand language delivery feature.
 */
object LocaleHelper {
    
    private const val PREFS_NAME = "locale_prefs"
    private const val KEY_LANGUAGE = "app_language"
    
    /**
     * Sets the app locale and persists the preference.
     * @param context The context to update
     * @param language The language code (e.g., "es", "en", "de", "fra", "it")
     */
    fun setLocale(context: Context, language: String) {
        persist(context, language)
        updateResources(context, language)
    }
    
    /**
     * Gets the persisted language preference.
     * @param context The context to read from
     * @return The persisted language code, or null if not set
     */
    fun getPersistedLanguage(context: Context): String? {
        val prefs: SharedPreferences = context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
        return prefs.getString(KEY_LANGUAGE, null)
    }
    
    /**
     * Applies the persisted locale to the context if one exists.
     * Should be called in Application.attachBaseContext()
     * @param context The base context
     * @return The updated context with the persisted locale applied
     */
    fun onAttach(context: Context): Context {
        val lang = getPersistedLanguage(context)
        return if (lang != null) {
            updateResources(context, lang)
            context
        } else {
            context
        }
    }
    
    private fun persist(context: Context, language: String) {
        val prefs: SharedPreferences = context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
        prefs.edit { putString(KEY_LANGUAGE, language) }
    }
    
    @SuppressLint("AppBundleLocaleChanges")
    private fun updateResources(context: Context, language: String) {
        val locale = Locale.forLanguageTag(language)
        Locale.setDefault(locale)
        
        val config = context.resources.configuration
        config.setLocale(locale)
        @Suppress("DEPRECATION")
        context.resources.updateConfiguration(config, context.resources.displayMetrics)
    }
}




================================================
FILE: app/src/main/java/com/rigobertods/rdscore/data/SessionManager.kt
================================================
﻿package com.rigobertods.rdscore.data

import android.content.Context
import android.util.Log
import androidx.datastore.core.DataStore
import androidx.datastore.preferences.core.Preferences
import androidx.datastore.preferences.core.booleanPreferencesKey
import androidx.datastore.preferences.core.edit
import androidx.datastore.preferences.core.stringPreferencesKey
import androidx.datastore.preferences.preferencesDataStore
import com.rigobertods.rdscore.core.network.ApiService
import dagger.Lazy
import dagger.hilt.android.qualifiers.ApplicationContext
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.SupervisorJob
import kotlinx.coroutines.flow.Flow
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.StateFlow
import kotlinx.coroutines.flow.asStateFlow
import kotlinx.coroutines.flow.first
import kotlinx.coroutines.flow.map
import kotlinx.coroutines.launch
import kotlinx.coroutines.runBlocking
import javax.inject.Inject
import javax.inject.Singleton

private val Context.dataStore: DataStore<Preferences> by preferencesDataStore(name = "app_settings")

@Singleton
class SessionManager @Inject constructor(
    @param:ApplicationContext private val context: Context,
    private val apiService: Lazy<ApiService>
) {
    private val scope = CoroutineScope(Dispatchers.IO + SupervisorJob())
    private val isLoggingOut = java.util.concurrent.atomic.AtomicBoolean(false)

    // In-memory cache for tokens and preferences to avoid runBlocking on Main Thread
    @Volatile
    private var cachedAccessToken: String? = null
    @Volatile
    private var cachedRefreshToken: String? = null
    @Volatile
    private var cachedLanguageCode: String? = null

    // Initial state is false to prevent premature navigation to Main before checking
    private val _isUserLoggedIn = MutableStateFlow(false)
    val isUserLoggedIn: StateFlow<Boolean> = _isUserLoggedIn.asStateFlow()

    companion object {
        private val ACCESS_TOKEN = stringPreferencesKey("access_token")
        private val REFRESH_TOKEN = stringPreferencesKey("refresh_token")
        private val IS_DARK_THEME = booleanPreferencesKey("is_dark_theme")
        private val LANGUAGE_CODE = stringPreferencesKey("language_code")
    }

    init {
        // Collect DataStore to update caches and state
        scope.launch {
            context.dataStore.data.collect { preferences ->
                cachedAccessToken = preferences[ACCESS_TOKEN]
                cachedRefreshToken = preferences[REFRESH_TOKEN]
                cachedLanguageCode = preferences[LANGUAGE_CODE]

                // Update isLoggedIn state based on refresh token presence
                // Note: This makes it reactive. If token is removed, state becomes false.
                _isUserLoggedIn.value = (preferences[REFRESH_TOKEN] != null)
            }
        }
    }

    val isDarkThemeFlow: Flow<Boolean> = context.dataStore.data
        .map { preferences -> preferences[IS_DARK_THEME] ?: true }

    fun saveTokens(accessToken: String, refreshToken: String) {
        isLoggingOut.set(false)
        scope.launch {
            // Update cache immediately
            cachedAccessToken = accessToken
            cachedRefreshToken = refreshToken
            
            context.dataStore.edit { preferences ->
                preferences[ACCESS_TOKEN] = accessToken
                preferences[REFRESH_TOKEN] = refreshToken
            }
        }
    }

    fun saveAccessToken(accessToken: String) {
        isLoggingOut.set(false)
        scope.launch {
            // Update cache immediately
            cachedAccessToken = accessToken
            
            context.dataStore.edit { preferences ->
                preferences[ACCESS_TOKEN] = accessToken
            }
        }
    }

    fun getAccessToken(): String? {
        // Try cache first
        return cachedAccessToken ?: runBlocking {
            context.dataStore.data.map { it[ACCESS_TOKEN] }.first()
        }
    }

    fun getRefreshToken(): String? {
        // Try cache first
        return cachedRefreshToken ?: runBlocking {
            context.dataStore.data.map { it[REFRESH_TOKEN] }.first()
        }
    }

    fun saveTheme(isDark: Boolean) {
        scope.launch {
            context.dataStore.edit { preferences ->
                preferences[IS_DARK_THEME] = isDark
            }
        }
    }

    fun saveLanguage(languageCode: String) {
        // Update cache immediately for instant reads
        cachedLanguageCode = languageCode
        // Persist to DataStore asynchronously
        scope.launch {
            context.dataStore.edit { preferences ->
                preferences[LANGUAGE_CODE] = languageCode
            }
        }
    }

    fun getLanguageCode(): String? = cachedLanguageCode

    fun logout() {
        if (!isLoggingOut.compareAndSet(false, true)) {
            return // Ya se está cerrando sesión, ignorar llamadas concurrentes
        }
        scope.launch {
            try {
                apiService.get().logout()
            } catch (e: Exception) {
                Log.e("SessionManager", "Error al cerrar sesión", e)
            } finally {
                clearLocalData()
                // _isUserLoggedIn update is handled by DataStore collector
            }
        }
    }
    
    fun isLoggingOutState(): Boolean = isLoggingOut.get()

    private suspend fun clearLocalData() {
        // Preserve language and theme settings before clearing
        val savedLanguage = cachedLanguageCode
        val savedTheme = context.dataStore.data.first()[IS_DARK_THEME]
        
        context.dataStore.edit { preferences ->
            preferences.clear()
            // Restore language and theme after clearing auth tokens
            savedLanguage?.let { preferences[LANGUAGE_CODE] = it }
            savedTheme?.let { preferences[IS_DARK_THEME] = it }
        }
    }

    /**
     * Borra TODOS los datos locales (DataStore y Caché/Room) y resetea la app.
     */
    fun clearAllDataSync() {
        runBlocking {
            context.dataStore.edit { it.clear() }
        }
        // Borrar base de datos Room si existe
        context.deleteDatabase("rdscore_database")
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/data/error/ErrorResponse.kt
================================================
﻿package com.rigobertods.rdscore.data.error

import com.google.gson.annotations.SerializedName

data class ErrorResponse (
    val error: String,
    @SerializedName("error_code")
    val errorCode: String? = null,
    val mensaje: String? = null,
)



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/di/AppModule.kt
================================================
﻿@file:Suppress("unused")

package com.rigobertods.rdscore.di

import dagger.Module
import dagger.hilt.InstallIn
import dagger.hilt.components.SingletonComponent

@Module
@InstallIn(SingletonComponent::class)
object AppModule {
    // SessionManager is now provided via its @Inject constructor
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/di/DatabaseModule.kt
================================================
﻿package com.rigobertods.rdscore.di

import android.content.Context
import androidx.room.Room
import com.rigobertods.rdscore.core.data.RDScoreDatabase
import com.rigobertods.rdscore.core.data.dao.PartidoDao
import dagger.Module
import dagger.Provides
import dagger.hilt.InstallIn
import dagger.hilt.android.qualifiers.ApplicationContext
import dagger.hilt.components.SingletonComponent
import javax.inject.Singleton

@Module
@InstallIn(SingletonComponent::class)
object DatabaseModule {

    @Provides
    @Singleton
    fun provideDatabase(@ApplicationContext context: Context): RDScoreDatabase {
        return Room.databaseBuilder(
            context,
            RDScoreDatabase::class.java,
            "rdscore_database"
        ).fallbackToDestructiveMigration(true).build()
    }

    @Provides
    fun providePartidoDao(database: RDScoreDatabase): PartidoDao {
        return database.partidoDao()
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/di/NetworkModule.kt
================================================
﻿package com.rigobertods.rdscore.di

import com.rigobertods.rdscore.BuildConfig
import com.rigobertods.rdscore.core.network.ApiService
import com.rigobertods.rdscore.core.network.AuthAuthenticator
import com.rigobertods.rdscore.core.network.AuthInterceptor
import com.rigobertods.rdscore.core.network.adapters.PrediccionAdapter
import com.rigobertods.rdscore.features.partidos.data.TipoPrediccion
import dagger.Module
import dagger.Provides
import dagger.hilt.InstallIn
import dagger.hilt.components.SingletonComponent
import okhttp3.OkHttpClient
import okhttp3.logging.HttpLoggingInterceptor
import retrofit2.Retrofit
import javax.inject.Singleton

@Module
@InstallIn(SingletonComponent::class)
object NetworkModule {

    private const val BASE_URL = "https://www.rdscore.com/"

    @Provides
    @Singleton
    fun provideGson(): com.google.gson.Gson {
        return com.google.gson.GsonBuilder()
            .registerTypeAdapter(TipoPrediccion::class.java, PrediccionAdapter())
            .create()
    }

    @Provides
    @Singleton
    fun provideOkHttpClient(
        authInterceptor: AuthInterceptor,
        authAuthenticator: AuthAuthenticator
    ): OkHttpClient {
        val loggingInterceptor = HttpLoggingInterceptor().apply {
            level = if (BuildConfig.DEBUG) {
                HttpLoggingInterceptor.Level.BODY
            } else {
                HttpLoggingInterceptor.Level.NONE
            }
        }

        return OkHttpClient.Builder()
            .addInterceptor(authInterceptor)
            .authenticator(authAuthenticator)
            .addInterceptor(loggingInterceptor)
            .build()
    }

    @Provides
    @Singleton
    fun provideRetrofit(okHttpClient: OkHttpClient, gson: com.google.gson.Gson): Retrofit {
        return Retrofit.Builder()
            .baseUrl(BASE_URL)
            .client(okHttpClient)
            .addConverterFactory(retrofit2.converter.gson.GsonConverterFactory.create(gson))
            .build()
    }

    @Provides
    @Singleton
    fun provideApiService(retrofit: Retrofit): ApiService {
        return retrofit.create(ApiService::class.java)
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/di/RepositoryModule.kt
================================================
﻿package com.rigobertods.rdscore.di

import com.rigobertods.rdscore.features.partidos.data.PartidosRepository
import com.rigobertods.rdscore.core.data.dao.PartidoDao
import com.rigobertods.rdscore.features.resumen.data.StatsRepository
import com.rigobertods.rdscore.features.equipo.data.TeamRepository
import com.rigobertods.rdscore.features.perfil.data.UserRepository
import com.rigobertods.rdscore.features.auth.data.AuthRepository
import com.rigobertods.rdscore.core.network.ApiService
import dagger.Module
import dagger.Provides
import dagger.hilt.InstallIn
import dagger.hilt.components.SingletonComponent
import javax.inject.Singleton

@Module
@InstallIn(SingletonComponent::class)
object RepositoryModule {

    @Provides
    @Singleton
    fun providePartidosRepository(
        apiService: ApiService,
        partidoDao: PartidoDao
    ): PartidosRepository {
        return PartidosRepository(apiService, partidoDao)
    }

    @Provides
    @Singleton
    fun provideStatsRepository(apiService: ApiService): StatsRepository {
        return StatsRepository(apiService)
    }

    @Provides
    @Singleton
    fun provideUserRepository(apiService: ApiService): UserRepository {
        return UserRepository(apiService)
    }

    @Provides
    @Singleton
    fun provideAuthRepository(apiService: ApiService): AuthRepository {
        return AuthRepository(apiService)
    }

    @Provides
    @Singleton
    fun provideTeamRepository(
        apiService: ApiService,
        partidosRepository: PartidosRepository
    ): TeamRepository {
        return TeamRepository(apiService, partidosRepository)
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/auth/data/AuthRepository.kt
================================================
﻿package com.rigobertods.rdscore.features.auth.data

import com.rigobertods.rdscore.core.network.ApiService
import com.rigobertods.rdscore.core.network.NetworkUtils
import javax.inject.Inject

class AuthRepository @Inject constructor(private val apiService: ApiService) {

    suspend fun login(loginRequest: LoginRequest): Result<LoginResponse> {
        return NetworkUtils.safeApiCall { apiService.login(loginRequest) }
    }

    suspend fun register(registerRequest: RegisterRequest): Result<RegisterResponse> {
        return NetworkUtils.safeApiCall { apiService.register(registerRequest) }
    }

    suspend fun forgotPassword(request: ForgotPasswordRequest): Result<ForgotPasswordResponse> {
        return NetworkUtils.safeApiCall { apiService.forgotPassword(request) }
    }

    suspend fun resetPassword(request: ResetPasswordRequest): Result<ResetPasswordResponse> {
        return NetworkUtils.safeApiCall { apiService.resetPassword(request) }
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/auth/data/ForgotPasswordRequest.kt
================================================
﻿package com.rigobertods.rdscore.features.auth.data

data class ForgotPasswordRequest (
    val email: String
)



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/auth/data/ForgotPasswordResponse.kt
================================================
﻿package com.rigobertods.rdscore.features.auth.data

import com.google.gson.annotations.SerializedName

data class ForgotPasswordResponse(
    @SerializedName("mensaje")
    val message: String,
    @SerializedName("success_code")
    val successCode: String? = null
)



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/auth/data/LoginRequest.kt
================================================
﻿package com.rigobertods.rdscore.features.auth.data

data class LoginRequest(
    val username: String,
    val password: String
)



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/auth/data/LoginResponse.kt
================================================
﻿package com.rigobertods.rdscore.features.auth.data

import com.google.gson.annotations.SerializedName

data class LoginResponse(
    @SerializedName("access_token")
    val accessToken: String,
    @SerializedName("refresh_token")
    val refreshToken: String,
    @SerializedName("mensaje")
    val message: String? = null,
    @SerializedName("success_code")
    val successCode: String? = null
)



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/auth/data/LogoutResponse.kt
================================================
﻿package com.rigobertods.rdscore.features.auth.data

data class LogoutResponse (
    var mensaje: String,
)



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/auth/data/RefreshTokenResponse.kt
================================================
﻿package com.rigobertods.rdscore.features.auth.data

import com.google.gson.annotations.SerializedName

data class RefreshTokenResponse (
    @SerializedName("access_token")
    val accessToken: String,
)



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/auth/data/RegisterRequest.kt
================================================
﻿package com.rigobertods.rdscore.features.auth.data

data class RegisterRequest (
    val username: String,
    val password: String,
    val email: String
)



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/auth/data/RegisterResponse.kt
================================================
﻿package com.rigobertods.rdscore.features.auth.data

import com.google.gson.annotations.SerializedName

data class RegisterResponse (
    @SerializedName("mensaje")
    val message: String,
    @SerializedName("success_code")
    val successCode: String? = null
)



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/auth/data/ResetPasswordRequest.kt
================================================
﻿package com.rigobertods.rdscore.features.auth.data

import com.google.gson.annotations.SerializedName

data class ResetPasswordRequest (
    val code: String,
    @SerializedName("new_password")
    val newPassword: String
)



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/auth/data/ResetPasswordResponse.kt
================================================
﻿package com.rigobertods.rdscore.features.auth.data

import com.google.gson.annotations.SerializedName

data class ResetPasswordResponse (
    @SerializedName("mensaje")
    val message: String,
    @SerializedName("success_code")
    val successCode: String? = null
)



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/auth/ui/AuthViewModel.kt
================================================
﻿package com.rigobertods.rdscore.features.auth.ui

import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import com.rigobertods.rdscore.data.SessionManager
import com.rigobertods.rdscore.features.auth.data.LoginRequest
import com.rigobertods.rdscore.features.auth.data.RegisterRequest
import com.rigobertods.rdscore.features.auth.data.AuthRepository
import dagger.hilt.android.lifecycle.HiltViewModel
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.StateFlow
import kotlinx.coroutines.flow.asStateFlow
import kotlinx.coroutines.launch
import javax.inject.Inject

@HiltViewModel
class AuthViewModel @Inject constructor(
    private val authRepository: AuthRepository,
    private val sessionManager: SessionManager
) : ViewModel() {

    private val _isLoading = MutableStateFlow(false)
    val isLoading: StateFlow<Boolean> = _isLoading.asStateFlow()

    fun login(username: String, pass: String, onResult: (Boolean, String?) -> Unit) {
        viewModelScope.launch {
            _isLoading.value = true
            val request = LoginRequest(username, pass)
            authRepository.login(request)
                .onSuccess { response ->
                    sessionManager.saveTokens(response.accessToken, response.refreshToken)
                    // Prioritize successCode for translation, fallback to message
                    onResult(true, response.successCode ?: response.message)
                }
                .onFailure { error ->
                    val errorMessage = if (error is com.rigobertods.rdscore.core.network.BackendException) {
                         error.code ?: error.message
                    } else {
                         error.message ?: "Unknown Error"
                    }
                    onResult(false, errorMessage)
                }
            _isLoading.value = false
        }
    }

    fun register(username: String, email: String, pass: String, onResult: (Boolean, String?) -> Unit) {
        viewModelScope.launch {
            _isLoading.value = true
            val request = RegisterRequest(username, pass, email)
            authRepository.register(request)
                .onSuccess { response ->
                    onResult(true, response.successCode ?: response.message)
                }
                .onFailure { error ->
                    val errorMessage = if (error is com.rigobertods.rdscore.core.network.BackendException) {
                         error.code ?: error.message
                    } else {
                         error.message ?: "Unknown Error"
                    }
                    onResult(false, errorMessage)
                }
            _isLoading.value = false
        }
    }

    // Removed checkSession() to avoid blocking Main Thread. 
    // UI should observe sessionManager.isUserLoggedIn directly or via a Flow in ViewModel if needed.
    val isUserLoggedIn = sessionManager.isUserLoggedIn
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/auth/ui/LoginScreen.kt
================================================
﻿package com.rigobertods.rdscore.features.auth.ui

import androidx.compose.material3.SnackbarHostState
import androidx.compose.runtime.Composable
import androidx.compose.runtime.LaunchedEffect
import androidx.compose.runtime.getValue
import androidx.compose.runtime.remember
import androidx.compose.runtime.rememberCoroutineScope
import androidx.compose.ui.platform.LocalContext
import androidx.compose.ui.res.stringResource
import androidx.hilt.lifecycle.viewmodel.compose.hiltViewModel
import androidx.lifecycle.compose.collectAsStateWithLifecycle
import com.rigobertods.rdscore.R
import com.rigobertods.rdscore.core.common.LanguageManager
import com.rigobertods.rdscore.ui.util.traducirMensaje
import dagger.hilt.android.EntryPointAccessors
import kotlinx.coroutines.launch

// Entry point to access LanguageManager in Composable
@dagger.hilt.EntryPoint
@dagger.hilt.InstallIn(dagger.hilt.components.SingletonComponent::class)
interface LanguageManagerEntryPoint {
    fun languageManager(): LanguageManager
}

@Composable
fun LoginScreen(
    onNavigateToMain: () -> Unit,
    onNavigateToRegister: () -> Unit,
    onNavigateToRecover: () -> Unit,
    snackbarMessage: String? = null,
    viewModel: AuthViewModel = hiltViewModel()
) {
    val context = LocalContext.current
    
    // Get LanguageManager via entry point
    val languageManager = remember {
        EntryPointAccessors.fromApplication(
            context.applicationContext,
            LanguageManagerEntryPoint::class.java
        ).languageManager()
    }
    val currentLanguage = remember { languageManager.getEffectiveLanguage() }
    
    val isUserLoggedIn by viewModel.isUserLoggedIn.collectAsStateWithLifecycle()

    LaunchedEffect(isUserLoggedIn) {
        if (isUserLoggedIn) {
            onNavigateToMain()
        }
    }

    val isLoading by viewModel.isLoading.collectAsStateWithLifecycle()
    val snackbarHostState = remember { SnackbarHostState() }
    val coroutineScope = rememberCoroutineScope()

    // Pre-resolve strings to avoid using LocalContext.current in callbacks
    val defaultErrorMessage = stringResource(R.string.error)
    val errorCompleteFieldsMessage = stringResource(R.string.error_complete_fields)

    LaunchedEffect(snackbarMessage) {
        if (snackbarMessage != null) {
            snackbarHostState.showSnackbar(snackbarMessage)
        }
    }

    PantallaInicio(
        isLoading = isLoading,
        snackbarHostState = snackbarHostState,
        snackbarMessage = null, // Handled by LaunchedEffect above
        currentLanguage = currentLanguage,
        onLanguageChange = { languageCode ->
            // Save to LanguageManager (DataStore + SharedPrefs)
            languageManager.setLanguage(languageCode)
            // Recreate activity to apply new locale fully
            (context as? android.app.Activity)?.recreate()
        },
        onIniciarSesionClick = { usuario, password ->
            if (usuario.isNotEmpty() && password.isNotEmpty()) {
                viewModel.login(usuario, password) { success, error ->
                    if (success) {
                        onNavigateToMain()
                    } else {
                        coroutineScope.launch {
                            val translatedError = traducirMensaje(
                                context, 
                                error ?: defaultErrorMessage
                            )
                            snackbarHostState.showSnackbar(translatedError)
                        }
                    }
                }
            } else {
                coroutineScope.launch {
                    snackbarHostState.showSnackbar(errorCompleteFieldsMessage)
                }
            }
        },
        onRecuperarClick = onNavigateToRecover,
        onRegistrarClick = onNavigateToRegister
    )
}






================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/auth/ui/PantallaInicio.kt
================================================
﻿package com.rigobertods.rdscore.features.auth.ui

import androidx.compose.foundation.layout.Box
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.Spacer
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.height
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.layout.size
import androidx.compose.foundation.text.KeyboardOptions
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.filled.Visibility
import androidx.compose.material.icons.filled.VisibilityOff
import androidx.compose.material3.Button
import androidx.compose.material3.CircularProgressIndicator
import androidx.compose.material3.ExperimentalMaterial3Api
import androidx.compose.material3.Icon
import androidx.compose.material3.IconButton
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.OutlinedTextField
import androidx.compose.material3.Scaffold
import androidx.compose.material3.SnackbarHost
import androidx.compose.material3.SnackbarHostState
import androidx.compose.material3.Text
import androidx.compose.material3.TextButton
import androidx.compose.material3.TopAppBar
import androidx.compose.material3.TopAppBarDefaults
import androidx.compose.runtime.Composable
import androidx.compose.runtime.LaunchedEffect
import androidx.compose.runtime.getValue
import androidx.compose.runtime.mutableStateOf
import androidx.compose.runtime.remember
import androidx.compose.runtime.rememberCoroutineScope
import androidx.compose.runtime.setValue
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.platform.testTag
import androidx.compose.ui.res.painterResource
import androidx.compose.ui.res.stringResource
import androidx.compose.ui.text.input.ImeAction
import androidx.compose.ui.text.input.KeyboardType
import androidx.compose.ui.text.input.PasswordVisualTransformation
import androidx.compose.ui.text.input.VisualTransformation
import androidx.compose.ui.unit.dp
import androidx.compose.ui.unit.sp
import com.rigobertods.rdscore.R
import com.rigobertods.rdscore.core.common.LanguageInfo
import com.rigobertods.rdscore.ui.components.LanguageSelectorDialog
import kotlinx.coroutines.delay
import kotlinx.coroutines.launch

@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun PantallaInicio(
    isLoading: Boolean,
    snackbarHostState: SnackbarHostState,
    snackbarMessage: String?,
    currentLanguage: String,
    onLanguageChange: (String) -> Unit,
    onIniciarSesionClick: (usuario: String, pass: String) -> Unit,
    onRecuperarClick: () -> Unit,
    onRegistrarClick: () -> Unit
) {
    // Estados para los valores de los campos de texto
    var nombreUsuario by remember { mutableStateOf("") }
    var password by remember { mutableStateOf("") }

    // Estados para controlar si hay un error en cada campo
    var isNombreUsuarioError by remember { mutableStateOf(false) }
    var isPasswordError by remember { mutableStateOf(false) }
    var passwordVisible by remember { mutableStateOf(false) }

    // Resources
    val errorUsernameEmpty = stringResource(R.string.error_username_empty)
    val errorPasswordEmpty = stringResource(R.string.error_password_empty)

    // Estado para el Snackbar
    val scope = rememberCoroutineScope()

    LaunchedEffect(snackbarMessage) {
        snackbarMessage?.let {
            snackbarHostState.showSnackbar(it)
        }
    }

    // Estado para el selector de idioma
    var showLanguageSelector by remember { mutableStateOf(false) }
    
    // Lista de idiomas soportados
    val supportedLanguages = listOf(
        LanguageInfo("es", "Español", "🇪🇸"),
        LanguageInfo("en", "English", "🇬🇧"),
        LanguageInfo("de", "Deutsch", "🇩🇪"),
        LanguageInfo("fr", "Français", "🇫🇷"),
        LanguageInfo("it", "Italiano", "🇮🇹")
    )

    Scaffold(
        snackbarHost = { SnackbarHost(snackbarHostState) },
        topBar = {
            TopAppBar(
                title = {
                    Icon(
                        painter = painterResource(id = R.mipmap.ic_launcher),
                        contentDescription = stringResource(R.string.cd_logo),
                        modifier = Modifier.size(40.dp),
                        tint = Color.Unspecified
                    )
                },
                actions = {
                    IconButton(onClick = { showLanguageSelector = true }) {
                        Text(
                            text = when (currentLanguage) {
                                "es" -> "🇪🇸"
                                "en" -> "🇬🇧"
                                "de" -> "🇩🇪"
                                "fr" -> "🇫🇷"
                                "it" -> "🇮🇹"
                                else -> "🌍"
                            },
                            fontSize = 24.sp
                        )
                    }
                },
                colors = TopAppBarDefaults.topAppBarColors(containerColor = Color.Black)
            )
        }
    ) { paddingValues ->
        Box(
            modifier = Modifier
                .fillMaxSize()
                .padding(paddingValues),
            contentAlignment = Alignment.Center
        ) {
            Column(
                modifier = Modifier
                    .fillMaxSize()
                    .padding(24.dp),
                horizontalAlignment = Alignment.CenterHorizontally
            ) {
                Text(
                    text = stringResource(id = R.string.tv_bienvenida),
                    fontSize = 28.sp
                )

                Spacer(modifier = Modifier.height(32.dp))

                OutlinedTextField(
                    value = nombreUsuario,
                    onValueChange = {
                        nombreUsuario = it
                        if (isNombreUsuarioError) isNombreUsuarioError = false
                    },
                    label = { Text(stringResource(id = R.string.et_usuario_editar)) },
                    modifier = Modifier.fillMaxWidth().testTag("login_username"),
                    singleLine = true,
                    keyboardOptions = KeyboardOptions(imeAction = ImeAction.Next),
                    isError = isNombreUsuarioError,
                    supportingText = {
                        if (isNombreUsuarioError) {
                            Text(stringResource(R.string.val_name_empty))
                        }
                    }
                )

                Spacer(modifier = Modifier.height(8.dp))

                OutlinedTextField(
                    value = password,
                    onValueChange = {
                        password = it
                        if (isPasswordError) isPasswordError = false
                    },
                    label = { Text(stringResource(id = R.string.et_contrasena)) },
                    modifier = Modifier.fillMaxWidth().testTag("login_password"),
                    singleLine = true,
                    isError = isPasswordError,
                    keyboardOptions = KeyboardOptions(
                        keyboardType = KeyboardType.Password,
                        imeAction = ImeAction.Done
                    ),
                    visualTransformation = if (passwordVisible) VisualTransformation.None else PasswordVisualTransformation(),
                    trailingIcon = {
                        val image = if (passwordVisible) Icons.Filled.Visibility else Icons.Filled.VisibilityOff
                        IconButton(onClick = { passwordVisible = !passwordVisible }) {
                            Icon(image, "Toggle password visibility")
                        }
                    }
                )

                TextButton(
                    onClick = onRecuperarClick,
                    modifier = Modifier.align(Alignment.End)
                ) {
                    Text(stringResource(
                        id = R.string.tv_recuperar_contrasena),
                        color = MaterialTheme.colorScheme.onBackground)
                }

                Spacer(modifier = Modifier.height(16.dp))

                Button(
                    onClick = {
                        // Validar campos y mostrar Snackbar si hay error
                        isNombreUsuarioError = nombreUsuario.isBlank()
                        isPasswordError = password.isBlank()


                        when {
                            isNombreUsuarioError -> scope.launch {
                                snackbarHostState.showSnackbar(errorUsernameEmpty)
                            }
                            isPasswordError -> scope.launch {
                                snackbarHostState.showSnackbar(errorPasswordEmpty)
                            }
                            else -> {
                                // Si es correcto, se procede a guardar
                                onIniciarSesionClick(nombreUsuario, password) }
                            }
                        },
                    modifier = Modifier.fillMaxWidth().testTag("login_button"),
                    enabled = !isLoading
                ) {
                    Text(stringResource(id = R.string.bt_iniciar_sesion))
                }

                TextButton(onClick = onRegistrarClick) {
                    Text(stringResource(
                        id = R.string.tv_registrarse),
                        color = MaterialTheme.colorScheme.onBackground)
                }
            }

            if (isLoading) {
                CircularProgressIndicator(
                    modifier = Modifier.align(Alignment.Center),
                    color = MaterialTheme.colorScheme.onBackground
                )
            }
        }
    }
    
    // Language selector dialog
    if (showLanguageSelector) {
        LanguageSelectorDialog(
            currentLanguage = currentLanguage,
            languages = supportedLanguages,
            onLanguageSelected = { languageCode ->
                @Suppress("AssignedValueIsNeverRead")
                showLanguageSelector = false
                scope.launch {
                    delay(300)
                    onLanguageChange(languageCode)
                }
            },
            onDismiss = {
                @Suppress("AssignedValueIsNeverRead")
                showLanguageSelector = false
            }
        )
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/auth/ui/PantallaRecuperarCuenta.kt
================================================
﻿package com.rigobertods.rdscore.features.auth.ui

import androidx.compose.foundation.layout.Box
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.Spacer
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.height
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.layout.size
import androidx.compose.foundation.text.KeyboardOptions
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.automirrored.filled.ArrowBack
import androidx.compose.material3.Button
import androidx.compose.material3.CircularProgressIndicator
import androidx.compose.material3.ExperimentalMaterial3Api
import androidx.compose.material3.Icon
import androidx.compose.material3.IconButton
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.OutlinedTextField
import androidx.compose.material3.Scaffold
import androidx.compose.material3.SnackbarHost
import androidx.compose.material3.SnackbarHostState
import androidx.compose.material3.Text
import androidx.compose.material3.TopAppBar
import androidx.compose.material3.TopAppBarDefaults
import androidx.compose.runtime.Composable
import androidx.compose.runtime.getValue
import androidx.compose.runtime.mutableStateOf
import androidx.compose.runtime.remember
import androidx.compose.runtime.rememberCoroutineScope
import androidx.compose.runtime.setValue
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.res.painterResource
import androidx.compose.ui.res.stringResource
import androidx.compose.ui.text.input.ImeAction
import androidx.compose.ui.text.input.KeyboardType
import androidx.compose.ui.text.style.TextAlign
import androidx.compose.ui.unit.dp
import androidx.compose.ui.unit.sp
import com.rigobertods.rdscore.R
import kotlinx.coroutines.launch

@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun PantallaRecuperarCuenta(
    isLoading: Boolean,
    snackbarHostState: SnackbarHostState,
    onMandarEmailClick: (email: String) -> Unit,
    onNavigateBack: () -> Unit
) {
    var email by remember { mutableStateOf("") }
    var isEmailError by remember { mutableStateOf(false) }
    val scope = rememberCoroutineScope()
    
    // Resources
    val errorEmailInvalid = stringResource(R.string.error_email_invalid)

    Scaffold(
        snackbarHost = { SnackbarHost(snackbarHostState) },
        topBar = {
            TopAppBar(
                title = {
                    Icon(
                        painter = painterResource(id = R.mipmap.ic_launcher),
                        contentDescription = stringResource(R.string.cd_logo),
                        modifier = Modifier.size(40.dp),
                        tint = Color.Unspecified
                    )
                },
                navigationIcon = {
                    IconButton(onClick = onNavigateBack) { // Llama a la lambda
                        Icon(
                            imageVector = Icons.AutoMirrored.Filled.ArrowBack,
                            contentDescription = stringResource(R.string.cd_back),
                            tint = Color.White
                        )
                    }
                },
                colors = TopAppBarDefaults.topAppBarColors(containerColor = Color.Black)
            )
        }
    ) { paddingValues ->
        Box(
            modifier = Modifier
                .fillMaxSize()
                .padding(paddingValues),
            contentAlignment = Alignment.Center
        ) {
            Column(
                modifier = Modifier
                    .fillMaxSize()
                    .padding(24.dp),
                horizontalAlignment = Alignment.CenterHorizontally
            ) {
                Text(
                    text = stringResource(id = R.string.tv_bienvenida_recuperar),
                    fontSize = 28.sp
                )

                Spacer(modifier = Modifier.height(32.dp))

                Text(
                    text = stringResource(id = R.string.tv_recuperar),
                    modifier = Modifier
                        .fillMaxWidth()
                        .padding(start = 8.dp, bottom = 24.dp),
                    textAlign = TextAlign.Start
                )

                OutlinedTextField(
                    value = email,
                    onValueChange = {
                        email = it
                        if (isEmailError) isEmailError = false
                    },
                    label = { Text(stringResource(id = R.string.et_email_editar)) },
                    modifier = Modifier.fillMaxWidth(),
                    singleLine = true,
                    keyboardOptions = KeyboardOptions(
                        keyboardType = KeyboardType.Email,
                        imeAction = ImeAction.Done
                    ),
                    isError = isEmailError,
                    supportingText = {
                        if (isEmailError) {
                            Text(stringResource(R.string.val_email_invalid))
                        }
                    }
                )

                Spacer(modifier = Modifier.height(24.dp))

                Button(
                    onClick = {
                        isEmailError = !android.util.Patterns.EMAIL_ADDRESS.matcher(email).matches()
                        when {
                            isEmailError -> scope.launch {
                                snackbarHostState.showSnackbar(errorEmailInvalid)
                            }
                            else -> {
                                // Si es correcto, se procede a guardar
                                onMandarEmailClick(email) }
                            }
                        },
                    modifier = Modifier.fillMaxWidth(),
                    enabled = !isLoading
                ) {
                    Text(stringResource(id = R.string.bt_mandar_email))
                }
            }

            if (isLoading) {
                CircularProgressIndicator(
                    modifier = Modifier.align(Alignment.Center),
                    color = MaterialTheme.colorScheme.onBackground
                )
            }
        }
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/auth/ui/PantallaRegistro.kt
================================================
﻿package com.rigobertods.rdscore.features.auth.ui

import androidx.compose.foundation.layout.Box
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.Spacer
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.height
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.layout.size
import androidx.compose.foundation.text.KeyboardOptions
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.automirrored.filled.ArrowBack
import androidx.compose.material.icons.filled.Visibility
import androidx.compose.material.icons.filled.VisibilityOff
import androidx.compose.material3.Button
import androidx.compose.material3.CircularProgressIndicator
import androidx.compose.material3.ExperimentalMaterial3Api
import androidx.compose.material3.Icon
import androidx.compose.material3.IconButton
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.OutlinedTextField
import androidx.compose.material3.Scaffold
import androidx.compose.material3.SnackbarHost
import androidx.compose.material3.SnackbarHostState
import androidx.compose.material3.Text
import androidx.compose.material3.TextButton
import androidx.compose.material3.TopAppBar
import androidx.compose.material3.TopAppBarDefaults
import androidx.compose.runtime.Composable
import androidx.compose.runtime.getValue
import androidx.compose.runtime.mutableStateOf
import androidx.compose.runtime.remember
import androidx.compose.runtime.rememberCoroutineScope
import androidx.compose.runtime.setValue
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.res.painterResource
import androidx.compose.ui.res.stringResource
import androidx.compose.ui.text.input.ImeAction
import androidx.compose.ui.text.input.KeyboardType
import androidx.compose.ui.text.input.PasswordVisualTransformation
import androidx.compose.ui.text.input.VisualTransformation
import androidx.compose.ui.unit.dp
import androidx.compose.ui.unit.sp
import com.rigobertods.rdscore.R
import kotlinx.coroutines.launch

@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun PantallaRegistro(
    isLoading: Boolean,
    snackbarHostState: SnackbarHostState,
    onRegistroClick: (username: String, email: String, pass: String) -> Unit,
    onYaTienesCuentaClick: () -> Unit,
    onNavigateBack: () -> Unit
) {
    // Estados para los valores de los campos de texto
    var nombreUsuario by remember { mutableStateOf("") }
    var email by remember { mutableStateOf("") }
    var password by remember { mutableStateOf("") }

    // Estados para controlar si hay un error en cada campo
    var isNombreUsuarioError by remember { mutableStateOf(false) }
    var isEmailError by remember { mutableStateOf(false) }
    var isPasswordError by remember { mutableStateOf(false) }
    var passwordVisible by remember { mutableStateOf(false) }

    // Resources
    val errorUsernameEmpty = stringResource(R.string.error_username_empty)
    val errorEmailInvalid = stringResource(R.string.error_email_invalid)
    val errorPasswordEmpty = stringResource(R.string.error_password_empty)

    val scope = rememberCoroutineScope()

    Scaffold(
        snackbarHost = { SnackbarHost(snackbarHostState) },
        topBar = {
            TopAppBar(
                title = {
                    Icon(
                        painter = painterResource(id = R.mipmap.ic_launcher),
                        contentDescription = stringResource(R.string.cd_logo),
                        modifier = Modifier.size(40.dp),
                        tint = Color.Unspecified
                    )
                },
                navigationIcon = {
                    IconButton(onClick = onNavigateBack) { // Llama a la lambda
                        Icon(
                            imageVector = Icons.AutoMirrored.Filled.ArrowBack,
                            contentDescription = stringResource(R.string.cd_back),
                            tint = Color.White
                        )
                    }
                },
                colors = TopAppBarDefaults.topAppBarColors(containerColor = Color.Black)
            )
        }
    ) { paddingValues ->
        Box(
            modifier = Modifier
                .fillMaxSize()
                .padding(paddingValues),
            contentAlignment = Alignment.Center
        ) {
            Column(
                modifier = Modifier
                    .fillMaxSize()
                    .padding(24.dp),
                horizontalAlignment = Alignment.CenterHorizontally
            ) {
                Text(
                    text = stringResource(id = R.string.tv_bienvenida_registro),
                    fontSize = 28.sp
                )

                Spacer(modifier = Modifier.height(32.dp))

                OutlinedTextField(
                    value = nombreUsuario,
                    onValueChange = {
                        nombreUsuario = it
                        if (isNombreUsuarioError) isNombreUsuarioError = false
                    },
                    label = { Text(stringResource(id = R.string.et_usuario_editar)) },
                    modifier = Modifier.fillMaxWidth(),
                    singleLine = true,
                    keyboardOptions = KeyboardOptions(imeAction = ImeAction.Next),
                    isError = isNombreUsuarioError,
                    supportingText = {
                        if (isNombreUsuarioError) {
                            Text(stringResource(R.string.val_name_empty))
                        }
                    }
                )

                Spacer(modifier = Modifier.height(8.dp))

                OutlinedTextField(
                    value = email,
                    onValueChange = {
                        email = it
                        if (isEmailError) isEmailError = false
                    },
                    label = { Text(stringResource(id = R.string.et_email_editar)) },
                    modifier = Modifier.fillMaxWidth(),
                    singleLine = true,
                    keyboardOptions = KeyboardOptions(
                        keyboardType = KeyboardType.Email,
                        imeAction = ImeAction.Done
                    ),
                    isError = isEmailError,
                    supportingText = {
                        if (isEmailError) {
                            Text(stringResource(R.string.val_email_invalid))
                        }
                    }
                )

                Spacer(modifier = Modifier.height(8.dp))

                OutlinedTextField(
                    value = password,
                    onValueChange = {
                        password = it
                        if (isPasswordError) isPasswordError = false
                    },
                    label = { Text(stringResource(id = R.string.et_contrasena_registro)) },
                    modifier = Modifier.fillMaxWidth(),
                    singleLine = true,
                    isError = isPasswordError,
                    keyboardOptions = KeyboardOptions(
                        keyboardType = KeyboardType.Password,
                        imeAction = ImeAction.Done
                    ),
                    visualTransformation = if (passwordVisible) VisualTransformation.None else PasswordVisualTransformation(),
                    trailingIcon = {
                        val image = if (passwordVisible) Icons.Filled.Visibility else Icons.Filled.VisibilityOff
                        IconButton(onClick = { passwordVisible = !passwordVisible }) {
                            Icon(image, "Toggle password visibility")
                        }
                    }
                )

                Spacer(modifier = Modifier.height(24.dp))

                Button(
                    onClick = {
                        // Validar campos y mostrar Snackbar si hay error
                        isNombreUsuarioError = nombreUsuario.isBlank()
                        isEmailError = !android.util.Patterns.EMAIL_ADDRESS.matcher(email).matches()
                        isPasswordError = password.isBlank()

                        when {
                            isNombreUsuarioError -> scope.launch {
                                snackbarHostState.showSnackbar(errorUsernameEmpty)
                            }
                            isEmailError -> scope.launch {
                                snackbarHostState.showSnackbar(errorEmailInvalid)
                            }
                            isPasswordError -> scope.launch {
                                snackbarHostState.showSnackbar(errorPasswordEmpty)
                            }
                            else -> {
                                // Si es correcto, se procede a guardar
                                onRegistroClick(nombreUsuario, email, password)
                            }
                        }
                    },
                    modifier = Modifier.fillMaxWidth(),
                    enabled = !isLoading
                ) {
                    Text(stringResource(id = R.string.bt_registrar))
                }

                TextButton(
                    onClick = onYaTienesCuentaClick,
                    modifier = Modifier.padding(top = 8.dp),
                    enabled = !isLoading
                ) {
                    Text(stringResource(
                        id = R.string.tv_ya_tienes_cuenta),
                        color = MaterialTheme.colorScheme.onBackground)
                }
            }

            if (isLoading) {
                CircularProgressIndicator(
                    modifier = Modifier.align(Alignment.Center),
                    color = MaterialTheme.colorScheme.onBackground
                )
            }
        }
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/auth/ui/PantallaRestablecerPassword.kt
================================================
﻿package com.rigobertods.rdscore.features.auth.ui

import androidx.compose.foundation.layout.Box
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.Spacer
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.height
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.layout.size
import androidx.compose.foundation.text.KeyboardOptions
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.automirrored.filled.ArrowBack
import androidx.compose.material3.Button
import androidx.compose.material3.CircularProgressIndicator
import androidx.compose.material3.ExperimentalMaterial3Api
import androidx.compose.material3.Icon
import androidx.compose.material3.IconButton
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.OutlinedTextField
import androidx.compose.material3.Scaffold
import androidx.compose.material3.SnackbarHost
import androidx.compose.material3.SnackbarHostState
import androidx.compose.material3.Text
import androidx.compose.material3.TextButton
import androidx.compose.material3.TopAppBar
import androidx.compose.material3.TopAppBarDefaults
import androidx.compose.runtime.Composable
import androidx.compose.runtime.getValue
import androidx.compose.runtime.mutableStateOf
import androidx.compose.runtime.remember
import androidx.compose.runtime.setValue
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.res.painterResource
import androidx.compose.ui.res.stringResource
import androidx.compose.ui.text.input.ImeAction
import androidx.compose.ui.text.input.KeyboardType
import androidx.compose.ui.text.input.PasswordVisualTransformation
import androidx.compose.ui.text.style.TextAlign
import androidx.compose.ui.unit.dp
import androidx.compose.ui.unit.sp
import com.rigobertods.rdscore.R

@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun PantallaRestablecerPassword(
    isLoading: Boolean,
    snackbarHostState: SnackbarHostState,
    onRestablecerClick: (code: String, newPassword: String) -> Unit,
    onReenviarClick: () -> Unit,
    onNavigateBack: () -> Unit
) {
    var code by remember { mutableStateOf("") }
    var newPassword by remember { mutableStateOf("") }

    Scaffold(
        snackbarHost = { SnackbarHost(snackbarHostState) },
        topBar = {
            TopAppBar(
                title = {
                    Icon(
                        painter = painterResource(id = R.mipmap.ic_launcher),
                        contentDescription = stringResource(R.string.cd_logo),
                        modifier = Modifier.size(40.dp),
                        tint = Color.Unspecified
                    )
                },
                navigationIcon = {
                    IconButton(onClick = onNavigateBack) { // Llama a la lambda
                        Icon(
                            imageVector = Icons.AutoMirrored.Filled.ArrowBack,
                            contentDescription = stringResource(R.string.cd_back),
                            tint = Color.White
                        )
                    }
                },
                colors = TopAppBarDefaults.topAppBarColors(containerColor = Color.Black)
            )
        }
    ) { paddingValues ->
        Box(
            modifier = Modifier
                .fillMaxSize()
                .padding(paddingValues),
            contentAlignment = Alignment.Center
        ) {
            Column(
                modifier = Modifier
                    .fillMaxSize()
                    .padding(24.dp),
                horizontalAlignment = Alignment.CenterHorizontally
            ) {
                Text(
                    text = stringResource(id = R.string.tv_bienvenida_restablecer),
                    fontSize = 28.sp
                )

                Spacer(modifier = Modifier.height(32.dp))

                Text(
                    text = stringResource(id = R.string.tv_codigo),
                    modifier = Modifier
                        .fillMaxWidth()
                        .padding(start = 8.dp, bottom = 24.dp),
                    textAlign = TextAlign.Start
                )

                OutlinedTextField(
                    value = code,
                    onValueChange = { code = it },
                    label = { Text(stringResource(id = R.string.et_codigo)) },
                    modifier = Modifier.fillMaxWidth(),
                    singleLine = true,
                    keyboardOptions = KeyboardOptions(imeAction = ImeAction.Next),
                )

                Spacer(modifier = Modifier.height(8.dp))

                OutlinedTextField(
                    value = newPassword,
                    onValueChange = { newPassword = it },
                    label = { Text(stringResource(id = R.string.et_nueva_contrasena)) },
                    modifier = Modifier.fillMaxWidth(),
                    singleLine = true,
                    visualTransformation = PasswordVisualTransformation(),
                    keyboardOptions = KeyboardOptions(
                        keyboardType = KeyboardType.Password,
                        imeAction = ImeAction.Done
                    ),
                )

                Spacer(modifier = Modifier.height(24.dp))

                Button(
                    onClick = {
                        if (code.isNotEmpty() && newPassword.isNotEmpty()) {
                            onRestablecerClick(code, newPassword)
                        }
                    },
                    modifier = Modifier.fillMaxWidth(),
                    enabled = !isLoading
                ) {
                    Text(stringResource(id = R.string.bt_restablecer))
                }

                TextButton(
                    onClick = onReenviarClick,
                    modifier = Modifier.padding(top = 8.dp),
                    enabled = !isLoading
                ) {
                    Text(stringResource(
                        id = R.string.tv_reenviar_email),
                        color = MaterialTheme.colorScheme.onBackground)
                }
            }

            if (isLoading) {
                CircularProgressIndicator(
                    modifier = Modifier.align(Alignment.Center),
                    color = MaterialTheme.colorScheme.onBackground
                )
            }
        }
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/auth/ui/RecoverPasswordScreen.kt
================================================
﻿package com.rigobertods.rdscore.features.auth.ui

import androidx.compose.material3.SnackbarHostState
import androidx.compose.runtime.Composable
import androidx.compose.runtime.getValue
import androidx.compose.runtime.remember
import androidx.compose.runtime.rememberCoroutineScope
import androidx.compose.ui.platform.LocalContext
import androidx.compose.ui.res.stringResource
import androidx.hilt.lifecycle.viewmodel.compose.hiltViewModel
import androidx.lifecycle.compose.collectAsStateWithLifecycle
import com.rigobertods.rdscore.R
import com.rigobertods.rdscore.ui.util.traducirMensaje
import kotlinx.coroutines.launch

@Composable
fun RecoverPasswordScreen(
    onNavigateToResetPassword: (String) -> Unit,
    onNavigateBack: () -> Unit,
    viewModel: RecuperarCuentaViewModel = hiltViewModel()
) {
    val isLoading by viewModel.isLoading.collectAsStateWithLifecycle()
    val snackbarHostState = remember { SnackbarHostState() }
    val coroutineScope = rememberCoroutineScope()
    val context = LocalContext.current
    val defaultSuccessMsg = stringResource(R.string.msg_email_sent)
    val defaultErrorMsg = stringResource(R.string.error)
    val completeFieldsMsg = stringResource(R.string.error_complete_fields)

    PantallaRecuperarCuenta(
        isLoading = isLoading,
        snackbarHostState = snackbarHostState,
        onMandarEmailClick = { email ->
            if (email.isNotEmpty()) {
                viewModel.mandarEmailRecuperacion(email) { success, message ->
                    val translatedMessage = traducirMensaje(
                        context,
                        message ?: if (success) defaultSuccessMsg else defaultErrorMsg
                    )
                    if (success) {
                        coroutineScope.launch {
                            snackbarHostState.showSnackbar(translatedMessage)
                            onNavigateToResetPassword(email)
                        }
                    } else {
                        coroutineScope.launch {
                            snackbarHostState.showSnackbar(translatedMessage)
                        }
                    }
                }
            } else {
                coroutineScope.launch {
                    snackbarHostState.showSnackbar(completeFieldsMsg)
                }
            }
        },
        onNavigateBack = onNavigateBack
    )
}




================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/auth/ui/RecuperarCuentaViewModel.kt
================================================
﻿package com.rigobertods.rdscore.features.auth.ui

import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import com.rigobertods.rdscore.features.auth.data.ForgotPasswordRequest
import com.rigobertods.rdscore.features.auth.data.AuthRepository
import dagger.hilt.android.lifecycle.HiltViewModel
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.StateFlow
import kotlinx.coroutines.flow.asStateFlow
import kotlinx.coroutines.launch
import javax.inject.Inject

@HiltViewModel
class RecuperarCuentaViewModel @Inject constructor(
    private val authRepository: AuthRepository
) : ViewModel() {

    private val _isLoading = MutableStateFlow(false)
    val isLoading: StateFlow<Boolean> = _isLoading.asStateFlow()

    fun mandarEmailRecuperacion(email: String, onResult: (Boolean, String?) -> Unit) {
        viewModelScope.launch {
            _isLoading.value = true
            val request = ForgotPasswordRequest(email)
            authRepository.forgotPassword(request)
                .onSuccess { response ->
                    onResult(true, response.successCode ?: response.message)
                }
                .onFailure { error ->
                    val errorMessage = if (error is com.rigobertods.rdscore.core.network.BackendException && error.code != null) {
                        error.code
                    } else {
                        error.message
                    }
                    onResult(false, errorMessage)
                }
            _isLoading.value = false
        }
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/auth/ui/RegisterScreen.kt
================================================
﻿package com.rigobertods.rdscore.features.auth.ui

import androidx.compose.material3.SnackbarHostState
import androidx.compose.runtime.Composable
import androidx.compose.runtime.getValue
import androidx.compose.runtime.remember
import androidx.compose.runtime.rememberCoroutineScope
import androidx.compose.ui.platform.LocalContext
import androidx.hilt.lifecycle.viewmodel.compose.hiltViewModel
import androidx.lifecycle.compose.collectAsStateWithLifecycle
import com.rigobertods.rdscore.R
import com.rigobertods.rdscore.ui.util.traducirMensaje
import androidx.compose.ui.res.stringResource
import kotlinx.coroutines.launch

@Composable
fun RegisterScreen(
    onNavigateToLogin: () -> Unit,
    onNavigateBack: () -> Unit,
    viewModel: AuthViewModel = hiltViewModel()
) {
    val context = LocalContext.current
    val isLoading by viewModel.isLoading.collectAsStateWithLifecycle()
    val snackbarHostState = remember { SnackbarHostState() }
    val coroutineScope = rememberCoroutineScope()
    
    // Resources
    val successMessage = stringResource(R.string.success_account_created)
    val defaultErrorMessage = stringResource(R.string.error)

    PantallaRegistro(
        isLoading = isLoading,
        snackbarHostState = snackbarHostState,
        onRegistroClick = { username, email, password ->
            viewModel.register(username, email, password) { success, message ->
                if (success) {
                    coroutineScope.launch {
                        snackbarHostState.showSnackbar(successMessage)
                    }
                    // Delay slighty or just navigate
                    onNavigateToLogin() // Original logic went to Log in (InicioActivity)
                } else {
                    coroutineScope.launch {
                        val translatedError = traducirMensaje(
                            context,
                            message ?: defaultErrorMessage
                        )
                        snackbarHostState.showSnackbar(translatedError)
                    }
                }
            }
        },
        onYaTienesCuentaClick = onNavigateToLogin,
        onNavigateBack = onNavigateBack
    )
}




================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/auth/ui/ResetPasswordScreen.kt
================================================
﻿package com.rigobertods.rdscore.features.auth.ui

import androidx.compose.material3.SnackbarHostState
import androidx.compose.runtime.Composable
import androidx.compose.runtime.getValue
import androidx.compose.runtime.remember
import androidx.compose.runtime.rememberCoroutineScope
import androidx.compose.ui.platform.LocalContext
import androidx.compose.ui.res.stringResource
import androidx.hilt.lifecycle.viewmodel.compose.hiltViewModel
import androidx.lifecycle.compose.collectAsStateWithLifecycle
import com.rigobertods.rdscore.R
import com.rigobertods.rdscore.ui.util.traducirMensaje
import kotlinx.coroutines.launch

@Composable
fun ResetPasswordScreen(
    email: String,
    onNavigateToLogin: () -> Unit,
    onNavigateBack: () -> Unit,
    viewModel: RestablecerPasswordViewModel = hiltViewModel()
) {
    val isLoading by viewModel.isLoading.collectAsStateWithLifecycle()
    val snackbarHostState = remember { SnackbarHostState() }
    val coroutineScope = rememberCoroutineScope()
    val context = LocalContext.current
    val defaultErrorMsg = stringResource(R.string.error)
    val emailResentMsg = stringResource(R.string.msg_email_sent)
    val resendErrorMsg = stringResource(R.string.error_email_send_failed)

    PantallaRestablecerPassword(
        isLoading = isLoading,
        snackbarHostState = snackbarHostState,
        onRestablecerClick = { code, newPassword ->
            viewModel.restablecerPassword(code, newPassword) { success, message ->
                if (success) {
                    coroutineScope.launch {
                        onNavigateToLogin()
                    }
                } else {
                    coroutineScope.launch {
                        val translatedError = traducirMensaje(
                            context,
                            message ?: defaultErrorMsg
                        )
                        snackbarHostState.showSnackbar(translatedError)
                    }
                }
            }
        },
        onReenviarClick = {
            viewModel.reenviarEmail(email) { success, message ->
                coroutineScope.launch {
                    val translatedMsg = traducirMensaje(
                        context,
                        message ?: if (success) emailResentMsg else resendErrorMsg
                    )
                    snackbarHostState.showSnackbar(translatedMsg)
                }
            }
        },
        onNavigateBack = onNavigateBack
    )
}




================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/auth/ui/RestablecerPasswordViewModel.kt
================================================
﻿package com.rigobertods.rdscore.features.auth.ui

import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import com.rigobertods.rdscore.features.auth.data.ForgotPasswordRequest
import com.rigobertods.rdscore.features.auth.data.AuthRepository
import com.rigobertods.rdscore.features.auth.data.ResetPasswordRequest
import dagger.hilt.android.lifecycle.HiltViewModel
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.StateFlow
import kotlinx.coroutines.flow.asStateFlow
import kotlinx.coroutines.launch
import javax.inject.Inject

@HiltViewModel
class RestablecerPasswordViewModel @Inject constructor(
    private val authRepository: AuthRepository
) : ViewModel() {

    private val _isLoading = MutableStateFlow(false)
    val isLoading: StateFlow<Boolean> = _isLoading.asStateFlow()

    fun restablecerPassword(code: String, newPass: String, onResult: (Boolean, String?) -> Unit) {
        viewModelScope.launch {
            _isLoading.value = true
            val request = ResetPasswordRequest(code, newPass)
            authRepository.resetPassword(request)
                .onSuccess { response ->
                    onResult(true, response.successCode ?: response.message)
                }
                .onFailure { error ->
                    val errorMessage = if (error is com.rigobertods.rdscore.core.network.BackendException && error.code != null) {
                        error.code
                    } else {
                        error.message
                    }
                    onResult(false, errorMessage)
                }
            _isLoading.value = false
        }
    }

    fun reenviarEmail(email: String, onResult: (Boolean, String?) -> Unit) {
        viewModelScope.launch {
            _isLoading.value = true
            val request = ForgotPasswordRequest(email)
            authRepository.forgotPassword(request)
                .onSuccess { response ->
                    onResult(true, response.successCode ?: response.message)
                }
                .onFailure { error ->
                    val errorMessage = if (error is com.rigobertods.rdscore.core.network.BackendException && error.code != null) {
                        error.code
                    } else {
                        error.message
                    }
                    onResult(false, errorMessage)
                }
            _isLoading.value = false
        }
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/cuotascalientes/data/CuotaCalienteResponse.kt
================================================
﻿package com.rigobertods.rdscore.features.cuotascalientes.data

import com.google.gson.annotations.SerializedName
import com.rigobertods.rdscore.features.partidos.data.CuotaCaliente
import com.rigobertods.rdscore.features.partidos.data.Partido

data class CuotaCalienteResponse (
    @SerializedName("partidos")
    val partidosList: List<Partido>,
    @SerializedName("cuotas_calientes")
    val cuotasCalientes: List<CuotaCaliente>
)



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/cuotascalientes/ui/CuotasCalientesScreen.kt
================================================
﻿package com.rigobertods.rdscore.features.cuotascalientes.ui

import androidx.compose.material3.SnackbarHostState
import androidx.compose.runtime.Composable
import androidx.compose.runtime.LaunchedEffect
import androidx.compose.runtime.getValue
import androidx.compose.runtime.remember
import androidx.hilt.lifecycle.viewmodel.compose.hiltViewModel
import androidx.lifecycle.compose.collectAsStateWithLifecycle
import com.rigobertods.rdscore.features.partidos.data.Partido

@Composable
fun CuotasCalientesScreen(
    onNavigateToDetalle: (Partido) -> Unit,
    onNavigateBack: () -> Unit,
    viewModel: CuotasCalientesViewModel = hiltViewModel()
) {
    val partidos by viewModel.partidos.collectAsStateWithLifecycle()
    val cuotasCalientes by viewModel.cuotasCalientes.collectAsStateWithLifecycle()
    val isLoading by viewModel.isLoading.collectAsStateWithLifecycle()
    val error by viewModel.error.collectAsStateWithLifecycle()

    val snackbarHostState = remember { SnackbarHostState() }

    LaunchedEffect(Unit) {
        viewModel.obtenerCuotasCalientes()
    }

    LaunchedEffect(error) {
        error?.let {
            snackbarHostState.showSnackbar(it)
            viewModel.clearError()
        }
    }

    PantallaCuotasCalientes(
        partidos = partidos,
        cuotasCalientes = cuotasCalientes,
        isLoading = isLoading,
        snackbarHostState = snackbarHostState,
        onNavigateBack = onNavigateBack,
        onPartidoClick = onNavigateToDetalle
    )
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/cuotascalientes/ui/CuotasCalientesViewModel.kt
================================================
﻿package com.rigobertods.rdscore.features.cuotascalientes.ui

import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import com.rigobertods.rdscore.features.partidos.data.CuotaCaliente
import com.rigobertods.rdscore.features.partidos.data.Partido
import com.rigobertods.rdscore.features.resumen.data.StatsRepository
import dagger.hilt.android.lifecycle.HiltViewModel
import kotlinx.coroutines.launch
import javax.inject.Inject

import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.StateFlow
import kotlinx.coroutines.flow.asStateFlow

@HiltViewModel
class CuotasCalientesViewModel @Inject constructor(
    private val repository: StatsRepository,
    private val partidosRepository: com.rigobertods.rdscore.features.partidos.data.PartidosRepository
) : ViewModel() {

    private val _partidos = MutableStateFlow<List<Partido>>(emptyList())
    val partidos: StateFlow<List<Partido>> = _partidos.asStateFlow()

    private val _cuotasCalientes = MutableStateFlow<List<CuotaCaliente>>(emptyList())
    val cuotasCalientes: StateFlow<List<CuotaCaliente>> = _cuotasCalientes.asStateFlow()

    private val _isLoading = MutableStateFlow(false)
    val isLoading: StateFlow<Boolean> = _isLoading.asStateFlow()

    private val _error = MutableStateFlow<String?>(null)
    val error: StateFlow<String?> = _error.asStateFlow()

    fun obtenerCuotasCalientes() {
        viewModelScope.launch {
            _isLoading.value = true
            _error.value = null
            val result = repository.getCuotasCalientes()
            result.onSuccess { response ->
                _partidos.value = response.partidosList
                _cuotasCalientes.value = response.cuotasCalientes
                
                // Cachear partidos en Room para navegación por ID
                partidosRepository.cachePartidos(response.partidosList)
            }.onFailure { error ->
                _error.value = error.message ?: "Error desconocido"
            }
            _isLoading.value = false
        }
    }

    fun clearError() {
        _error.value = null
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/cuotascalientes/ui/PantallaCuotasCalientes.kt
================================================
﻿package com.rigobertods.rdscore.features.cuotascalientes.ui

import androidx.compose.foundation.layout.Box
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.layout.size
import androidx.compose.foundation.lazy.LazyColumn
import androidx.compose.foundation.lazy.items
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.automirrored.filled.ArrowBack
import androidx.compose.material3.CircularProgressIndicator
import androidx.compose.material3.ExperimentalMaterial3Api
import androidx.compose.material3.Icon
import androidx.compose.material3.IconButton
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.Scaffold
import androidx.compose.material3.SnackbarHost
import androidx.compose.material3.SnackbarHostState
import androidx.compose.material3.Text
import androidx.compose.material3.TopAppBar
import androidx.compose.material3.TopAppBarDefaults
import androidx.compose.runtime.Composable
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.res.painterResource
import androidx.compose.ui.res.stringResource
import androidx.compose.ui.unit.dp
import com.rigobertods.rdscore.R
import com.rigobertods.rdscore.features.partidos.data.CuotaCaliente
import com.rigobertods.rdscore.features.partidos.data.Partido
import com.rigobertods.rdscore.ui.components.CuotaCalienteItem

@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun PantallaCuotasCalientes(
    partidos: List<Partido>,
    cuotasCalientes: List<CuotaCaliente>,
    isLoading: Boolean,
    snackbarHostState: SnackbarHostState,
    onNavigateBack: () -> Unit,
    onPartidoClick: (Partido) -> Unit
) {

    Scaffold(
        topBar = {
            TopAppBar(
                title = {
                    Icon(
                        painter = painterResource(id = R.mipmap.ic_launcher),
                        contentDescription = stringResource(R.string.cd_logo),
                        modifier = Modifier.size(40.dp),
                        tint = Color.Unspecified
                    )
                },
                navigationIcon = {
                    IconButton(onClick = onNavigateBack) {
                        Icon(
                            imageVector = Icons.AutoMirrored.Filled.ArrowBack,
                            contentDescription = stringResource(R.string.cd_back),
                            tint = Color.White
                        )
                    }
                },
                colors = TopAppBarDefaults.topAppBarColors(
                    containerColor = Color.Black,
                    titleContentColor = Color.White
                )
            )
        },
        snackbarHost = { SnackbarHost(snackbarHostState) }
    ) { paddingValues ->
        Box(
            modifier = Modifier
                .fillMaxSize()
                .padding(paddingValues)
        ) {
            if (isLoading && cuotasCalientes.isEmpty()) {
                CircularProgressIndicator(
                    modifier = Modifier.align(Alignment.Center),
                    color = MaterialTheme.colorScheme.onBackground
                )
            } else {
                if (cuotasCalientes.isEmpty()) {
                    Text(
                        text = stringResource(R.string.no_valuable_picks_today),
                        style = MaterialTheme.typography.titleSmall,
                        modifier = Modifier.padding(16.dp).fillMaxWidth()
                    )
                } else {
                    Box(
                        modifier = Modifier.fillMaxSize(),
                        contentAlignment = Alignment.Center
                    ) {
                        Column {
                            // ... UI ...
                            Text(
                                text = stringResource(R.string.hot_odds_disclaimer),
                                style = MaterialTheme.typography.titleSmall,
                                modifier = Modifier.padding(end = 16.dp, start = 16.dp, top = 16.dp)
                            )
                            Text(
                                text = stringResource(R.string.top_picks),
                                style = MaterialTheme.typography.titleSmall,
                                modifier = Modifier.padding(end = 16.dp, start = 16.dp, bottom = 16.dp)
                            )
                            LazyColumn()
                            {
                                items(cuotasCalientes) { cuota ->
                                    val partido = partidos.find { it.idPartido == cuota.id }
                                    if (partido != null) {
                                        CuotaCalienteItem(
                                            onClick = { onPartidoClick(partido) },
                                            partido = partido,
                                            cuotaCaliente = cuota
                                        )
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/equipo/data/DatosEquipoResponse.kt
================================================
﻿package com.rigobertods.rdscore.features.equipo.data

import com.google.gson.annotations.SerializedName
import com.rigobertods.rdscore.features.partidos.data.DatosEquipo

data class DatosEquipoResponse (
    @SerializedName("datos")
    val datosEquipo: DatosEquipo,
)



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/equipo/data/TeamRepository.kt
================================================
﻿package com.rigobertods.rdscore.features.equipo.data

import android.util.Log
import com.rigobertods.rdscore.core.network.ApiService
import javax.inject.Inject

import com.rigobertods.rdscore.features.partidos.data.PartidosRepository

class TeamRepository @Inject constructor(
    private val apiService: ApiService,
    private val partidosRepository: PartidosRepository
) {

    suspend fun getDatosEquipo(idEquipo: Int): Result<DatosEquipoResponse> {
        return try {
            val response = apiService.getDatosEquipo(idEquipo)
            if (response.isSuccessful) {
                val body = response.body()
                if (body != null) {
                    // Cachear partidos para navegación
                    val partidos = body.datosEquipo.partidosEquipo.flatMap { it.partidosLiga }
                    partidosRepository.cachePartidos(partidos)
                    
                    Result.success(body)
                } else {
                    Result.failure(Exception("Respuesta vacía del servidor"))
                }
            } else {
                Result.failure(Exception("Error: ${response.code()} - ${response.message()}"))
            }
        } catch (e: Exception) {
            Log.e("TeamRepository", "Error fetching team data", e)
            Result.failure(e)
        }
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/equipo/ui/DetalleEquipoScreen.kt
================================================
﻿package com.rigobertods.rdscore.features.equipo.ui

import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.material3.SnackbarHostState
import androidx.compose.material3.Surface
import androidx.compose.runtime.Composable
import androidx.compose.runtime.LaunchedEffect
import androidx.compose.runtime.getValue
import androidx.compose.runtime.remember
import androidx.compose.runtime.rememberCoroutineScope
import androidx.compose.ui.Modifier
import androidx.hilt.lifecycle.viewmodel.compose.hiltViewModel
import androidx.lifecycle.compose.collectAsStateWithLifecycle
import kotlinx.coroutines.launch

@Composable
fun DetalleEquipoScreen(
    idEquipo: Int,
    idLiga: Int,
    onNavigateBack: () -> Unit,
    onEquipoClick: (idEquipo: Int, idLiga: Int) -> Unit = { _, _ -> },
    onPartidoClick: (Int) -> Unit = {},
    viewModel: DetalleEquipoViewModel = hiltViewModel()
) {
    val snackbarHostState = remember { SnackbarHostState() }
    val coroutineScope = rememberCoroutineScope()

    val datosEquipo by viewModel.datosEquipo.collectAsStateWithLifecycle()
    val isLoading by viewModel.isLoading.collectAsStateWithLifecycle()
    val selectedTabIndex by viewModel.selectedTabIndex.collectAsStateWithLifecycle()
    val selectedLeagueId by viewModel.selectedLeagueId.collectAsStateWithLifecycle()

    LaunchedEffect(Unit) {
        viewModel.obtenerDatosEquipo(idEquipo) { error ->
            coroutineScope.launch { snackbarHostState.showSnackbar(error) }
        }
    }

    Surface(modifier = Modifier.fillMaxSize()) {
        PantallaDetalleEquipo(
            idEquipo = idEquipo,
            idLiga = idLiga,
            datosEquipo = datosEquipo,
            isLoading = isLoading,
            selectedTabIndex = selectedTabIndex,
            onTabChanged = { viewModel.setSelectedTabIndex(it) },
            selectedLeagueId = selectedLeagueId ?: idLiga,
            onLeagueChanged = { viewModel.setSelectedLeagueId(it) },
            onNavigateBack = onNavigateBack,
            onEquipoClick = onEquipoClick,
            onPartidoClick = onPartidoClick
        )
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/equipo/ui/DetalleEquipoViewModel.kt
================================================
[Binary file]


================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/equipo/ui/PantallaDetalleEquipo.kt
================================================
﻿package com.rigobertods.rdscore.features.equipo.ui

import androidx.compose.foundation.layout.Box
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.Row
import androidx.compose.foundation.layout.Spacer
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.height
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.layout.size
import androidx.compose.foundation.layout.width
import androidx.compose.foundation.pager.HorizontalPager
import androidx.compose.foundation.pager.rememberPagerState
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.automirrored.filled.ArrowBack
import androidx.compose.material3.CircularProgressIndicator
import androidx.compose.material3.DropdownMenuItem
import androidx.compose.material3.ExperimentalMaterial3Api
import androidx.compose.material3.ExposedDropdownMenuBox
import androidx.compose.material3.ExposedDropdownMenuDefaults
import androidx.compose.material3.Icon
import androidx.compose.material3.IconButton
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.ExposedDropdownMenuAnchorType
import androidx.compose.material3.OutlinedTextField
import androidx.compose.material3.Scaffold
import androidx.compose.material3.Surface
import androidx.compose.material3.Tab
import androidx.compose.material3.PrimaryTabRow
import androidx.compose.material3.TabRowDefaults
import androidx.compose.material3.Text
import androidx.compose.material3.TopAppBar
import androidx.compose.material3.TopAppBarDefaults
import androidx.compose.runtime.Composable
import androidx.compose.runtime.LaunchedEffect
import androidx.compose.runtime.getValue
import androidx.compose.runtime.mutableStateOf
import androidx.compose.runtime.remember
import androidx.compose.runtime.rememberCoroutineScope
import androidx.compose.runtime.setValue
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.res.painterResource
import androidx.compose.ui.res.stringResource
import androidx.compose.ui.text.font.FontWeight
import androidx.compose.ui.unit.dp
import androidx.compose.ui.unit.sp
import coil.compose.AsyncImage
import com.rigobertods.rdscore.R
import com.rigobertods.rdscore.features.partidos.data.DatosEquipo
import com.rigobertods.rdscore.features.partidos.data.Equipo
import com.rigobertods.rdscore.ui.components.ContenidoEquipoClasificacion
import com.rigobertods.rdscore.ui.components.ContenidoEquipoEstadisticas
import com.rigobertods.rdscore.ui.components.ContenidoEquipoPartidos
import kotlinx.coroutines.launch

@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun PantallaDetalleEquipo(
    idEquipo: Int,
    idLiga: Int,
    datosEquipo: DatosEquipo,
    isLoading: Boolean,
    selectedTabIndex: Int = 1,
    onTabChanged: (Int) -> Unit = {},
    selectedLeagueId: Int = idLiga,
    onLeagueChanged: (Int) -> Unit = {},
    onNavigateBack: () -> Unit = {},
    onEquipoClick: (idEquipo: Int, idLiga: Int) -> Unit = { _, _ -> },
    onPartidoClick: (Int) -> Unit = {}
) {
    Scaffold (
        topBar = {
            TopAppBar(
                title = {
                    Icon(
                        painter = painterResource(id = R.mipmap.ic_launcher),
                        contentDescription = stringResource(R.string.cd_logo),
                        modifier = Modifier.size(40.dp),
                        tint = Color.Unspecified
                    )
                },
                navigationIcon = {
                    IconButton(onClick = onNavigateBack) {
                        Icon(
                            imageVector = Icons.AutoMirrored.Filled.ArrowBack,
                            contentDescription = stringResource(R.string.cd_back),
                            tint = Color.White
                        )
                    }
                },
                colors = TopAppBarDefaults.topAppBarColors(containerColor = Color.Black)
            )
        }
    ) { paddingValues ->
        Box(
            modifier = Modifier
                .fillMaxSize()
                .padding(paddingValues)
        ) {
            if (isLoading) {
                CircularProgressIndicator(
                    modifier = Modifier.align(Alignment.Center),
                    color = MaterialTheme.colorScheme.onBackground
                )
            } else {
                ContenidoDetalleEquipo(
                    datosEquipo = datosEquipo,
                    idEquipo = idEquipo,
                    selectedLeagueId = selectedLeagueId,
                    onLeagueChanged = onLeagueChanged,
                    selectedTabIndex = selectedTabIndex,
                    onTabChanged = onTabChanged,
                    onEquipoClick = onEquipoClick,
                    onPartidoClick = onPartidoClick
                )
            }
        }
    }
}

@Composable
fun ContenidoDetalleEquipo(
    datosEquipo: DatosEquipo,
    idEquipo: Int,
    selectedLeagueId: Int,
    onLeagueChanged: (Int) -> Unit,
    selectedTabIndex: Int,
    onTabChanged: (Int) -> Unit,
    onEquipoClick: (Int, Int) -> Unit,
    onPartidoClick: (Int) -> Unit
) {
    val tabTitles = listOf(
        stringResource(R.string.tab_statistics),
        stringResource(R.string.tab_standings),
        stringResource(R.string.tab_matches)
    )
    // Tab and league state now comes from ViewModel via parameters
    val pagerState = rememberPagerState(initialPage = selectedTabIndex) { tabTitles.size }
    val coroutineScope = rememberCoroutineScope()
    
    // Ensure selected league is valid - fallback to first available if not found
    val ligasDisponibles = datosEquipo.equiposLigaEquipo.map { it.idLiga }
    val idLigaSeleccionada = if (selectedLeagueId in ligasDisponibles) {
        selectedLeagueId
    } else {
        ligasDisponibles.firstOrNull() ?: selectedLeagueId
    }
    
    // Sync pager state with ViewModel when user changes tab
    LaunchedEffect(pagerState.currentPage) {
        if (selectedTabIndex != pagerState.currentPage) {
            onTabChanged(pagerState.currentPage)
        }
    }
    
    // Restore pager position when returning from navigation
    LaunchedEffect(selectedTabIndex) {
        if (pagerState.currentPage != selectedTabIndex) {
            pagerState.scrollToPage(selectedTabIndex)
        }
    }

    val equipo = datosEquipo.equiposLigaEquipo.find { it.idLiga == idLigaSeleccionada }?.equipo ?: Equipo()
    val equipos = datosEquipo.equiposLigaEquipo.find { it.idLiga == idLigaSeleccionada }?.equiposLiga ?: emptyList()
    val partidos = datosEquipo.partidosEquipo.find { it.idLiga == idLigaSeleccionada }?.partidosLiga ?: emptyList()

    val proximoPartido = partidos.filter { it.resultado == -1 }.minByOrNull { p ->
        val pts = p.fecha.split("/")
        if (pts.size == 3) "${pts[2]}${pts[1]}${pts[0]}" else ""
    }

    val nombreRival = when {
        proximoPartido == null -> "No hay partidos"
        proximoPartido.estadisticasLocal.id == idEquipo -> proximoPartido.nombreEquipoVisitante
        else -> proximoPartido.nombreEquipoLocal
    }

    Column(
        modifier = Modifier
            .fillMaxSize()
            .padding(horizontal = 16.dp)
    ) {
        // ------------------ PARTE DE ARRIBA FIJA --------------------
        Spacer(Modifier.height(8.dp))
        Row(
            modifier = Modifier.align(Alignment.Start)
        ) {
            AsyncImage(
                model = equipo.logo,
                contentDescription = equipo.nombre,
                modifier = Modifier.size(90.dp)
            )
            Spacer(Modifier.width(16.dp))
            Column (
                modifier = Modifier
                    .fillMaxWidth()
                    .weight(1f)
                    .align(Alignment.CenterVertically),
                horizontalAlignment = Alignment.Start
            ){
                Text(
                    text = equipo.nombre,
                    fontSize = 24.sp,
                    fontWeight = FontWeight.Bold
                )
                Spacer(Modifier.height(4.dp))
                Row(
                    verticalAlignment = Alignment.CenterVertically
                ) {
                    Text(
                        text = stringResource(R.string.form_label),
                        fontSize = 16.sp,
                        fontWeight = FontWeight.Medium
                    )
                    Spacer(Modifier.width(4.dp))
                    IndicadorForma(forma = equipo.ultimosPartidos)
                }
                Spacer(Modifier.height(4.dp))
                Row(
                    verticalAlignment = Alignment.CenterVertically
                ) {
                    Text(
                        text = stringResource(R.string.next_match_label),
                        fontSize = 16.sp,
                        fontWeight = FontWeight.Medium
                    )
                    Spacer(Modifier.width(4.dp))
                    Text(
                        text = nombreRival,
                        fontSize = 16.sp,
                        fontWeight = FontWeight.Medium
                    )
                }
            }
        }
        // ------------------ SPINNER DE SELECCION DE LIGA ------------------
        SelectorLiga(
            idLigaSeleccionada = idLigaSeleccionada,
            datosEquipo = datosEquipo,
            onLigaSelected = { nuevoId -> onLeagueChanged(nuevoId) }
        )
        // ------------------ PESTAÑAS DE INFORMACIÓN ------------------
        PrimaryTabRow(
            selectedTabIndex = pagerState.currentPage,
            contentColor = MaterialTheme.colorScheme.onBackground,
            indicator = {
                TabRowDefaults.SecondaryIndicator(
                    modifier = Modifier.tabIndicatorOffset(pagerState.currentPage),
                    height = 3.dp,
                    color = MaterialTheme.colorScheme.onBackground
                )
            }
        ) {
            tabTitles.forEachIndexed { index, title ->
                Tab(
                    selected = pagerState.currentPage == index,
                    onClick = {
                        coroutineScope.launch {
                            pagerState.animateScrollToPage(index)
                        }
                    },
                    text = {
                        Text(
                            text = title,
                            style = MaterialTheme.typography.bodyMedium
                        )
                    }
                )
            }
        }
        Spacer(Modifier.height(16.dp))
        HorizontalPager(
            state = pagerState,
            modifier = Modifier
                .fillMaxWidth()
                .weight(1f)
        ) { page ->
            when (page) {
                0 -> ContenidoEquipoEstadisticas(equipo)
                1 -> ContenidoEquipoClasificacion(equipo, equipos, onEquipoClick)
                2 -> ContenidoEquipoPartidos(equipo, partidos, onPartidoClick)
            }
        }
    }
}

@Composable
fun IndicadorForma(forma: String) {
    // Labels translated based on current locale
    val labelWin = stringResource(R.string.form_win)
    val labelDraw = stringResource(R.string.form_draw)
    val labelLoss = stringResource(R.string.form_loss)
    
    Row(
        verticalAlignment = Alignment.CenterVertically
    ) {
        forma.forEach { letra ->
            // Use original characters from API: W=Win, D=Draw, L=Loss
            val (colorFondo, texto) = when (letra) {
                'W' -> Color(0xFF4CAF50) to labelWin
                'D' -> Color(0xFF9E9E9E) to labelDraw
                'L' -> Color(0xFFF44336) to labelLoss
                else -> Color.DarkGray to letra.toString()
            }
            Surface(
                modifier = Modifier
                    .padding(end = 4.dp)
                    .size(24.dp),
                shape = androidx.compose.foundation.shape.CircleShape,
                color = colorFondo
            ) {
                Box(contentAlignment = Alignment.Center) {
                    Text(
                        text = texto,
                        color = Color.White,
                        fontSize = 12.sp,
                        fontWeight = FontWeight.Bold
                    )
                }
            }
        }
    }
}

// transformarForma is no longer needed since we use original W/D/L from API

data class InfoLiga(val nombre: String, val logo: String)

fun buscarLiga (idLiga: Int, datosEquipo: DatosEquipo): InfoLiga {
    val ligaEncontrada = datosEquipo.equiposLigaEquipo.find { it.idLiga == idLiga }
    return InfoLiga(
        nombre = ligaEncontrada?.equipo?.liga?.nombre ?: "Liga desconocida",
        logo = ligaEncontrada?.equipo?.liga?.logo ?: ""
    )
}

@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun SelectorLiga(
    idLigaSeleccionada: Int,
    datosEquipo: DatosEquipo,
    onLigaSelected: (Int) -> Unit
) {
    // 1. Buscamos la info de la liga que está seleccionada actualmente para el "botón"
    val ligaActual = buscarLiga(idLigaSeleccionada, datosEquipo)
    var expanded by remember { mutableStateOf(false) }

    // Contenedor principal del Dropdown
    ExposedDropdownMenuBox(
        expanded = expanded,
        onExpandedChange = { expanded = !expanded },
        modifier = Modifier
            .fillMaxWidth()
            .padding(vertical = 8.dp)
    ) {
        // Campo de texto que actúa como "Spinner"
        OutlinedTextField(
            value = ligaActual.nombre,
            onValueChange = {},
            readOnly = true, // Evita que el usuario escriba
            label = { Text(stringResource(R.string.label_competition)) },
            leadingIcon = {
                AsyncImage(
                    model = ligaActual.logo,
                    contentDescription = null,
                    modifier = Modifier.size(24.dp)
                )
            },
            trailingIcon = { ExposedDropdownMenuDefaults.TrailingIcon(expanded = expanded) },
            colors = ExposedDropdownMenuDefaults.outlinedTextFieldColors(),
            modifier = Modifier
                .menuAnchor(ExposedDropdownMenuAnchorType.PrimaryNotEditable, enabled = true)
                .fillMaxWidth()
        )

        // Lista de opciones que se despliega
        ExposedDropdownMenu(
            expanded = expanded,
            onDismissRequest = { expanded = false }
        ) {
            datosEquipo.equiposLigaEquipo.forEach { competicion ->
                val info = buscarLiga(competicion.idLiga, datosEquipo)
                DropdownMenuItem(
                    text = {
                        Row(verticalAlignment = Alignment.CenterVertically) {
                            AsyncImage(
                                model = info.logo,
                                contentDescription = null,
                                modifier = Modifier.size(24.dp)
                            )
                            Spacer(Modifier.width(8.dp))
                            Text(text = info.nombre)
                        }
                    },
                    onClick = {
                        onLigaSelected(competicion.idLiga)
                        expanded = false
                    },
                    contentPadding = ExposedDropdownMenuDefaults.ItemContentPadding
                )
            }
        }
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/ligas/data/LeagueRepository.kt
================================================
package com.rigobertods.rdscore.features.ligas.data

import android.util.Log
import com.rigobertods.rdscore.core.network.ApiService
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.StateFlow
import kotlinx.coroutines.flow.asStateFlow
import kotlinx.coroutines.launch
import javax.inject.Inject
import javax.inject.Singleton

@Singleton
class LeagueRepository @Inject constructor(
    private val apiService: ApiService
) {
    private val _leagues = MutableStateFlow<Map<Int, Liga>>(emptyMap())
    val leagues: StateFlow<Map<Int, Liga>> = _leagues.asStateFlow()

    init {
        fetchLeagues()
    }

    private fun fetchLeagues() {
        CoroutineScope(Dispatchers.IO).launch {
            try {
                val response = apiService.getLigas()
                if (response.isSuccessful) {
                    val ligaList = response.body()?.ligas ?: emptyList()
                    _leagues.value = ligaList.associateBy { it.id }
                    Log.d("LeagueRepository", "Loaded ${ligaList.size} leagues")
                } else {
                    Log.e("LeagueRepository", "Error fetching leagues: ${response.code()}")
                }
            } catch (e: Exception) {
                Log.e("LeagueRepository", "Exception fetching leagues", e)
            }
        }
    }


}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/ligas/data/Liga.kt
================================================
package com.rigobertods.rdscore.features.ligas.data

import com.google.gson.annotations.SerializedName

data class LigaResponse(
    @SerializedName("ligas")
    val ligas: List<Liga>
)

data class Liga(
    @SerializedName("id")
    val id: Int,
    @SerializedName("nombre")
    val nombre: String,
    @SerializedName("pais")
    val pais: String?,
    @SerializedName("logo")
    val logo: String?,
    @SerializedName("bandera")
    val bandera: String?
)



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/partidos/data/CuotaCaliente.kt
================================================
﻿package com.rigobertods.rdscore.features.partidos.data

import com.google.gson.annotations.SerializedName
import java.io.Serializable

// Clase principal para cada "cuota caliente"
data class CuotaCaliente(
    @SerializedName("id")
    val id: Int,

    @SerializedName("liga")
    val liga: String,

    @SerializedName("partido")
    val partido: String,

    @SerializedName("fecha")
    val fecha: String,

    @SerializedName("pick")
    val pick: Oportunidad
) : Serializable

// Clase para cada oportunidad dentro del partido
data class Oportunidad(
    @SerializedName("mercado")
    val mercado: String,

    @SerializedName("prediccion")
    val prediccion: String,

    @SerializedName("prob")
    val prob: Double,

    @SerializedName("cuota")
    val cuota: Double,

    @SerializedName("value")
    val value: Double,

    @SerializedName("score")
    val score: Double
) : Serializable



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/partidos/data/DatosEquipo.kt
================================================
﻿package com.rigobertods.rdscore.features.partidos.data

import com.google.gson.annotations.SerializedName

data class DatosEquipo (
    @SerializedName("partidos")
    val partidosEquipo: List<PartidosEquipo> = listOf(),
    @SerializedName("equipos")
    val equiposLigaEquipo: List<EquiposLiga> = listOf()
)

data class PartidosEquipo(
    @SerializedName("id_liga")
    val idLiga: Int,
    @SerializedName("partidos")
    val partidosLiga: List<Partido>
)

data class EquiposLiga(
    @SerializedName("id_liga")
    val idLiga: Int,
    @SerializedName("equipo")
    val equipo: Equipo,
    @SerializedName("equipos")
    val equiposLiga: List<Equipo>
)



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/partidos/data/Equipo.kt
================================================
﻿package com.rigobertods.rdscore.features.partidos.data

import android.os.Parcelable
import com.google.gson.annotations.SerializedName
import kotlinx.parcelize.Parcelize

@Parcelize
data class Equipo(
    @SerializedName("id")
    val id: Int = 0,

    @SerializedName("nombre")
    val nombre: String = "",

    @SerializedName("logo")
    val logo: String = "",

    @SerializedName("posicion")
    val posicion: Int = 0,

    @SerializedName("puntos")
    val puntos: Int = 0,

    @SerializedName("forma")
    val forma: Double = 0.0,

    @SerializedName("PT")
    val partidosTotales: Int = 0,

    @SerializedName("VT")
    val victoriasTotales: Int = 0,

    @SerializedName("ET")
    val empatesTotales: Int = 0,

    @SerializedName("DT")
    val derrotasTotales: Int = 0,

    @SerializedName("PC")
    val partidosCasa: Int = 0,

    @SerializedName("VC")
    val victoriasCasa: Int = 0,

    @SerializedName("EC")
    val empatesCasa: Int = 0,

    @SerializedName("DC")
    val derrotasCasa: Int = 0,

    @SerializedName("PF")
    val partidosFuera: Int = 0,

    @SerializedName("VF")
    val victoriasFuera: Int = 0,

    @SerializedName("EF")
    val empatesFuera: Int = 0,

    @SerializedName("DF")
    val derrotasFuera: Int = 0,

    @SerializedName("temporada")
    val temporada: String = "",

    @SerializedName("goles_favor")
    val golesFavor: Int = 0,

    @SerializedName("goles_favor_por_partido")
    val golesFavorPorPartido: Double = 0.0,

    @SerializedName("goles_contra")
    val golesContra: Int = 0,

    @SerializedName("goles_contra_por_partido")
    val golesContraPorPartido: Double = 0.0,

    @SerializedName("diferencia_goles")
    val diferenciaGoles: Int = 0,

    @SerializedName("goles_favor_casa")
    val golesFavorCasa: Int = 0,

    @SerializedName("goles_favor_casa_por_partido")
    val golesFavorCasaPorPartido: Double = 0.0,

    @SerializedName("goles_contra_casa")
    val golesContraCasa: Int = 0,

    @SerializedName("goles_contra_casa_por_partido")
    val golesContraCasaPorPartido: Double = 0.0,

    @SerializedName("diferencia_goles_casa")
    val diferenciaGolesCasa: Int = 0,

    @SerializedName("goles_favor_fuera")
    val golesFavorFuera: Int = 0,

    @SerializedName("goles_favor_fuera_por_partido")
    val golesFavorFueraPorPartido: Double = 0.0,

    @SerializedName("goles_contra_fuera")
    val golesContraFuera: Int = 0,

    @SerializedName("goles_contra_fuera_por_partido")
    val golesContraFueraPorPartido: Double = 0.0,

    @SerializedName("diferencia_goles_fuera")
    val diferenciaGolesFuera: Int = 0,

    @SerializedName("ultimos_partidos")
    val ultimosPartidos: String = "",

    @SerializedName("liga")
    val liga: Liga = Liga()
) : Parcelable



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/partidos/data/GamesByDateResponse.kt
================================================
﻿package com.rigobertods.rdscore.features.partidos.data

import com.google.gson.annotations.SerializedName

data class GamesByDateResponse (
    @SerializedName("partidos")
    val partidosList: List<Partido>
)



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/partidos/data/Liga.kt
================================================
﻿package com.rigobertods.rdscore.features.partidos.data

import android.os.Parcelable
import com.google.gson.annotations.SerializedName
import kotlinx.parcelize.Parcelize

@Parcelize
data class Liga(
    @SerializedName("id")
    val id: Int = 0,

    @SerializedName("nombre")
    val nombre: String = "",

    @SerializedName("pais")
    val pais: String = "",

    @SerializedName("bandera")
    val bandera: String = "",

    @SerializedName("logo")
    val logo: String = ""
) : Parcelable



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/partidos/data/Partido.kt
================================================
﻿package com.rigobertods.rdscore.features.partidos.data

import android.os.Parcelable
import com.google.gson.annotations.SerializedName
import kotlinx.parcelize.Parcelize

@Parcelize
data class Partido(
    @SerializedName("id_partido")
    val idPartido: Int,

    @SerializedName("estado")
    val estado: String,

    @SerializedName("id_liga")
    val idLiga: Int,

    @SerializedName("temporada")
    val temporada: Int,

    @SerializedName("jornada")
    val jornada: String,

    @SerializedName("equipo_local")
    val nombreEquipoLocal: String,

    @SerializedName("equipo_visitante")
    val nombreEquipoVisitante: String,

    @SerializedName("estadisticas_local")
    val estadisticasLocal: Equipo,

    @SerializedName("estadisticas_visitante")
    val estadisticasVisitante: Equipo,

    @SerializedName("fecha")
    val fecha: String,

    @SerializedName("hora")
    val hora: String,

    @SerializedName("ciudad")
    val ciudad: String,

    @SerializedName("estadio")
    val estadio: String,

    @SerializedName("arbitro")
    val arbitro: String,

    @SerializedName("cuota_local")
    val cuotaLocal: Double,

    @SerializedName("cuota_empate")
    val cuotaEmpate: Double,

    @SerializedName("cuota_visitante")
    val cuotaVisitante: Double,

    @SerializedName("cuota_over")
    val cuotaOver: Double,

    @SerializedName("cuota_under")
    val cuotaUnder: Double,

    @SerializedName("cuota_btts")
    val cuotaBtts: Double,

    @SerializedName("cuota_btts_no")
    val cuotaBttsNo: Double,

    @SerializedName("goles_local")
    val golesLocal: Int,

    @SerializedName("goles_visitante")
    val golesVisitante: Int,

    @SerializedName("resultado")
    val resultado: Int,

    @SerializedName("ambos_marcan")
    val ambosMarcan: Int,

    @SerializedName("local_marca")
    val localMarca: Int,

    @SerializedName("visitante_marca")
    val visitanteMarca: Int,

    @SerializedName("mas_2_5")
    val mas25: Int,

    @SerializedName("prediccion")
    val prediccion: TipoPrediccion
) : Parcelable



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/partidos/data/PartidosRepository.kt
================================================
﻿package com.rigobertods.rdscore.features.partidos.data

import android.util.Log
import com.rigobertods.rdscore.core.data.dao.PartidoDao
import com.rigobertods.rdscore.core.data.mapEntityToDomain
import com.rigobertods.rdscore.core.data.mapPartidoToEntity
import com.rigobertods.rdscore.core.network.ApiService
import javax.inject.Inject
import javax.inject.Singleton

@Singleton
class PartidosRepository @Inject constructor(
    private val apiService: ApiService,
    private val partidoDao: PartidoDao
) {

    /**
     * Obtiene los partidos de una fecha. 
     * Prioriza los datos en caché para carga instantánea, pero refresca desde la red.
     */
    suspend fun getPartidosPorFecha(fechaString: String): Result<List<Partido>> {
        // 1. Intentar cargar desde caché (una sola vez para el resultado inmediato)
        val cachedPartidos = partidoDao.getPartidosPorFechaOnce(fechaString)
        
        return try {
            // 2. Intentar refrescar desde la red
            val response = apiService.getGamesByDate(fechaString)

            if (response.isSuccessful) {
                val partidos = response.body()?.partidosList ?: emptyList()
                
                // Filtrar equipos no encontrados (negocio)
                val filtrados = partidos.filter { 
                    it.nombreEquipoLocal != "Equipo no encontrado" && 
                    it.nombreEquipoVisitante != "Equipo no encontrado" 
                }
                
                // 3. Guardar en caché
                if (filtrados.isNotEmpty()) {
                    partidoDao.deletePartidosPorFecha(fechaString)
                    partidoDao.insertPartidos(filtrados.map { mapPartidoToEntity(it, fechaString) })
                }
                
                Result.success(filtrados)
            } else {
                // Si la red falla pero tenemos caché, devolvemos el caché
                if (cachedPartidos.isNotEmpty()) {
                    Result.success(cachedPartidos.map { mapEntityToDomain(it) })
                } else {
                    Result.failure(Exception("Error del servidor: ${response.code()}"))
                }
            }
        } catch (e: Exception) {
            Log.e("PartidosRepository", "Error de red, intentando usar caché", e)
            // Si hay error de red pero tenemos caché, devolvemos el caché
            if (cachedPartidos.isNotEmpty()) {
                Result.success(cachedPartidos.map { mapEntityToDomain(it) })
            } else {
                Result.failure(e)
            }
        }
    }

    /**
     * Obtiene un partido por su ID desde la caché local.
     */
    suspend fun getPartidoById(id: Int): Partido? {
        return partidoDao.getPartidoById(id)?.let { mapEntityToDomain(it) }
    }

    /**
     * Obtiene partidos de una fecha SOLO desde la caché local (Room).
     * No hace llamadas de red. Usado para mostrar datos pre-cargados instantáneamente.
     * Devuelve null si no hay datos en caché.
     */
    suspend fun getPartidosPorFechaCached(fechaString: String): List<Partido>? {
        val cached = partidoDao.getPartidosPorFechaOnce(fechaString)
        return if (cached.isNotEmpty()) {
            cached.map { mapEntityToDomain(it) }
        } else {
            null
        }
    }

    /**
     * Cachea una lista de partidos en Room para que puedan ser accedidos por ID.
     * Usado por historial y cuotas calientes que obtienen partidos de otras APIs.
     * 
     * IMPORTANT: We use each partido's own fecha as cacheDate (not a shared key)
     * to ensure partidos remain queryable by their real date. Using a different
     * cacheKey would overwrite the cacheDate and make the partido "disappear"
     * from date-based queries due to Room's REPLACE conflict strategy.
     */
    suspend fun cachePartidos(partidos: List<Partido>) {
        if (partidos.isEmpty()) return
        try {
            // Use each partido's fecha as its cacheDate
            partidoDao.insertPartidos(partidos.map { mapPartidoToEntity(it, it.fecha) })
        } catch (e: Exception) {
            Log.d("PartidosRepository", "Error cacheando partidos: ${e.message}")
        }
    }

    /**
     * Precarga silenciosa de partidos para una fecha.
     * No afecta el estado de UI, solo actualiza la caché.
     * Falla silenciosamente si hay errores de red.
     */
    suspend fun prefetchPartidosPorFecha(fechaString: String) {
        try {
            // Si ya tenemos datos en caché, no hacemos nada
            val cached = partidoDao.getPartidosPorFechaOnce(fechaString)
            if (cached.isNotEmpty()) return

            val response = apiService.getGamesByDate(fechaString)
            if (response.isSuccessful) {
                val partidos = response.body()?.partidosList ?: return
                val filtrados = partidos.filter {
                    it.nombreEquipoLocal != "Equipo no encontrado" &&
                    it.nombreEquipoVisitante != "Equipo no encontrado"
                }
                if (filtrados.isNotEmpty()) {
                    partidoDao.insertPartidos(filtrados.map { mapPartidoToEntity(it, fechaString) })
                }
            }
        } catch (e: Exception) {
            // Prefetch falla silenciosamente
            Log.d("PartidosRepository", "Prefetch silencioso falló para $fechaString: ${e.message}")
        }
    }

    /**
     * Enriquece un partido con datos de la red.
     * Si el partido proviene de un endpoint que no incluye predicciones (ej: datos-equipo),
     * intenta cargar el partido completo desde el endpoint principal por fecha.
     * @param partidoOriginal El partido del cache que puede tener predicciones vacías
     * @return El partido enriquecido con predicciones, o el original si falla
     */
    suspend fun enriquecerPartidoDesdeRed(partidoOriginal: Partido): Partido {
        return try {
            val fecha = partidoOriginal.fecha // Formato: "yyyy-MM-dd"
            val response = apiService.getGamesByDate(fecha)
            
            if (response.isSuccessful) {
                val partidos = response.body()?.partidosList ?: return partidoOriginal
                
                // Buscar el partido por ID en la respuesta
                val partidoCompleto = partidos.find { it.idPartido == partidoOriginal.idPartido }
                
                if (partidoCompleto != null) {
                    // Actualizar el cache con el partido completo
                    partidoDao.insertPartidos(listOf(mapPartidoToEntity(partidoCompleto, fecha)))
                    partidoCompleto
                } else {
                    partidoOriginal
                }
            } else {
                partidoOriginal
            }
        } catch (e: Exception) {
            Log.d("PartidosRepository", "Error enriqueciendo partido: ${e.message}")
            partidoOriginal
        }
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/partidos/data/Prediccion.kt
================================================
﻿package com.rigobertods.rdscore.features.partidos.data

import android.os.Parcelable
import com.google.gson.annotations.SerializedName
import kotlinx.parcelize.Parcelize

// Estructura para el objeto 'recomendacion' que es común en varias predicciones.
@Parcelize
data class Recomendacion(
    @SerializedName("arriesgada")
    val arriesgada: Int,
    @SerializedName("conservadora")
    val conservadora: Int,
    @SerializedName("moderada")
    val moderada: Int
) : Parcelable

// Contenedor principal de la predicción, tal como está en el JSON.
@Parcelize
data class Prediccion(
    @SerializedName("goles_esperados")
    val golesEsperados: GolesEsperados,
    @SerializedName("resultado_1x2")
    val resultado1x2: Resultado1x2,
    @SerializedName("btts")
    val btts: Btts,
    @SerializedName("over25")
    val over25: Over25
) : Parcelable

// Representa el objeto 'goles_esperados'
@Parcelize
data class GolesEsperados(
    @SerializedName("local")
    val local: Double,
    @SerializedName("visitante")
    val visitante: Double
) : Parcelable


// Representa el objeto 'resultado_1x2'
@Parcelize
data class Resultado1x2(
    @SerializedName("prediccion")
    val prediccion: String,
    @SerializedName("probabilidades")
    val probabilidades: Probabilidades,
    @SerializedName("probabilidad_max")
    val probabilidadMax: Double,
    @SerializedName("recomendacion")
    val recomendacion: Recomendacion
) : Parcelable


// Representa el objeto 'probabilidades' dentro de 'resultado_1x2'
@Parcelize
data class Probabilidades(
    @SerializedName("local")
    val local: Double,
    @SerializedName("empate")
    val empate: Double,
    @SerializedName("visitante")
    val visitante: Double
) : Parcelable

// Representa el objeto 'btts' (Ambos equipos marcan)
@Parcelize
data class Btts(
    @SerializedName("prediccion")
    val prediccion: String,
    @SerializedName("probabilidad")
    val probabilidad: Double,
    @SerializedName("recomendacion")
    val recomendacion: Recomendacion
) : Parcelable

// Representa el objeto 'over25' (Más/Menos de 2.5 goles)
@Parcelize
data class Over25(
    @SerializedName("prediccion")
    val prediccion: String,
    @SerializedName("probabilidad")
    val probabilidad: Double,
    @SerializedName("recomendacion")
    val recomendacion: Recomendacion
) : Parcelable



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/partidos/data/Resumen.kt
================================================
﻿package com.rigobertods.rdscore.features.partidos.data

import com.google.gson.annotations.SerializedName

data class Resumen(
    @SerializedName("modelo_arriesgado")
    val modeloArriesgado: ModeloResumen = ModeloResumen(),

    @SerializedName("modelo_conservador")
    val modeloConservador: ModeloResumen = ModeloResumen(),

    @SerializedName("modelo_moderado")
    val modeloModerado: ModeloResumen = ModeloResumen(),

    @SerializedName("modelo_global")
    val modeloGlobal: ModeloResumen = ModeloResumen(),

    @SerializedName("partidos_totales")
    val partidosTotales: Int = 0
)

data class ModeloResumen(
    val aciertos: Double = 0.0,
    @SerializedName("aciertos_brutos")
    val aciertosBrutos: Int = 0,
    val apuestas: Int = 0,
    val beneficio: Double = 0.0,
    val inversion: Double = 0.0,
    val roi: Double = 0.0
)



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/partidos/data/ResumenMercado.kt
================================================
﻿package com.rigobertods.rdscore.features.partidos.data

import com.google.gson.annotations.SerializedName

data class ResumenMercado (
    @SerializedName("resultado")
    val resultado: ModeloResumenMercado = ModeloResumenMercado(),

    @SerializedName("btts")
    val btts: ModeloResumenMercado = ModeloResumenMercado(),

    @SerializedName("over")
    val over: ModeloResumenMercado = ModeloResumenMercado()
)

data class ModeloResumenMercado(
    @SerializedName("agresivo")
    val agresivo: ModeloResumen = ModeloResumen(),

    @SerializedName("moderado")
    val moderado: ModeloResumen = ModeloResumen(),

    @SerializedName("conservador")
    val conservador: ModeloResumen = ModeloResumen()
)



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/partidos/data/StatItem.kt
================================================
﻿package com.rigobertods.rdscore.features.partidos.data

import androidx.annotation.StringRes

data class StatItem(
    @param:StringRes val labelResId: Int,
    val valorLocal: String,
    val valorVisitante: String
)



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/partidos/data/StatItemEquipo.kt
================================================
﻿package com.rigobertods.rdscore.features.partidos.data

import androidx.annotation.StringRes

data class StatItemEquipo(
    @param:StringRes val labelResId: Int,
    val valor: String
)



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/partidos/data/TipoPrediccion.kt
================================================
﻿package com.rigobertods.rdscore.features.partidos.data

import android.os.Parcelable
import kotlinx.parcelize.Parcelize

sealed class TipoPrediccion : Parcelable {
    // Estado 1: La predicción es un objeto detallado
    @Parcelize
    data class Detallada(val datos: Prediccion) : TipoPrediccion()

    // Estado 2: La predicción es un simple mensaje de texto
    @Parcelize
    data class Simple(val mensaje: String) : TipoPrediccion()

    // Estado 3 (Opcional): Para cuando el campo no existe o es nulo
    @Parcelize
    @Suppress("unused", "RedundantSuppression")
    object NoDisponible : TipoPrediccion() {
        private fun readResolve(): Any = NoDisponible
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/partidos/ui/DetallePartidoScreen.kt
================================================
﻿package com.rigobertods.rdscore.features.partidos.ui

import androidx.compose.foundation.layout.Box
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.material3.CircularProgressIndicator
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.Surface
import androidx.compose.material3.Text
import androidx.compose.runtime.Composable
import androidx.compose.runtime.getValue
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.hilt.lifecycle.viewmodel.compose.hiltViewModel
import androidx.lifecycle.compose.collectAsStateWithLifecycle
import com.rigobertods.rdscore.core.common.UiState

@Composable
fun DetallePartidoScreen(
    onNavigateToEquipo: (Int, Int) -> Unit,
    onNavigateBack: () -> Unit,
    viewModel: DetallePartidoViewModel = hiltViewModel()
) {
    val uiState by viewModel.uiState.collectAsStateWithLifecycle()

    Surface(modifier = Modifier.fillMaxSize()) {
        when (val state = uiState) {
            is UiState.Loading -> {
                Box(
                    modifier = Modifier.fillMaxSize(),
                    contentAlignment = Alignment.Center
                ) {
                    CircularProgressIndicator(
                        color = MaterialTheme.colorScheme.onBackground
                    )
                }
            }
            is UiState.Success -> {
                PantallaDetallePartido(
                    partido = state.data,
                    onIconClick = { equipoSeleccionado ->
                        onNavigateToEquipo(equipoSeleccionado.id, equipoSeleccionado.liga.id)
                    },
                    onNavigateBack = onNavigateBack
                )
            }
            is UiState.Error -> {
                Box(
                    modifier = Modifier.fillMaxSize(),
                    contentAlignment = Alignment.Center
                ) {
                    Text(
                        text = state.message,
                        style = MaterialTheme.typography.bodyLarge,
                        color = MaterialTheme.colorScheme.error
                    )
                }
            }
        }
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/partidos/ui/DetallePartidoViewModel.kt
================================================
﻿package com.rigobertods.rdscore.features.partidos.ui

import androidx.lifecycle.SavedStateHandle
import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import com.rigobertods.rdscore.features.partidos.data.Partido
import com.rigobertods.rdscore.features.partidos.data.PartidosRepository
import com.rigobertods.rdscore.core.common.UiState
import dagger.hilt.android.lifecycle.HiltViewModel
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.StateFlow
import kotlinx.coroutines.flow.asStateFlow
import kotlinx.coroutines.launch
import javax.inject.Inject

@HiltViewModel
class DetallePartidoViewModel @Inject constructor(
    private val repository: PartidosRepository,
    savedStateHandle: SavedStateHandle
) : ViewModel() {

    private val partidoId: Int = savedStateHandle["partidoId"] ?: 0

    private val _uiState = MutableStateFlow<UiState<Partido>>(UiState.Loading())
    val uiState: StateFlow<UiState<Partido>> = _uiState.asStateFlow()

    init {
        cargarPartido()
    }

    private fun cargarPartido() {
        if (partidoId == 0) {
            _uiState.value = UiState.Error("ID de partido inválido")
            return
        }

        viewModelScope.launch {
            _uiState.value = UiState.Loading()
            
            val partidoFromCache = repository.getPartidoById(partidoId)

            if (partidoFromCache != null) {
                // Solo enriquecer si el partido NO ha finalizado
                // Para partidos pasados, el resultado es lo importante, no la predicción
                val partidoFinal = if (partidoFromCache.estado == "FT") {
                    // Partido finalizado: mostrar directamente
                    partidoFromCache
                } else {
                    // Partido futuro: intentar enriquecer con predicciones
                    repository.enriquecerPartidoDesdeRed(partidoFromCache)
                }
                _uiState.value = UiState.Success(partidoFinal)
            } else {
                _uiState.value = UiState.Error("No se encontró el partido en caché")
            }
        }
    }

}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/partidos/ui/MainScreen.kt
================================================
﻿package com.rigobertods.rdscore.features.partidos.ui

import androidx.compose.material3.SnackbarHostState
import androidx.compose.runtime.Composable
import androidx.compose.runtime.LaunchedEffect
import androidx.compose.runtime.getValue
import androidx.compose.runtime.remember
import androidx.hilt.lifecycle.viewmodel.compose.hiltViewModel
import androidx.lifecycle.compose.collectAsStateWithLifecycle
import com.rigobertods.rdscore.features.partidos.data.Partido
import com.rigobertods.rdscore.core.common.LanguageInfo
import com.rigobertods.rdscore.core.common.UiState

@Composable
fun MainScreen(
    isDarkTheme: Boolean,
    onToggleTheme: () -> Unit,
    onNavigateToDetalle: (Partido) -> Unit,
    onNavigateToPerfil: () -> Unit,
    onNavigateToResumen: () -> Unit,
    onNavigateToCuotas: () -> Unit,
    currentLanguage: String = "es",
    supportedLanguages: List<LanguageInfo> = emptyList(),
    onLanguageChange: (String) -> Unit = {},
    viewModel: MainViewModel = hiltViewModel()
) {
    val uiState by viewModel.uiState.collectAsStateWithLifecycle()
    val leagues by viewModel.leagues.collectAsStateWithLifecycle()
    
    val partidosMap = uiState.data ?: emptyMap()
    val isLoading = uiState is UiState.Loading
    val error = (uiState as? UiState.Error)?.message

    val snackbarHostState = remember { SnackbarHostState() }

    LaunchedEffect(error) {
        error?.let {
            snackbarHostState.showSnackbar(it)
            viewModel.clearError()
        }
    }

    PantallaMain(
        snackbarHostState = snackbarHostState,
        partidosMap = partidosMap,
        leagues = leagues,
        isLoadingGlobal = isLoading,
        onResumenClick = onNavigateToResumen,
        onCuotasCalientesClick = onNavigateToCuotas,
        onPerfilClick = onNavigateToPerfil,
        onPartidoClick = onNavigateToDetalle,
        onFetchMatches = { fecha ->
            viewModel.obtenerPartidosDeLaFecha(fecha)
        },
        onToggleTheme = onToggleTheme,
        isDarkTheme = isDarkTheme,
        currentLanguage = currentLanguage,
        supportedLanguages = supportedLanguages,
        onLanguageChange = onLanguageChange
    )
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/partidos/ui/MainViewModel.kt
================================================
﻿package com.rigobertods.rdscore.features.partidos.ui

import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import com.rigobertods.rdscore.features.partidos.data.Partido
import com.rigobertods.rdscore.features.partidos.data.PartidosRepository
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.delay
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.StateFlow
import kotlinx.coroutines.flow.asStateFlow
import kotlinx.coroutines.launch
import java.time.LocalDate
import java.time.format.DateTimeFormatter
import com.rigobertods.rdscore.core.common.UiState
import dagger.hilt.android.lifecycle.HiltViewModel
import javax.inject.Inject

import com.rigobertods.rdscore.features.ligas.data.LeagueRepository
import com.rigobertods.rdscore.features.ligas.data.Liga

@HiltViewModel
class MainViewModel @Inject constructor(
    private val repository: PartidosRepository,
    leagueRepository: LeagueRepository
) : ViewModel() {

    private val backendFormatter = DateTimeFormatter.ofPattern("yyyy-MM-dd")

    private val _uiState = MutableStateFlow<UiState<Map<LocalDate, List<Partido>>>>(UiState.Success(emptyMap()))
    val uiState: StateFlow<UiState<Map<LocalDate, List<Partido>>>> = _uiState.asStateFlow()
    
    val leagues: StateFlow<Map<Int, Liga>> = leagueRepository.leagues

    fun obtenerPartidosDeLaFecha(fecha: LocalDate) {
        val currentData = _uiState.value.data ?: emptyMap()
        
        // If already loaded in memory for this date, skip
        if (currentData.containsKey(fecha)) return

        viewModelScope.launch {
            val fechaStringParaApi = fecha.format(backendFormatter)
            
            // 1. Intentar cargar desde caché para respuesta instantánea
            val cachedResult = repository.getPartidosPorFechaCached(fechaStringParaApi)
            
            if (!cachedResult.isNullOrEmpty()) {
                val latestData = _uiState.value.data ?: emptyMap()
                val newData = latestData + (fecha to cachedResult)
                _uiState.value = UiState.Success(newData)
                
                // 2. Refrescar en background para obtener predicciones/resultados actualizados
                refreshPartidosInBackground(fecha, fechaStringParaApi)
                prefetchFechasAdyacentes(fecha)
            } else {
                // 3. Si no hay caché, carga normal con Loading
                val latestBeforeLoad = _uiState.value.data ?: emptyMap()
                _uiState.value = UiState.Loading(latestBeforeLoad)
                
                realizarCargaDesdeRed(fecha, fechaStringParaApi)
            }
        }
    }

    private fun refreshPartidosInBackground(fecha: LocalDate, fechaString: String) {
        viewModelScope.launch(Dispatchers.IO) {
            repository.getPartidosPorFecha(fechaString)
                .onSuccess { partidos ->
                    val latestData = _uiState.value.data ?: emptyMap()
                    val newData = latestData + (fecha to partidos)
                    _uiState.value = UiState.Success(newData)
                }
                // Falla silenciosa en background
        }
    }

    private suspend fun realizarCargaDesdeRed(fecha: LocalDate, fechaString: String) {
        repository.getPartidosPorFecha(fechaString)
            .onSuccess { partidos ->
                val latestData = _uiState.value.data ?: emptyMap()
                val newData = latestData + (fecha to partidos)
                _uiState.value = UiState.Success(newData)
                prefetchFechasAdyacentes(fecha)
            }
            .onFailure { exception ->
                val mensajeError = when (exception) {
                    is java.io.IOException -> "Error de conexión: ${exception.message}"
                    else -> "Ocurrió un error: ${exception.message}"
                }
                val latestData = _uiState.value.data ?: emptyMap()
                _uiState.value = UiState.Error(mensajeError, latestData)
            }
    }

    /**
     * Precarga silenciosa de los días anterior y siguiente.
     * Se ejecuta después de cargar exitosamente la fecha actual.
     */
    private fun prefetchFechasAdyacentes(fecha: LocalDate) {
        viewModelScope.launch(Dispatchers.IO) {
            // Esperar a que la UI se estabilice
            delay(500)
            
            val currentData = _uiState.value.data ?: emptyMap()
            val fechasAPrefetch = listOf(
                fecha.minusDays(1),
                fecha.plusDays(1)
            )
            
            fechasAPrefetch.forEach { f ->
                if (!currentData.containsKey(f)) {
                    repository.prefetchPartidosPorFecha(f.format(backendFormatter))
                }
            }
        }
    }

    fun clearError() {
        val currentData = _uiState.value.data ?: emptyMap()
        // Reset to Success clearing the error
        _uiState.value = UiState.Success(currentData)
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/partidos/ui/PantallaDetallePartido.kt
================================================
﻿package com.rigobertods.rdscore.features.partidos.ui

import androidx.compose.foundation.layout.Arrangement
import androidx.compose.foundation.layout.Box
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.Row
import androidx.compose.foundation.layout.Spacer
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.height
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.layout.size
import androidx.compose.foundation.layout.width
import androidx.compose.foundation.pager.HorizontalPager
import androidx.compose.foundation.pager.rememberPagerState
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.automirrored.filled.ArrowBack
import androidx.compose.material3.ExperimentalMaterial3Api
import androidx.compose.material3.Icon
import androidx.compose.material3.IconButton
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.Scaffold
import androidx.compose.material3.Tab
import androidx.compose.material3.PrimaryTabRow
import androidx.compose.material3.TabRowDefaults
import androidx.compose.material3.Text
import androidx.compose.material3.TopAppBar
import androidx.compose.material3.TopAppBarDefaults
import androidx.compose.runtime.Composable
import androidx.compose.runtime.rememberCoroutineScope
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.res.painterResource
import androidx.compose.ui.res.stringResource
import androidx.compose.ui.text.font.FontWeight
import androidx.compose.ui.unit.dp
import androidx.compose.ui.unit.sp
import coil.compose.AsyncImage
import com.rigobertods.rdscore.R
import com.rigobertods.rdscore.features.partidos.data.Equipo
import com.rigobertods.rdscore.features.partidos.data.Partido
import com.rigobertods.rdscore.ui.components.ContenidoEstadisticas
import com.rigobertods.rdscore.ui.components.ContenidoInformacion
import com.rigobertods.rdscore.ui.components.ContenidoRecomendaciones
import com.rigobertods.rdscore.ui.components.EquipoLogoYNombre
import kotlinx.coroutines.launch

@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun PantallaDetallePartido(
    partido: Partido,
    onIconClick: (Equipo) -> Unit = {},
    onNavigateBack: () -> Unit = {}
) {
    val tabTitles = listOf(
        stringResource(R.string.tab_predictions),
        stringResource(R.string.tab_statistics),
        stringResource(R.string.tab_info)
    )
    val pagerState = rememberPagerState { tabTitles.size }
    val coroutineScope = rememberCoroutineScope()

    val logoLocal = partido.estadisticasLocal.logo
    val logoVisitante = partido.estadisticasVisitante.logo

    Scaffold(
        topBar = {
            TopAppBar(
                title = {
                    Icon(
                        painter = painterResource(id = R.mipmap.ic_launcher),
                        contentDescription = stringResource(R.string.cd_logo),
                        modifier = Modifier.size(40.dp),
                        tint = Color.Unspecified
                    )
                },
                navigationIcon = {
                    IconButton(onClick = onNavigateBack) {
                        Icon(
                            imageVector = Icons.AutoMirrored.Filled.ArrowBack,
                            contentDescription = stringResource(R.string.cd_back),
                            tint = Color.White
                        )
                    }
                },
                colors = TopAppBarDefaults.topAppBarColors(containerColor = Color.Black)
            )
        }
    ) { paddingValues ->
        Box(
            modifier = Modifier
                .fillMaxSize()
                .padding(paddingValues)
        ) {
            Column(
                modifier = Modifier
                    .fillMaxSize()
                    .padding(horizontal = 16.dp)
            ) {
                // ------------------ TÍTULO DE LA LIGA --------------------
                Spacer(Modifier.height(8.dp))
                Row(
                    modifier = Modifier.align(Alignment.CenterHorizontally)
                ) {
                    AsyncImage(
                        model = partido.estadisticasLocal.liga.logo,
                        contentDescription = partido.estadisticasLocal.liga.nombre,
                        modifier = Modifier
                            .size(45.dp)
                    )
                    Spacer(Modifier.width(8.dp))
                    Text(
                        text = partido.estadisticasLocal.liga.nombre,
                        fontSize = 24.sp,
                        fontWeight = FontWeight.Bold,
                        modifier = Modifier.align(Alignment.CenterVertically)
                    )
                }
                // ------------------ FECHA Y HORA -------------------------
                Row(
                    modifier = Modifier.align(Alignment.CenterHorizontally),
                    horizontalArrangement = Arrangement.SpaceBetween
                ) {
                    Text(
                        text = "${partido.fecha} - ${partido.hora}",
                        style = MaterialTheme.typography.bodyMedium,
                        modifier = Modifier.align(Alignment.CenterVertically)
                    )
                }
                Spacer(Modifier.height(16.dp))
                // ------------------ ESCUDOS + NOMBRES --------------------
                Row(
                    modifier = Modifier.fillMaxWidth(),
                    horizontalArrangement = Arrangement.SpaceEvenly
                ) {
                    EquipoLogoYNombre(
                        url = logoLocal,
                        nombre = partido.nombreEquipoLocal,
                        onIconClick = {onIconClick(partido.estadisticasLocal)}
                    )
                    Text(
                        "VS",
                        style = MaterialTheme.typography.titleLarge,
                        modifier = Modifier.align(Alignment.CenterVertically)
                    )
                    EquipoLogoYNombre(
                        url = logoVisitante,
                        nombre = partido.nombreEquipoVisitante,
                        onIconClick = {onIconClick(partido.estadisticasVisitante)}
                    )
                }
                Spacer(Modifier.height(20.dp))
                // ------------------ PESTAÑAS DE INFORMACIÓN --------------------
                PrimaryTabRow(
                    selectedTabIndex = pagerState.currentPage,
                    contentColor = MaterialTheme.colorScheme.onBackground,
                    indicator = {
                        TabRowDefaults.SecondaryIndicator(
                            modifier = Modifier.tabIndicatorOffset(pagerState.currentPage),
                            height = 3.dp,
                            color = MaterialTheme.colorScheme.onBackground
                        )
                    }
                ) {
                    tabTitles.forEachIndexed { index, title ->
                        Tab(
                            selected = pagerState.currentPage == index,
                            onClick = {
                                coroutineScope.launch {
                                    pagerState.animateScrollToPage(index)
                                }
                            },
                            text = {
                                Text(
                                    text = title,
                                    style = MaterialTheme.typography.bodyMedium
                                )
                            }
                        )
                    }
                }
                HorizontalPager(
                    state = pagerState,
                    modifier = Modifier
                        .fillMaxWidth()
                        .weight(1f)
                ) { page ->
                    when (page) {
                        0 -> ContenidoRecomendaciones(partido = partido)
                        1 -> ContenidoEstadisticas(partido = partido)
                        2 -> ContenidoInformacion(partido = partido)
                    }
                }
            }
        }
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/partidos/ui/PantallaMain.kt
================================================
﻿package com.rigobertods.rdscore.features.partidos.ui

import androidx.compose.foundation.layout.Box
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.layout.size
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.filled.DarkMode
import androidx.compose.material.icons.filled.Info
import androidx.compose.material.icons.filled.LightMode
import androidx.compose.material.icons.filled.Person
import androidx.compose.material3.ExperimentalMaterial3Api
import androidx.compose.material3.Icon
import androidx.compose.material3.IconButton
import androidx.compose.material3.Scaffold
import androidx.compose.material3.SnackbarHost
import androidx.compose.material3.SnackbarHostState
import androidx.compose.material3.Text
import androidx.compose.material3.TopAppBar
import androidx.compose.material3.TopAppBarDefaults
import androidx.compose.runtime.Composable
import androidx.compose.runtime.mutableStateOf
import androidx.compose.runtime.remember
import androidx.compose.ui.Modifier
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.res.painterResource
import androidx.compose.ui.res.stringResource
import androidx.compose.ui.unit.dp
import androidx.compose.ui.unit.sp
import com.rigobertods.rdscore.R
import com.rigobertods.rdscore.core.common.LanguageInfo
import com.rigobertods.rdscore.features.partidos.data.Partido
import com.rigobertods.rdscore.ui.components.InfoDialog
import com.rigobertods.rdscore.ui.components.LanguageSelectorDialog
import kotlinx.coroutines.delay
import kotlinx.coroutines.launch
import java.time.LocalDate

import com.rigobertods.rdscore.features.ligas.data.Liga

@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun PantallaMain(
    snackbarHostState: SnackbarHostState,
    partidosMap: Map<LocalDate, List<Partido>>,
    leagues: Map<Int, Liga>,
    isLoadingGlobal: Boolean,
    onResumenClick: () -> Unit,
    onCuotasCalientesClick: () -> Unit,
    onPerfilClick: () -> Unit,
    onPartidoClick: (Partido) -> Unit,
    onFetchMatches: (LocalDate) -> Unit,
    onToggleTheme: () -> Unit,
    isDarkTheme: Boolean,
    currentLanguage: String = "es",
    supportedLanguages: List<LanguageInfo> = emptyList(),
    onLanguageChange: (String) -> Unit = {}
) {
    val showInfo = remember { mutableStateOf(false) }
    val showLanguageSelector = remember { mutableStateOf(false) }

    val coroutineScope = androidx.compose.runtime.rememberCoroutineScope()

    Scaffold(
        topBar = {
            TopAppBar(
                title = {
                    Icon(
                        painter = painterResource(id = R.mipmap.ic_launcher),
                        contentDescription = stringResource(R.string.cd_logo),
                        modifier = Modifier.size(40.dp),
                        tint = Color.Unspecified
                    )
                },
                actions = {
                    IconButton(onClick = { showLanguageSelector.value = true }) {
                        Text(
                            text = when (currentLanguage) {
                                "es" -> "🇪🇸"
                                "en" -> "🇬🇧"
                                "de" -> "🇩🇪"
                                "fr" -> "🇫🇷"
                                "it" -> "🇮🇹"
                                else -> "🌍"
                            },
                            fontSize = 24.sp
                        )
                    }
                    IconButton(onClick = { showInfo.value = true }) {
                        Icon(
                            imageVector = Icons.Filled.Info,
                            contentDescription = stringResource(R.string.cd_info),
                            tint = Color.White
                        )
                    }
                    IconButton(onClick = onToggleTheme) {
                        Icon(
                            imageVector = if (isDarkTheme) Icons.Default.LightMode else Icons.Default.DarkMode,
                            contentDescription = stringResource(R.string.cd_change_theme),
                            tint = Color.White
                        )
                    }
                    IconButton(onClick = onPerfilClick) {
                        Icon(
                            imageVector = Icons.Filled.Person,
                            contentDescription = stringResource(R.string.cd_profile),
                            tint = Color.White
                        )
                    }
                },
                colors = TopAppBarDefaults.topAppBarColors(containerColor = Color.Black)
            )
        },
        snackbarHost = { SnackbarHost(snackbarHostState) }
    ) { paddingValues ->
        Box(modifier = Modifier.padding(paddingValues)) {
            PantallaPrincipalPartidos(
                partidosMap = partidosMap,
                leagues = leagues,
                isLoadingGlobal = isLoadingGlobal,
                onResumenClick = onResumenClick,
                onCuotasCalientesClick = onCuotasCalientesClick,
                onFetchMatches = onFetchMatches,
                onPartidoClick = onPartidoClick
            )
        }
        if (showInfo.value) {
            InfoDialog (
                show = showInfo.value,
                onDismiss = { showInfo.value = false }
            )
        }
        if (showLanguageSelector.value && supportedLanguages.isNotEmpty()) {
            LanguageSelectorDialog(
                currentLanguage = currentLanguage,
                languages = supportedLanguages,
                onLanguageSelected = { newLanguage ->
                    // First dismiss the dialog
                    showLanguageSelector.value = false
                    // Wait for dismissal animation to finish before recreating activity
                    // This prevents keyboard focus issues
                    coroutineScope.launch {
                        delay(300)
                        onLanguageChange(newLanguage)
                    }
                },
                onDismiss = { showLanguageSelector.value = false }
            )
        }
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/partidos/ui/PantallaPrincipalPartidos.kt
================================================
﻿package com.rigobertods.rdscore.features.partidos.ui

import androidx.compose.foundation.ExperimentalFoundationApi
import androidx.compose.foundation.background
import androidx.compose.foundation.clickable
import androidx.compose.foundation.layout.Box
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.Row
import androidx.compose.foundation.layout.Spacer
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.layout.width
import androidx.compose.foundation.pager.HorizontalPager
import androidx.compose.foundation.pager.rememberPagerState
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.filled.ChevronRight
import androidx.compose.material.icons.filled.QueryStats
import androidx.compose.material.icons.filled.Whatshot
import androidx.compose.material3.Card
import androidx.compose.material3.CircularProgressIndicator
import androidx.compose.material3.DatePicker
import androidx.compose.material3.DatePickerDialog
import androidx.compose.material3.ExperimentalMaterial3Api
import androidx.compose.material3.Icon
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.Scaffold
import androidx.compose.material3.Text
import androidx.compose.material3.TextButton
import androidx.compose.material3.rememberDatePickerState
import androidx.compose.runtime.Composable
import androidx.compose.runtime.derivedStateOf
import androidx.compose.runtime.getValue
import androidx.compose.runtime.mutableIntStateOf
import androidx.compose.runtime.mutableStateOf
import androidx.compose.runtime.remember
import androidx.compose.runtime.rememberCoroutineScope
import androidx.compose.runtime.saveable.rememberSaveable
import androidx.compose.runtime.setValue
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.unit.dp
import androidx.compose.ui.unit.sp
import com.rigobertods.rdscore.features.partidos.data.Partido
import com.rigobertods.rdscore.ui.components.BarraNavegacionFechas
import com.rigobertods.rdscore.ui.components.DialogoFiltros
import com.rigobertods.rdscore.ui.components.FiltroState
import com.rigobertods.rdscore.ui.components.PaginaDePartidos
import com.rigobertods.rdscore.core.ui.Naranja
import kotlinx.coroutines.launch
import java.time.Instant
import java.time.LocalDate
import java.time.ZoneId
import java.time.temporal.ChronoUnit
import androidx.compose.ui.res.stringResource
import com.rigobertods.rdscore.R

import com.rigobertods.rdscore.features.ligas.data.Liga

@OptIn(ExperimentalMaterial3Api::class, ExperimentalFoundationApi::class)
@Composable
fun PantallaPrincipalPartidos(
    partidosMap: Map<LocalDate, List<Partido>>,
    leagues: Map<Int, Liga>,
    isLoadingGlobal: Boolean,
    onResumenClick: () -> Unit,
    onCuotasCalientesClick: () -> Unit,
    onFetchMatches: (fecha: LocalDate) -> Unit,
    onPartidoClick: (Partido) -> Unit
) {
    val initialPage = 5000
    val pageCount = 10000

    val pagerState = rememberPagerState(
        initialPage = initialPage,
        pageCount = { pageCount }
    )

    val fechaBase = remember { LocalDate.now() }

    // Fecha basada en la página actual
    val fechaSeleccionada by remember {
        derivedStateOf {
            fechaBase.plusDays((pagerState.currentPage - initialPage).toLong())
        }
    }

    val coroutineScope = rememberCoroutineScope()

    // Estado global de carga: true = bloquea toda la pantalla
    // Ya no usamos estaCargandoGlobal interno, usamos el parámetro isLoadingGlobal
    var mostrarDatePicker by remember { mutableStateOf(false) }
    var filtros by rememberSaveable { mutableStateOf(FiltroState()) }
    var mostrarDialogoFiltros by remember { mutableStateOf(false) }
    var ligasExpandidas by rememberSaveable { mutableStateOf<Set<Int>>(emptySet()) }
    var tabSeleccionadaGlobal by rememberSaveable { mutableIntStateOf(0) }

    // Overlay de carga que cubre toda la pantalla
    Box(modifier = Modifier.fillMaxSize()) {
        Scaffold(
            topBar = {
                Column {
                    /*
                    AQUI PUEDO AGREGAR UN BANNER DE NOTICIAS
                    BannerAviso(
                        titulo = stringResource(R.string.banner_result_disabled_title),
                        texto = stringResource(R.string.banner_result_disabled_text)
                    )*/
                    Card(
                        modifier = Modifier
                            .fillMaxWidth()
                            .padding(start = 8.dp, end = 8.dp, top = 8.dp, bottom = 4.dp)
                    ) {
                        Row(
                            modifier = Modifier
                                .clickable { onResumenClick() }
                                .padding(start = 16.dp, end = 16.dp, top = 12.dp, bottom = 12.dp),
                            verticalAlignment = Alignment.CenterVertically
                        ) {
                            Icon(
                                imageVector = Icons.Default.QueryStats,
                                contentDescription = stringResource(R.string.cd_summary_icon),
                                tint = MaterialTheme.colorScheme.onBackground
                            )
                            Spacer(Modifier.width(12.dp))
                            Text(
                                stringResource(R.string.view_model_stats),
                                fontSize = 16.sp,
                                color = MaterialTheme.colorScheme.onBackground,
                                modifier = Modifier.weight(1f)
                            )
                            Icon(
                                imageVector = Icons.Default.ChevronRight,
                                contentDescription = stringResource(R.string.nav_summary)
                            )
                        }
                    }

                    Card(
                        modifier = Modifier
                            .fillMaxWidth()
                            .padding(start = 8.dp, end = 8.dp, top = 8.dp, bottom = 4.dp),
                    ) {
                        Row(
                            modifier = Modifier
                                .clickable { onCuotasCalientesClick() }
                                .padding(start = 16.dp, end = 16.dp, top = 12.dp, bottom = 12.dp),
                            verticalAlignment = Alignment.CenterVertically
                        ) {
                            Icon(
                                imageVector = Icons.Default.Whatshot,
                                contentDescription = stringResource(R.string.cd_hot_odds_icon),
                                tint = Naranja
                            )
                            Spacer(Modifier.width(12.dp))
                            Text(
                                stringResource(R.string.hot_odds_button),
                                fontSize = 16.sp,
                                color = MaterialTheme.colorScheme.onBackground,
                                modifier = Modifier.weight(1f)
                            )
                            Icon(
                                imageVector = Icons.Default.ChevronRight,
                                contentDescription = stringResource(R.string.hot_odds)
                            )
                        }
                    }

                    // 3. La BarraNavegacionFechas va después, dentro de la misma Column.
                    BarraNavegacionFechas(
                        fecha = fechaSeleccionada,
                        enabled = !isLoadingGlobal || pagerState.isScrollInProgress,
                        onFechaAnterior = {
                            coroutineScope.launch {
                                pagerState.animateScrollToPage(pagerState.currentPage - 1)
                            }
                        },
                        onFechaSiguiente = {
                            coroutineScope.launch {
                                pagerState.animateScrollToPage(pagerState.currentPage + 1)
                            }
                        },
                        onCalendarioClick = { if (!isLoadingGlobal) mostrarDatePicker = true },
                        onFiltroClick = { if (!isLoadingGlobal) mostrarDialogoFiltros = true }
                    )
                }
            }
        ) { paddingValues ->
            HorizontalPager(
                state = pagerState,
                modifier = Modifier
                    .padding(paddingValues)
                    .fillMaxSize(),
                userScrollEnabled = !isLoadingGlobal || pagerState.isScrollInProgress
            ) { page ->
                val fechaPagina = fechaBase.plusDays((page - initialPage).toLong())
                
                PaginaDePartidos(
                    filtrosActivos = filtros,
                    fecha = fechaPagina,
                    partidos = partidosMap[fechaPagina] ?: emptyList(),
                    leagues = leagues,
                    isMatchesLoaded = partidosMap.containsKey(fechaPagina),
                    onFetchMatches = onFetchMatches,
                    onPartidoClick = onPartidoClick,
                    ligasExpandidas = ligasExpandidas,
                    onLigaToggle = { idLiga ->
                        ligasExpandidas = if (ligasExpandidas.contains(idLiga)) {
                            ligasExpandidas - idLiga
                        } else {
                            ligasExpandidas + idLiga
                        }
                    },
                    tabSeleccionada = tabSeleccionadaGlobal,
                    onTabSelected = { tabSeleccionadaGlobal = it }
                )
            }
        }

        // OVERLAY DE CARGA GLOBAL: Solo se muestra si está cargando Y el swipe ha terminado.

        if (isLoadingGlobal && !pagerState.isScrollInProgress) {
            Box(
                modifier = Modifier
                    .fillMaxSize()
                    .background(MaterialTheme.colorScheme.background.copy(alpha = 0.7f))
                    .clickable(enabled = false) {} // bloquea cualquier toque
                ,
                contentAlignment = Alignment.Center
            ) {
                CircularProgressIndicator(
                    color = MaterialTheme.colorScheme.onBackground,
                    strokeWidth = 5.dp
                )
            }
        }

        // DatePicker y diálogo de filtros
        if (mostrarDatePicker) {
            val zoneId = ZoneId.systemDefault()
            val initialMillis = fechaSeleccionada.atTime(12, 0).atZone(zoneId).toInstant().toEpochMilli()
            val datePickerState = rememberDatePickerState(initialSelectedDateMillis = initialMillis)

            DatePickerDialog(
                onDismissRequest = { mostrarDatePicker = false },
                confirmButton = {
                    TextButton(onClick = {
                        mostrarDatePicker = false
                        datePickerState.selectedDateMillis?.let { millis ->
                            val nuevaFecha = Instant.ofEpochMilli(millis).atZone(zoneId).toLocalDate()
                            val diasDiff = ChronoUnit.DAYS.between(fechaBase, nuevaFecha)
                            val paginaObjetivo = (initialPage + diasDiff).toInt()
                            coroutineScope.launch {
                                pagerState.animateScrollToPage(paginaObjetivo)
                            }
                        }
                    }) { Text(stringResource(R.string.ok), color = MaterialTheme.colorScheme.onBackground) }
                },
                dismissButton = {
                    TextButton(onClick = { mostrarDatePicker = false }) { Text(stringResource(R.string.cancel), color = MaterialTheme.colorScheme.onBackground) }
                }
            ) {
                DatePicker(state = datePickerState)
            }
        }

        if (mostrarDialogoFiltros) {
            DialogoFiltros(
                filtroState = filtros,
                onDismiss = { mostrarDialogoFiltros = false },
                onAplicarFiltros = { nuevosFiltros ->
                    filtros = nuevosFiltros
                    mostrarDialogoFiltros = false
                }
            )
        }
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/partidos/util/PredictionHelper.kt
================================================
package com.rigobertods.rdscore.features.partidos.util

import com.rigobertods.rdscore.features.partidos.data.Partido
import com.rigobertods.rdscore.features.partidos.data.TipoPrediccion

object PredictionHelper {

    /**
     * Verifica si una predicción fue acertada basándose en el resultado real del partido.
     * @param partido El partido con resultado final (estado "FT")
     * @param mercado 0 para Resultado 1x2, 1 para BTTS, 2 para Over 2.5
     * @return true si acertó, false si falló, null si no hay datos suficientes
     */
    fun verificarAcierto(partido: Partido, mercado: Int): Boolean? {
        if (partido.estado != "FT") return null
        
        val prediccionDetallada = (partido.prediccion as? TipoPrediccion.Detallada)?.datos ?: return null

        return when (mercado) {
            0 -> { // Resultado 1x2
                val pred = prediccionDetallada.resultado1x2.prediccion // "Local", "Empate", "Visitante"
                val real = partido.resultado // 1: Local, 0: Empate, 2: Visitante
                
                when (pred) {
                    "Local" -> real == 1
                    "Empate" -> real == 0
                    "Visitante" -> real == 2
                    else -> null
                }
            }
            1 -> { // BTTS
                val pred = prediccionDetallada.btts.prediccion // "Sí" o "No"
                val real = partido.golesLocal > 0 && partido.golesVisitante > 0
                
                if (pred == "Sí") real else if (pred == "No") !real else null
            }
            2 -> { // Over 2.5
                val pred = prediccionDetallada.over25.prediccion // "Over" o "Under"
                val real = (partido.golesLocal + partido.golesVisitante) > 2
                
                if (pred == "Over") real else if (pred == "Under") !real else null
            }
            else -> null
        }
    }

    /**
     * Verifica si una predicción fue recomendada por el modelo (tiene valor).
     */
    fun esRecomendada(partido: Partido, mercado: Int): Boolean {
        val prediccionDetallada = (partido.prediccion as? TipoPrediccion.Detallada)?.datos ?: return false
        
        val recomendacion = when (mercado) {
            0 -> prediccionDetallada.resultado1x2.recomendacion
            1 -> prediccionDetallada.btts.recomendacion
            2 -> prediccionDetallada.over25.recomendacion
            else -> return false
        }
        
        return recomendacion.conservadora == 1 || recomendacion.moderada == 1 || recomendacion.arriesgada == 1
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/perfil/data/DeleteAccountResponse.kt
================================================
﻿package com.rigobertods.rdscore.features.perfil.data

import com.google.gson.annotations.SerializedName

data class DeleteAccountResponse (
    @SerializedName("mensaje")
    val mensaje: String,
    @SerializedName("success_code")
    val successCode: String? = null
)



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/perfil/data/EditPasswordRequest.kt
================================================
﻿package com.rigobertods.rdscore.features.perfil.data

import com.google.gson.annotations.SerializedName

data class EditPasswordRequest (
    @SerializedName("current_password")
    val oldPassword: String,
    @SerializedName("new_password")
    val newPassword: String,
)



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/perfil/data/EditPasswordResponse.kt
================================================
﻿package com.rigobertods.rdscore.features.perfil.data

import com.google.gson.annotations.SerializedName

data class EditPasswordResponse (
    @SerializedName("mensaje")
    val mensaje: String,
    @SerializedName("success_code")
    val successCode: String? = null
)



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/perfil/data/EditProfileRequest.kt
================================================
﻿package com.rigobertods.rdscore.features.perfil.data

data class EditProfileRequest (
    val username: String,
    val email: String,
)



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/perfil/data/EditProfileResponse.kt
================================================
﻿package com.rigobertods.rdscore.features.perfil.data

import com.google.gson.annotations.SerializedName

data class EditProfileResponse (
    val id: Int,
    val username: String,
    val email: String,
    @SerializedName("created_at")
    val createdAt: String,
    @SerializedName("mensaje")
    val message: String? = null,
    @SerializedName("success_code")
    val successCode: String? = null
)



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/perfil/data/GetProfileResponse.kt
================================================
﻿package com.rigobertods.rdscore.features.perfil.data

import com.google.gson.annotations.SerializedName

data class GetProfileResponse (
    val id: Int,
    val username: String,
    val email: String,
    @SerializedName("created_at")
    val createdAt: String,
    @SerializedName("mensaje")
    val message: String? = null,
    @SerializedName("success_code")
    val successCode: String? = null
)



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/perfil/data/UserRepository.kt
================================================
﻿package com.rigobertods.rdscore.features.perfil.data

import com.rigobertods.rdscore.core.network.ApiService
import com.rigobertods.rdscore.core.network.NetworkUtils
import javax.inject.Inject

class UserRepository @Inject constructor(private val apiService: ApiService) {

    suspend fun getProfile(): Result<GetProfileResponse> {
        return NetworkUtils.safeApiCall { apiService.getProfile() }
    }

    suspend fun deleteAccount(): Result<DeleteAccountResponse> {
        return NetworkUtils.safeApiCall { apiService.deleteAccount() }
    }

    suspend fun editProfile(request: EditProfileRequest): Result<EditProfileResponse> {
        return NetworkUtils.safeApiCall { apiService.editProfile(request) }
    }

    suspend fun editPassword(request: EditPasswordRequest): Result<EditPasswordResponse> {
        return NetworkUtils.safeApiCall { apiService.editPassword(request) }
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/perfil/ui/EditarPasswordScreen.kt
================================================
﻿package com.rigobertods.rdscore.features.perfil.ui

import androidx.compose.material3.SnackbarHostState
import androidx.compose.runtime.Composable
import androidx.compose.runtime.LaunchedEffect
import androidx.compose.runtime.getValue
import androidx.compose.runtime.remember
import androidx.compose.ui.platform.LocalContext
import androidx.hilt.lifecycle.viewmodel.compose.hiltViewModel
import androidx.lifecycle.compose.collectAsStateWithLifecycle
import com.rigobertods.rdscore.core.common.UiState
import com.rigobertods.rdscore.ui.util.traducirMensaje

@Composable
fun EditarPasswordScreen(
    onNavigateBack: () -> Unit,
    onPasswordUpdated: () -> Unit,
    viewModel: EditarPasswordViewModel = hiltViewModel()
) {
    val uiState by viewModel.uiState.collectAsStateWithLifecycle()
    val context = LocalContext.current
    
    val isLoading = uiState is UiState.Loading
    val error = (uiState as? UiState.Error)?.message
    val isSuccess = (uiState as? UiState.Success)?.data != null

    val snackbarHostState = remember { SnackbarHostState() }
    
    LaunchedEffect(isSuccess) {
        if (isSuccess) {
            onPasswordUpdated()
        }
    }

    LaunchedEffect(error) {
        error?.let {
            val translatedError = traducirMensaje(context, it)
            snackbarHostState.showSnackbar(translatedError)
            viewModel.clearError()
        }
    }

    PantallaEditarPassword(
        isLoading = isLoading,
        snackbarHostState = snackbarHostState,
        onGuardarClick = { contrasenaActual, nuevaContrasena ->
            viewModel.editarPassword(contrasenaActual, nuevaContrasena)
        },
        onCancelarClick = onNavigateBack,
        onNavigateBack = onNavigateBack
    )
}




================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/perfil/ui/EditarPasswordViewModel.kt
================================================
﻿package com.rigobertods.rdscore.features.perfil.ui

import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import com.rigobertods.rdscore.features.perfil.data.EditPasswordRequest
import com.rigobertods.rdscore.features.perfil.data.UserRepository
import com.rigobertods.rdscore.core.common.UiState
import dagger.hilt.android.lifecycle.HiltViewModel
import javax.inject.Inject
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.StateFlow
import kotlinx.coroutines.flow.asStateFlow
import kotlinx.coroutines.launch

@HiltViewModel
class EditarPasswordViewModel @Inject constructor(
    private val userRepository: UserRepository
) : ViewModel() {

    private val _uiState = MutableStateFlow<UiState<Unit?>>(UiState.Success(null))
    val uiState: StateFlow<UiState<Unit?>> = _uiState.asStateFlow()

    fun editarPassword(oldPass: String, newPass: String) {
        viewModelScope.launch {
            _uiState.value = UiState.Loading(null)
            val request = EditPasswordRequest(oldPassword = oldPass, newPassword = newPass)
            userRepository.editPassword(request)
                .onSuccess {
                    _uiState.value = UiState.Success(Unit)
                }
                .onFailure { error ->
                    val errorMessage = if (error is com.rigobertods.rdscore.core.network.BackendException && error.code != null) {
                        error.code
                    } else {
                        error.message ?: "Error al cambiar contraseña"
                    }
                    _uiState.value = UiState.Error(errorMessage, null)
                }
        }
    }

    fun clearError() {
        _uiState.value = UiState.Success(null)
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/perfil/ui/EditarPerfilScreen.kt
================================================
﻿package com.rigobertods.rdscore.features.perfil.ui

import androidx.compose.material3.SnackbarHostState
import androidx.compose.runtime.Composable
import androidx.compose.runtime.LaunchedEffect
import androidx.compose.runtime.getValue
import androidx.compose.runtime.remember
import androidx.hilt.lifecycle.viewmodel.compose.hiltViewModel
import androidx.lifecycle.compose.collectAsStateWithLifecycle
import com.rigobertods.rdscore.core.common.UiState

@Composable
fun EditarPerfilScreen(
    initialUsername: String,
    initialEmail: String,
    onNavigateBack: () -> Unit,
    onProfileUpdated: () -> Unit,
    viewModel: EditarPerfilViewModel = hiltViewModel()
) {
    val uiState by viewModel.uiState.collectAsStateWithLifecycle()
    
    val isLoading = uiState is UiState.Loading
    val error = (uiState as? UiState.Error)?.message
    val isSuccess = (uiState as? UiState.Success)?.data != null

    val snackbarHostState = remember { SnackbarHostState() }
    
    LaunchedEffect(isSuccess) {
        if (isSuccess) {
            onProfileUpdated()
        }
    }

    LaunchedEffect(error) {
            error?.let {
            snackbarHostState.showSnackbar(it)
            viewModel.clearError()
            }
    }


    PantallaEditarPerfil(
        initialUsername = initialUsername,
        initialEmail = initialEmail,
        isLoading = isLoading,
        snackbarHostState = snackbarHostState,
        onGuardarClick = { username, email ->
            viewModel.editarPerfil(username, email)
        },
        onCancelarClick = onNavigateBack,
        onNavigateBack = onNavigateBack
    )
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/perfil/ui/EditarPerfilViewModel.kt
================================================
﻿package com.rigobertods.rdscore.features.perfil.ui

import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import com.rigobertods.rdscore.features.perfil.data.EditProfileRequest
import com.rigobertods.rdscore.features.perfil.data.UserRepository
import com.rigobertods.rdscore.core.common.UiState
import dagger.hilt.android.lifecycle.HiltViewModel
import javax.inject.Inject
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.StateFlow
import kotlinx.coroutines.flow.asStateFlow
import kotlinx.coroutines.launch

@HiltViewModel
class EditarPerfilViewModel @Inject constructor(
    private val userRepository: UserRepository
) : ViewModel() {

    private val _uiState = MutableStateFlow<UiState<Unit?>>(UiState.Success(null))
    val uiState: StateFlow<UiState<Unit?>> = _uiState.asStateFlow()

    fun editarPerfil(username: String, email: String) {
        viewModelScope.launch {
            _uiState.value = UiState.Loading(null)
            val request = EditProfileRequest(username, email)
            userRepository.editProfile(request)
                .onSuccess {
                    _uiState.value = UiState.Success(Unit)
                }
                .onFailure { error ->
                    val errorMessage = if (error is com.rigobertods.rdscore.core.network.BackendException && error.code != null) {
                        error.code
                    } else {
                        error.message ?: "Error al actualizar perfil"
                    }
                    _uiState.value = UiState.Error(errorMessage, null)
                }
        }
    }

    fun clearError() {
        _uiState.value = UiState.Success(null)
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/perfil/ui/PantallaEditarPassword.kt
================================================
﻿package com.rigobertods.rdscore.features.perfil.ui

import androidx.compose.foundation.layout.Box
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.Spacer
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.height
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.layout.size
import androidx.compose.foundation.text.KeyboardOptions
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.automirrored.filled.ArrowBack
import androidx.compose.material.icons.filled.Visibility
import androidx.compose.material.icons.filled.VisibilityOff
import androidx.compose.material3.Button
import androidx.compose.material3.CircularProgressIndicator
import androidx.compose.material3.ExperimentalMaterial3Api
import androidx.compose.material3.Icon
import androidx.compose.material3.IconButton
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.OutlinedButton
import androidx.compose.material3.OutlinedTextField
import androidx.compose.material3.Scaffold
import androidx.compose.material3.SnackbarHost
import androidx.compose.material3.SnackbarHostState
import androidx.compose.material3.Text
import androidx.compose.material3.TopAppBar
import androidx.compose.material3.TopAppBarDefaults
import androidx.compose.runtime.Composable
import androidx.compose.runtime.getValue
import androidx.compose.runtime.mutableStateOf
import androidx.compose.runtime.remember
import androidx.compose.runtime.rememberCoroutineScope
import androidx.compose.runtime.setValue
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.res.painterResource
import androidx.compose.ui.res.stringResource
import androidx.compose.ui.text.input.ImeAction
import androidx.compose.ui.text.input.KeyboardType
import androidx.compose.ui.text.input.PasswordVisualTransformation
import androidx.compose.ui.text.input.VisualTransformation
import androidx.compose.ui.unit.dp
import androidx.compose.ui.unit.sp
import com.rigobertods.rdscore.R
import kotlinx.coroutines.launch

@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun PantallaEditarPassword(
    isLoading: Boolean,
    snackbarHostState: SnackbarHostState,
    onGuardarClick: (contrasenaActual: String, nuevaContrasena: String) -> Unit,
    onCancelarClick: () -> Unit,
    onNavigateBack: () -> Unit
) {
    var contrasenaActual by remember { mutableStateOf("") }
    var nuevaContrasena by remember { mutableStateOf("") }

    var isContrasenaActualError by remember { mutableStateOf(false) }
    var isNuevaContrasenaError by remember { mutableStateOf(false) }

    var contrasenaActualVisible by remember { mutableStateOf(false) }
    var nuevaContrasenaVisible by remember { mutableStateOf(false) }

    // Resources
    val errorCompleteFields = stringResource(R.string.error_complete_fields)

    // Estado para el Snackbar
    val scope = rememberCoroutineScope()

    Scaffold(
        snackbarHost = { SnackbarHost(snackbarHostState) },
        topBar = {
            TopAppBar(
                title = {
                    Icon(
                        painter = painterResource(id = R.mipmap.ic_launcher),
                        contentDescription = stringResource(R.string.cd_logo),
                        modifier = Modifier.size(40.dp),
                        tint = Color.Unspecified
                    )
                },
                navigationIcon = {
                    IconButton(onClick = onNavigateBack) {
                        Icon(
                            imageVector = Icons.AutoMirrored.Filled.ArrowBack,
                            contentDescription = stringResource(R.string.cd_back),
                            tint = Color.White
                        )
                    }
                },
                colors = TopAppBarDefaults.topAppBarColors(containerColor = Color.Black)
            )
        }
    ) { paddingValues ->
        Box(
            modifier = Modifier
                .fillMaxSize()
                .padding(paddingValues)
        ) {
            Column(
                modifier = Modifier
                    .fillMaxSize()
                    .padding(horizontal = 24.dp),
                horizontalAlignment = Alignment.CenterHorizontally
            ) {
                Spacer(modifier = Modifier.height(32.dp))

                Text(
                    text = stringResource(id = R.string.tv_bienvenida_editar_password),
                    fontSize = 28.sp
                )

                Spacer(modifier = Modifier.height(32.dp))

                // Campo Contraseña Actual
                OutlinedTextField(
                    value = contrasenaActual,
                    onValueChange = {
                        contrasenaActual = it
                        if (isContrasenaActualError) isContrasenaActualError = false
                    },
                    label = { Text(stringResource(id = R.string.et_contrasena_actual_editar_password)) },
                    modifier = Modifier.fillMaxWidth(),
                    singleLine = true,
                    isError = isContrasenaActualError,
                    keyboardOptions = KeyboardOptions(
                        keyboardType = KeyboardType.Password,
                        imeAction = ImeAction.Next
                    ),
                    visualTransformation = if (contrasenaActualVisible) VisualTransformation.None else PasswordVisualTransformation(),
                    trailingIcon = {
                        val image = if (contrasenaActualVisible) Icons.Filled.Visibility else Icons.Filled.VisibilityOff
                        IconButton(onClick = { contrasenaActualVisible = !contrasenaActualVisible }) {
                            Icon(image, "Toggle password visibility")
                        }
                    }
                )

                Spacer(modifier = Modifier.height(8.dp))

                // Campo Nueva Contraseña
                OutlinedTextField(
                    value = nuevaContrasena,
                    onValueChange = {
                        nuevaContrasena = it
                        if (isNuevaContrasenaError) isNuevaContrasenaError = false
                    },
                    label = { Text(stringResource(id = R.string.et_nueva_contrasena_editar_password)) },
                    modifier = Modifier.fillMaxWidth(),
                    singleLine = true,
                    isError = isNuevaContrasenaError,
                    keyboardOptions = KeyboardOptions(
                        keyboardType = KeyboardType.Password,
                        imeAction = ImeAction.Done
                    ),
                    visualTransformation = if (nuevaContrasenaVisible) VisualTransformation.None else PasswordVisualTransformation(),
                    trailingIcon = {
                        val image = if (nuevaContrasenaVisible) Icons.Filled.Visibility else Icons.Filled.VisibilityOff
                        IconButton(onClick = { nuevaContrasenaVisible = !nuevaContrasenaVisible }) {
                            Icon(image, "Toggle password visibility")
                        }
                    }
                )

                Spacer(modifier = Modifier.height(24.dp))

                // Botón Guardar
                Button(
                    onClick = {
                        isContrasenaActualError = contrasenaActual.isBlank()
                        isNuevaContrasenaError = nuevaContrasena.isBlank()

                        when {
                            isContrasenaActualError || isNuevaContrasenaError -> scope.launch {
                                snackbarHostState.showSnackbar(errorCompleteFields)
                            }
                            else -> {
                                onGuardarClick(contrasenaActual, nuevaContrasena)
                            }
                        }
                    },
                    modifier = Modifier.fillMaxWidth(),
                    enabled = !isLoading
                ) {
                    Text(stringResource(id = R.string.bt_guardar_editar_password))
                }

                Spacer(modifier = Modifier.height(8.dp))

                // Botón Cancelar
                OutlinedButton(
                    onClick = { onCancelarClick() },
                    modifier = Modifier.fillMaxWidth(),
                    enabled = !isLoading
                ) {
                    Text(stringResource(id = R.string.bt_cancelar_editar_password), color = MaterialTheme.colorScheme.onBackground)
                }
            }

            if (isLoading) {
                CircularProgressIndicator(modifier = Modifier.align(Alignment.Center))
            }
        }
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/perfil/ui/PantallaEditarPerfil.kt
================================================
﻿package com.rigobertods.rdscore.features.perfil.ui

import androidx.compose.foundation.layout.Box
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.Spacer
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.height
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.layout.size
import androidx.compose.foundation.text.KeyboardOptions
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.automirrored.filled.ArrowBack
import androidx.compose.material3.Button
import androidx.compose.material3.CircularProgressIndicator
import androidx.compose.material3.ExperimentalMaterial3Api
import androidx.compose.material3.Icon
import androidx.compose.material3.IconButton
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.OutlinedButton
import androidx.compose.material3.OutlinedTextField
import androidx.compose.material3.Scaffold
import androidx.compose.material3.SnackbarHost
import androidx.compose.material3.SnackbarHostState
import androidx.compose.material3.Text
import androidx.compose.material3.TopAppBar
import androidx.compose.material3.TopAppBarDefaults
import androidx.compose.runtime.Composable
import androidx.compose.runtime.getValue
import androidx.compose.runtime.mutableStateOf
import androidx.compose.runtime.remember
import androidx.compose.runtime.rememberCoroutineScope
import androidx.compose.runtime.setValue
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.res.painterResource
import androidx.compose.ui.res.stringResource
import androidx.compose.ui.text.input.ImeAction
import androidx.compose.ui.text.input.KeyboardType
import androidx.compose.ui.unit.dp
import androidx.compose.ui.unit.sp
import com.rigobertods.rdscore.R
import kotlinx.coroutines.launch

@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun PantallaEditarPerfil(
    initialUsername: String,
    initialEmail: String,
    isLoading: Boolean,
    snackbarHostState: SnackbarHostState,
    onGuardarClick: (nombre: String, email: String) -> Unit,
    onCancelarClick: () -> Unit,
    onNavigateBack: () -> Unit
) {
    // Estados para los valores de los campos de texto
    var nombreUsuario by remember { mutableStateOf(initialUsername) }
    var email by remember { mutableStateOf(initialEmail) }

    // Estados para controlar si hay un error en cada campo
    var isNombreUsuarioError by remember { mutableStateOf(false) }
    var isEmailError by remember { mutableStateOf(false) }

    // Resources
    val errorUsernameEmpty = stringResource(R.string.error_username_empty)
    val errorEmailInvalid = stringResource(R.string.error_email_invalid)

    // Estado para el Snackbar
    val scope = rememberCoroutineScope()

    Scaffold(
        snackbarHost = { SnackbarHost(snackbarHostState) },
        topBar = {
            TopAppBar(
                title = {
                    Icon(
                        painter = painterResource(id = R.mipmap.ic_launcher),
                        contentDescription = stringResource(R.string.cd_logo),
                        modifier = Modifier.size(40.dp),
                        tint = Color.Unspecified
                    )
                },
                navigationIcon = {
                    IconButton(onClick = onNavigateBack) { // Llama a la lambda
                        Icon(
                            imageVector = Icons.AutoMirrored.Filled.ArrowBack,
                            contentDescription = stringResource(R.string.cd_back),
                            tint = Color.White
                        )
                    }
                },
                colors = TopAppBarDefaults.topAppBarColors(
                    containerColor = Color.Black,
                    titleContentColor = Color.White
                )
            )
        }
    ) { paddingValues ->
        Box(
            modifier = Modifier
                .fillMaxSize()
                .padding(paddingValues)
        ) {
            Column(
                modifier = Modifier
                    .fillMaxSize()
                    .padding(horizontal = 24.dp),
                horizontalAlignment = Alignment.CenterHorizontally
            ) {
                Spacer(modifier = Modifier.height(32.dp))

                Text(
                    text = stringResource(id = R.string.tv_bienvenida_editar),
                    fontSize = 28.sp
                )

                Spacer(modifier = Modifier.height(32.dp))

                OutlinedTextField(
                    value = nombreUsuario,
                    onValueChange = {
                        nombreUsuario = it
                        if (isNombreUsuarioError) isNombreUsuarioError = false
                    },
                    label = { Text(stringResource(id = R.string.et_usuario_editar)) },
                    modifier = Modifier.fillMaxWidth(),
                    singleLine = true,
                    keyboardOptions = KeyboardOptions(imeAction = ImeAction.Next),
                    isError = isNombreUsuarioError,
                    supportingText = {
                        if (isNombreUsuarioError) {
                            Text(stringResource(R.string.val_name_empty))
                        }
                    }
                )

                Spacer(modifier = Modifier.height(8.dp))

                OutlinedTextField(
                    value = email,
                    onValueChange = {
                        email = it
                        if (isEmailError) isEmailError = false
                    },
                    label = { Text(stringResource(id = R.string.et_email_editar)) },
                    modifier = Modifier.fillMaxWidth(),
                    singleLine = true,
                    keyboardOptions = KeyboardOptions(
                        keyboardType = KeyboardType.Email,
                        imeAction = ImeAction.Done
                    ),
                    isError = isEmailError,
                    supportingText = {
                        if (isEmailError) {
                            Text(stringResource(R.string.val_email_invalid))
                        }
                    }
                )

                Spacer(modifier = Modifier.height(24.dp))

                Button(
                    onClick = {
                        // Validar campos y mostrar Snackbar si hay error
                        isNombreUsuarioError = nombreUsuario.isBlank()
                        isEmailError = !android.util.Patterns.EMAIL_ADDRESS.matcher(email).matches()

                        when {
                            isNombreUsuarioError -> scope.launch {
                                snackbarHostState.showSnackbar(errorUsernameEmpty)
                            }
                            isEmailError -> scope.launch {
                                snackbarHostState.showSnackbar(errorEmailInvalid)
                            }
                            else -> {
                                // Si es correcto, se procede a guardar
                                onGuardarClick(nombreUsuario, email)
                            }
                        }
                    },
                    modifier = Modifier.fillMaxWidth(),
                    enabled = !isLoading
                ) {
                    Text(stringResource(id = R.string.bt_guardar_editar))
                }

                Spacer(modifier = Modifier.height(8.dp))

                OutlinedButton(
                    onClick = { onCancelarClick() },
                    modifier = Modifier.fillMaxWidth(),
                    enabled = !isLoading
                ) {
                    Text(stringResource(id = R.string.bt_cancelar_editar), color = MaterialTheme.colorScheme.onBackground)
                }
            }

            if (isLoading) {
                CircularProgressIndicator(
                    modifier = Modifier.align(Alignment.Center),
                    color = MaterialTheme.colorScheme.onBackground)
            }
        }
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/perfil/ui/PantallaPerfil.kt
================================================
﻿package com.rigobertods.rdscore.features.perfil.ui

import androidx.compose.foundation.layout.Arrangement
import androidx.compose.foundation.layout.Box
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.Spacer
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.height
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.layout.size
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.automirrored.filled.ArrowBack
import androidx.compose.material.icons.filled.Edit
import androidx.compose.material3.AlertDialog
import androidx.compose.material3.Button
import androidx.compose.material3.ButtonDefaults
import androidx.compose.material3.CircularProgressIndicator
import androidx.compose.material3.ExperimentalMaterial3Api
import androidx.compose.material3.HorizontalDivider
import androidx.compose.material3.Icon
import androidx.compose.material3.IconButton
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.OutlinedButton
import androidx.compose.material3.Scaffold
import androidx.compose.material3.SnackbarHost
import androidx.compose.material3.SnackbarHostState
import androidx.compose.material3.Text
import androidx.compose.material3.TextButton
import androidx.compose.material3.TopAppBar
import androidx.compose.material3.TopAppBarDefaults
import androidx.compose.runtime.Composable
import androidx.compose.runtime.getValue
import androidx.compose.runtime.mutableStateOf
import androidx.compose.runtime.remember
import androidx.compose.runtime.setValue
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.res.painterResource
import androidx.compose.ui.res.stringResource
import androidx.compose.ui.unit.dp
import androidx.compose.ui.unit.sp
import com.rigobertods.rdscore.R

@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun PantallaPerfil(
    username: String,
    email: String,
    isLoading: Boolean,
    snackbarHostState: SnackbarHostState,
    onEditClick: () -> Unit,
    onChangePasswordClick: () -> Unit,
    onLogoutClick: () -> Unit,
    onDeleteAccountClick: () -> Unit,
    onNavigateBack: () -> Unit
) {
    var showDeleteDialog by remember { mutableStateOf(false) }

    Scaffold(
        snackbarHost = { SnackbarHost(snackbarHostState) },
        topBar = {
            TopAppBar(
                title = {
                    Icon(
                        painter = painterResource(id = R.mipmap.ic_launcher),
                        contentDescription = stringResource(R.string.cd_logo),
                        modifier = Modifier.size(40.dp),
                        tint = Color.Unspecified
                    )
                },
                navigationIcon = {
                    IconButton(onClick = onNavigateBack) { // Llama a la lambda
                        Icon(
                            imageVector = Icons.AutoMirrored.Filled.ArrowBack,
                            contentDescription = stringResource(R.string.cd_back),
                            tint = Color.White
                        )
                    }
                },
                actions = {
                    IconButton(onClick = onEditClick, enabled = !isLoading) {
                        Icon(Icons.Default.Edit, contentDescription = stringResource(R.string.cd_edit_profile), tint = Color.White)
                    }
                },
                colors = TopAppBarDefaults.topAppBarColors(containerColor = Color.Black)
            )
        }
    ) { paddingValues ->
        Box(
            modifier = Modifier
                .fillMaxSize()
                .padding(paddingValues),
            contentAlignment = Alignment.Center
        ) {
            if (isLoading) {
                CircularProgressIndicator(color = MaterialTheme.colorScheme.onBackground)
            } else {
                Column(
                    modifier = Modifier
                        .fillMaxSize()
                        .padding(24.dp),
                    horizontalAlignment = Alignment.CenterHorizontally
                ) {
                    Text(
                        text = stringResource(id = R.string.tv_bienvenida_perfil),
                        fontSize = 28.sp
                    )

                    Spacer(modifier = Modifier.height(32.dp))

                    // Sección de datos del usuario
                    Column(
                        modifier = Modifier.fillMaxWidth(),
                        horizontalAlignment = Alignment.Start
                    ) {
                        Text(text = username, fontSize = 20.sp)
                        Spacer(modifier = Modifier.height(8.dp))
                        Text(text = email)
                    }

                    Spacer(modifier = Modifier.height(16.dp))

                    HorizontalDivider()

                    Spacer(modifier = Modifier.height(24.dp))

                    // Sección de botones
                    Column(verticalArrangement = Arrangement.spacedBy(8.dp)) {
                        Button(onClick = onChangePasswordClick, modifier = Modifier.fillMaxWidth(), enabled = true) {
                            Text(stringResource(id = R.string.bt_modificar_password))
                        }
                        OutlinedButton(onClick = onLogoutClick, modifier = Modifier.fillMaxWidth(), enabled = true) {
                            Text(stringResource(id = R.string.bt_cerrar_sesion), color = MaterialTheme.colorScheme.onBackground)
                        }
                        Button(
                            onClick = { showDeleteDialog = true },
                            modifier = Modifier.fillMaxWidth(),
                            enabled = true,
                            colors = ButtonDefaults.buttonColors(
                                containerColor = MaterialTheme.colorScheme.error,
                                contentColor = MaterialTheme.colorScheme.onError
                            )
                        ) {
                            Text(stringResource(id = R.string.bt_eliminar_cuenta))
                        }
                    }
                }
            }
        }

        if (showDeleteDialog) {
            AlertDialog(
                onDismissRequest = { },
                title = { Text(stringResource(R.string.dialog_delete_title)) },
                text = { Text(stringResource(R.string.dialog_delete_message)) },
                confirmButton = {
                    TextButton(
                        onClick = {
                            onDeleteAccountClick()
                        },
                        colors = ButtonDefaults.textButtonColors(contentColor = MaterialTheme.colorScheme.error)
                    ) {
                        Text(stringResource(R.string.delete))
                    }
                },
                dismissButton = {
                    TextButton(onClick = { }) {
                        Text(stringResource(R.string.cancel))
                    }
                }
            )
        }
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/perfil/ui/PerfilScreen.kt
================================================
﻿package com.rigobertods.rdscore.features.perfil.ui

import androidx.compose.material3.SnackbarHostState
import androidx.compose.runtime.Composable
import androidx.compose.runtime.LaunchedEffect
import androidx.compose.runtime.getValue
import androidx.compose.runtime.remember
import androidx.compose.runtime.rememberCoroutineScope
import androidx.compose.ui.platform.LocalContext
import androidx.hilt.lifecycle.viewmodel.compose.hiltViewModel
import androidx.lifecycle.compose.collectAsStateWithLifecycle
import com.rigobertods.rdscore.core.common.UiState
import com.rigobertods.rdscore.ui.util.traducirMensaje
import kotlinx.coroutines.launch

@Composable
fun PerfilScreen(
    onNavigateToEditProfile: (String, String) -> Unit,
    onNavigateToEditPassword: () -> Unit,
    onNavigateBack: () -> Unit,
    viewModel: PerfilViewModel = hiltViewModel()
) {
    val uiState by viewModel.uiState.collectAsStateWithLifecycle()
    val context = LocalContext.current
    
    val username = uiState.data?.username ?: ""
    val email = uiState.data?.email ?: ""
    val isLoading = uiState is UiState.Loading
    val error = (uiState as? UiState.Error)?.message

    val snackbarHostState = remember { SnackbarHostState() }
    val coroutineScope = rememberCoroutineScope()

    val showSnackbar: (String) -> Unit = { message ->
        val translatedMessage = traducirMensaje(context, message)
        coroutineScope.launch { snackbarHostState.showSnackbar(translatedMessage) }
    }

    // Initial Load
    LaunchedEffect(Unit) {
        viewModel.obtenerPerfil()
    }
    
    // Show errors
    LaunchedEffect(error) {
        error?.let {
            showSnackbar(it)
            viewModel.clearError()
        }
    }

    PantallaPerfil(
        username = username,
        email = email,
        isLoading = isLoading,
        snackbarHostState = snackbarHostState,
        onEditClick = { onNavigateToEditProfile(username, email) },
        onChangePasswordClick = onNavigateToEditPassword,
        onLogoutClick = { 
            viewModel.logout() 
        },
        onDeleteAccountClick = { 
            viewModel.eliminarCuenta(onResult = showSnackbar)
        },
        onNavigateBack = onNavigateBack
    )
}




================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/perfil/ui/PerfilViewModel.kt
================================================
﻿package com.rigobertods.rdscore.features.perfil.ui

import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import com.rigobertods.rdscore.data.SessionManager
import com.rigobertods.rdscore.features.perfil.data.UserRepository
import com.rigobertods.rdscore.features.perfil.data.GetProfileResponse
import com.rigobertods.rdscore.core.common.UiState
import dagger.hilt.android.lifecycle.HiltViewModel
import javax.inject.Inject
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.StateFlow
import kotlinx.coroutines.flow.asStateFlow
import kotlinx.coroutines.launch

@HiltViewModel
class PerfilViewModel @Inject constructor(
    private val userRepository: UserRepository,
    private val sessionManager: SessionManager
) : ViewModel() {

    private val _uiState = MutableStateFlow<UiState<GetProfileResponse>>(UiState.Success(GetProfileResponse(0, "", "", "")))
    val uiState: StateFlow<UiState<GetProfileResponse>> = _uiState.asStateFlow()

    fun obtenerPerfil() {
        val currentData = _uiState.value.data
        
        viewModelScope.launch {
            _uiState.value = UiState.Loading(currentData)
            userRepository.getProfile()
                .onSuccess { profile ->
                    _uiState.value = UiState.Success(profile)
                }
                .onFailure { error ->
                    val errorMessage = if (error is com.rigobertods.rdscore.core.network.BackendException && error.code != null) {
                        error.code
                    } else {
                        error.message ?: "Error al obtener perfil"
                    }
                    _uiState.value = UiState.Error(errorMessage, currentData)
                }
        }
    }

    fun eliminarCuenta(onResult: (String) -> Unit) {
        val currentData = _uiState.value.data
        
        viewModelScope.launch {
            _uiState.value = UiState.Loading(currentData)
            userRepository.deleteAccount()
                .onSuccess { _ ->
                    logout()
                }
                .onFailure { error ->
                    val msg = if (error is com.rigobertods.rdscore.core.network.BackendException && error.code != null) {
                        error.code
                    } else {
                        error.message ?: "Error al eliminar cuenta"
                    }
                    onResult(msg)
                    _uiState.value = UiState.Error(msg, currentData)
                }
        }
    }

    fun clearError() {
        val currentData = _uiState.value.data ?: GetProfileResponse(0, "", "", "")
        _uiState.value = UiState.Success(currentData)
    }

    fun logout() {
        sessionManager.logout()
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/resumen/data/PrecisionMercadoResponse.kt
================================================
﻿package com.rigobertods.rdscore.features.resumen.data

import com.google.gson.annotations.SerializedName
import com.rigobertods.rdscore.features.partidos.data.ResumenMercado

data class PrecisionMercadoResponse (
    @SerializedName("mensaje")
    val mensaje: ResumenMercado
)



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/resumen/data/PrecisionResponse.kt
================================================
﻿package com.rigobertods.rdscore.features.resumen.data

import com.google.gson.annotations.SerializedName
import com.rigobertods.rdscore.features.partidos.data.Resumen

data class PrecisionResponse (
    @SerializedName("mensaje")
    val mensaje: Resumen
)



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/resumen/data/StatsRepository.kt
================================================
﻿package com.rigobertods.rdscore.features.resumen.data

import android.util.Log
import com.rigobertods.rdscore.features.partidos.data.Resumen
import com.rigobertods.rdscore.features.partidos.data.ResumenMercado
import com.rigobertods.rdscore.core.network.ApiService
import com.rigobertods.rdscore.features.cuotascalientes.data.CuotaCalienteResponse
import javax.inject.Inject

class StatsRepository @Inject constructor(private val apiService: ApiService) {

    suspend fun getPrecision(): Result<Resumen> {
        return try {
            val response = apiService.getPrecision()
            if (response.isSuccessful) {
                val body = response.body()
                if (body != null) {
                    Result.success(body.mensaje)
                } else {
                    Result.failure(Exception("Respuesta vacía del servidor"))
                }
            } else {
                Result.failure(Exception("Error: ${response.code()} - ${response.message()}"))
            }
        } catch (e: Exception) {
            Log.e("StatsRepository", "Error fetching precision", e)
            Result.failure(e)
        }
    }

    suspend fun getPrecisionPorMercado(): Result<ResumenMercado> {
        return try {
            val response = apiService.getPrecisionPorMercado()
            if (response.isSuccessful) {
                val body = response.body()
                if (body != null) {
                    Result.success(body.mensaje)
                } else {
                    Result.failure(Exception("Respuesta vacía del servidor"))
                }
            } else {
                Result.failure(Exception("Error: ${response.code()} - ${response.message()}"))
            }
        } catch (e: Exception) {
            Log.e("StatsRepository", "Error fetching market precision", e)
            Result.failure(e)
        }
    }

    suspend fun getCuotasCalientes(): Result<CuotaCalienteResponse> {
        return try {
            val response = apiService.getCuotasCalientes()
            if (response.isSuccessful) {
                val body = response.body()
                if (body != null) {
                    Result.success(body)
                } else {
                    Result.failure(Exception("Respuesta vacía del servidor"))
                }
            } else {
                Result.failure(Exception("Error: ${response.code()} - ${response.message()}"))
            }
        } catch (e: Exception) {
            Log.e("StatsRepository", "Error fetching hot odds", e)
            Result.failure(e)
        }
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/resumen/ui/PantallaResumen.kt
================================================
﻿package com.rigobertods.rdscore.features.resumen.ui

import androidx.compose.foundation.layout.Box
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.Row
import androidx.compose.foundation.layout.Spacer
import androidx.compose.foundation.layout.fillMaxHeight
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.layout.size
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.automirrored.filled.ArrowBack
import androidx.compose.material.icons.filled.Star
import androidx.compose.material3.Card
import androidx.compose.material3.CircularProgressIndicator
import androidx.compose.material3.ExperimentalMaterial3Api
import androidx.compose.material3.Icon
import androidx.compose.material3.IconButton
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.Scaffold
import androidx.compose.material3.SnackbarHost
import androidx.compose.material3.SnackbarHostState
import androidx.compose.material3.Text
import androidx.compose.material3.TopAppBar
import androidx.compose.material3.TopAppBarDefaults
import androidx.compose.runtime.Composable
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.res.painterResource
import androidx.compose.ui.res.stringResource
import androidx.compose.ui.unit.dp
import com.rigobertods.rdscore.R
import com.rigobertods.rdscore.core.ui.Blanco
import com.rigobertods.rdscore.core.ui.Negro
import com.rigobertods.rdscore.core.ui.Rojo
import com.rigobertods.rdscore.core.ui.VerdeFuerte
import com.rigobertods.rdscore.features.partidos.data.ModeloResumen
import com.rigobertods.rdscore.features.partidos.data.Resumen
import com.rigobertods.rdscore.features.partidos.data.ResumenMercado
import com.rigobertods.rdscore.ui.components.PaginaResumen
import com.rigobertods.rdscore.ui.util.traducirMercado
import com.rigobertods.rdscore.ui.util.traducirModelo
import java.util.Locale

@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun PantallaResumen(
    precision: Resumen?,
    precisionMercado: ResumenMercado?,
    isLoading: Boolean,
    snackbarHostState: SnackbarHostState,
    onNavigateBack: () -> Unit
) {

    Scaffold(
        topBar = {
            TopAppBar(
                title = {
                    Icon(
                        painter = painterResource(id = R.mipmap.ic_launcher),
                        contentDescription = stringResource(R.string.cd_logo),
                        modifier = Modifier.size(40.dp),
                        tint = Color.Unspecified
                    )
                },
                navigationIcon = {
                    IconButton(onClick = onNavigateBack) {
                        Icon(
                            imageVector = Icons.AutoMirrored.Filled.ArrowBack,
                            contentDescription = stringResource(R.string.cd_back),
                            tint = Blanco
                        )
                    }
                },
                colors = TopAppBarDefaults.topAppBarColors(
                    containerColor = Negro,
                    titleContentColor = Blanco
                )
            )
        },
        snackbarHost = { SnackbarHost(snackbarHostState) }
    ) { paddingValues ->
        Box(
            modifier = Modifier
                .fillMaxSize()
                .padding(paddingValues)
        ) {
            if (isLoading && precision == null) {
                CircularProgressIndicator(
                    modifier = Modifier.align(Alignment.Center),
                    color = MaterialTheme.colorScheme.onBackground
                )
            } else if (precision != null && precisionMercado != null) {
                Column {
                    val mejor = precisionMercado.obtenerMejorRoi()

                    // Historial card removed - integrated in main screen now


                    Card(
                        modifier = Modifier
                            .fillMaxWidth()
                            .padding(8.dp)
                    ) {
                        Column (
                            modifier = Modifier.padding(16.dp)
                        ){
                            Row {
                                Icon(
                                    modifier = Modifier.size(24.dp).align(Alignment.Top).fillMaxHeight(),
                                    imageVector = Icons.Filled.Star,
                                    contentDescription = stringResource(R.string.cd_featured),
                                    tint = Color.Yellow
                                )
                                Spacer(modifier = Modifier.size(8.dp))
                                Text(
                                    modifier = Modifier.align(Alignment.CenterVertically),
                                    text = stringResource(R.string.featured_recommendation),
                                    style = MaterialTheme.typography.titleSmall
                                )
                            }
                            Text(
                                text = stringResource(R.string.model_market_format, traducirModelo(mejor?.second ?: ""), traducirMercado(mejor?.first ?: "")),
                                style = MaterialTheme.typography.bodyMedium
                            )
                            Row {
                                mejor?.third?.roi?.let {
                                    Text(
                                        text = "ROI: ${
                                            String.format(
                                                Locale.getDefault(),
                                                "%.2f",
                                                mejor.third.roi
                                            )
                                        }%",
                                        style = MaterialTheme.typography.bodyMedium,
                                        color = if (it > 0) VerdeFuerte else Rojo
                                    )
                                }
                                Spacer(modifier = Modifier.size(4.dp))
                                Text(
                                    text = stringResource(R.string.hits_format, mejor?.third?.aciertosBrutos ?: 0, mejor?.third?.apuestas ?: 0),
                                    style = MaterialTheme.typography.bodyMedium
                                )
                            }
                        }
                    }
                    PaginaResumen(precision, precisionMercado)
                }
            }
        }
    }
}

private fun ResumenMercado.obtenerMejorRoi (): Triple<String, String, ModeloResumen>? {

    val candidatos = listOf(
        Triple("Resultado", "Agresivo", resultado.agresivo),
        Triple("Resultado", "Moderado", resultado.moderado),
        Triple("Resultado", "Conservador", resultado.conservador),

        Triple("Ambos Marcan", "Agresivo", btts.agresivo),
        Triple("Ambos Marcan", "Moderado", btts.moderado),
        Triple("Ambos Marcan", "Conservador", btts.conservador),

        Triple("Más/Menos 2.5", "Agresivo", over.agresivo),
        Triple("Más/Menos 2.5", "Moderado", over.moderado),
        Triple("Más/Menos 2.5", "Conservador", over.conservador)
    )

    val mejor = candidatos.maxByOrNull { it.third.roi }

    return mejor
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/resumen/ui/ResumenScreen.kt
================================================
﻿package com.rigobertods.rdscore.features.resumen.ui

import androidx.compose.material3.SnackbarHostState
import androidx.compose.runtime.Composable
import androidx.compose.runtime.LaunchedEffect
import androidx.compose.runtime.getValue
import androidx.compose.runtime.remember
import androidx.hilt.lifecycle.viewmodel.compose.hiltViewModel
import androidx.lifecycle.compose.collectAsStateWithLifecycle

@Composable
fun ResumenScreen(
    onNavigateBack: () -> Unit,
    viewModel: ResumenViewModel = hiltViewModel()
) {
    val precision by viewModel.precision.collectAsStateWithLifecycle()
    val precisionMercado by viewModel.precisionMercado.collectAsStateWithLifecycle()
    val isLoading by viewModel.isLoading.collectAsStateWithLifecycle()
    val error by viewModel.error.collectAsStateWithLifecycle()

    val snackbarHostState = remember { SnackbarHostState() }

    LaunchedEffect(Unit) {
        viewModel.obtenerPrecision()
        viewModel.obtenerPrecisionMercado()
    }

    LaunchedEffect(error) {
        error?.let {
            snackbarHostState.showSnackbar(it)
            viewModel.clearError()
        }
    }

    PantallaResumen(
        precision = precision,
        precisionMercado = precisionMercado,
        isLoading = isLoading,
        snackbarHostState = snackbarHostState,
        onNavigateBack = onNavigateBack
    )
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/features/resumen/ui/ResumenViewModel.kt
================================================
﻿package com.rigobertods.rdscore.features.resumen.ui

import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import com.rigobertods.rdscore.features.partidos.data.Resumen
import com.rigobertods.rdscore.features.partidos.data.ResumenMercado
import com.rigobertods.rdscore.features.resumen.data.StatsRepository
import dagger.hilt.android.lifecycle.HiltViewModel
import kotlinx.coroutines.launch
import javax.inject.Inject

import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.StateFlow
import kotlinx.coroutines.flow.asStateFlow

@HiltViewModel
class ResumenViewModel @Inject constructor(
    private val repository: StatsRepository
) : ViewModel() {

    private val _precision = MutableStateFlow<Resumen?>(null)
    val precision: StateFlow<Resumen?> = _precision.asStateFlow()

    private val _precisionMercado = MutableStateFlow<ResumenMercado?>(null)
    val precisionMercado: StateFlow<ResumenMercado?> = _precisionMercado.asStateFlow()

    private val _isLoading = MutableStateFlow(false)
    val isLoading: StateFlow<Boolean> = _isLoading.asStateFlow()

    private val _error = MutableStateFlow<String?>(null)
    val error: StateFlow<String?> = _error.asStateFlow()

    fun obtenerPrecision() {
        viewModelScope.launch {
            _isLoading.value = true
            _error.value = null
            val result = repository.getPrecision()
            result.onSuccess { resumen ->
                _precision.value = resumen
            }.onFailure { error ->
                _error.value = error.message ?: "Error desconocido"
            }
            _isLoading.value = false
        }
    }

    fun obtenerPrecisionMercado() {
        viewModelScope.launch {
            _isLoading.value = true
            _error.value = null
            val result = repository.getPrecisionPorMercado()
            result.onSuccess { resumen ->
                _precisionMercado.value = resumen
            }.onFailure { error ->
                _error.value = error.message ?: "Error desconocido"
            }
            _isLoading.value = false
        }
    }

    fun clearError() {
        _error.value = null
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/ui/components/BannerAviso.kt
================================================
﻿package com.rigobertods.rdscore.ui.components

import androidx.compose.animation.AnimatedVisibility
import androidx.compose.foundation.clickable
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.Row
import androidx.compose.foundation.layout.Spacer
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.layout.width
import androidx.compose.foundation.shape.RoundedCornerShape
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.filled.ExpandLess
import androidx.compose.material.icons.filled.ExpandMore
import androidx.compose.material.icons.filled.Warning
import androidx.compose.material3.Card
import androidx.compose.material3.CardDefaults
import androidx.compose.material3.Icon
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.Text
import androidx.compose.runtime.Composable
import androidx.compose.runtime.getValue
import androidx.compose.runtime.mutableStateOf
import androidx.compose.runtime.remember
import androidx.compose.runtime.setValue
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.res.stringResource
import com.rigobertods.rdscore.R
import androidx.compose.ui.text.font.FontWeight
import androidx.compose.ui.unit.dp
import androidx.compose.ui.unit.sp

@Composable
fun BannerAviso(
    titulo: String,
    texto: String
) {
    var expanded by remember { mutableStateOf(false) }

    Card(
        modifier = Modifier
            .fillMaxWidth()
            .padding(start = 8.dp, end = 8.dp, top = 8.dp, bottom = 4.dp)
            .clickable { expanded = !expanded },
        colors = CardDefaults.cardColors(
            containerColor = MaterialTheme.colorScheme.errorContainer
        ),
        shape = RoundedCornerShape(12.dp)
    ) {
        Column(
            modifier = Modifier.padding(16.dp)
        ) {
            Row(
                modifier = Modifier.fillMaxWidth(),
                verticalAlignment = Alignment.CenterVertically
            ) {
                Icon(
                    modifier = Modifier.weight(1f),
                    imageVector = Icons.Default.Warning,
                    contentDescription = stringResource(R.string.cd_warning_icon),
                    tint = MaterialTheme.colorScheme.onErrorContainer
                )
                Spacer(Modifier.width(16.dp))
                Text(
                    modifier = Modifier.weight(10f),
                    text = titulo,
                    style = MaterialTheme.typography.bodyMedium,
                    fontWeight = FontWeight.SemiBold,
                    fontSize = 16.sp,
                    color = MaterialTheme.colorScheme.onErrorContainer
                )
                Spacer(Modifier.width(16.dp))
                Icon(
                    modifier = Modifier.weight(1f),
                    imageVector = if (expanded)
                        Icons.Default.ExpandLess
                    else
                        Icons.Default.ExpandMore,
                    contentDescription = if (expanded) "Contraer aviso" else "Expandir aviso"
                )
            }
            AnimatedVisibility(
                visible = expanded,
                modifier = Modifier.padding(top = 8.dp)
                ) {
                Text(
                    text = texto,
                    style = MaterialTheme.typography.bodySmall,
                    color = MaterialTheme.colorScheme.onErrorContainer
                )
            }
        }
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/ui/components/BarraNavegacionFlechas.kt
================================================
﻿package com.rigobertods.rdscore.ui.components

import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.automirrored.filled.ArrowBack
import androidx.compose.material.icons.automirrored.filled.ArrowForward
import androidx.compose.material.icons.filled.DateRange
import androidx.compose.material.icons.filled.FilterList
import androidx.compose.material3.ExperimentalMaterial3Api
import androidx.compose.material3.Icon
import androidx.compose.material3.IconButton
import androidx.compose.material3.Text
import androidx.compose.material3.TopAppBar
import androidx.compose.material3.TopAppBarDefaults.topAppBarColors
import androidx.compose.runtime.Composable
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.res.stringResource
import com.rigobertods.rdscore.R
import androidx.compose.ui.text.font.FontWeight
import java.time.LocalDate
import java.time.format.DateTimeFormatter
import java.util.Locale

@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun BarraNavegacionFechas(
    fecha: LocalDate,
    enabled: Boolean,
    onFechaAnterior: () -> Unit,
    onFechaSiguiente: () -> Unit,
    onCalendarioClick: () -> Unit,
    onFiltroClick: () -> Unit
) {
    val formatter = DateTimeFormatter.ofPattern("EEE, d MMM yyyy", Locale.getDefault())
    TopAppBar(
        colors = topAppBarColors(
            containerColor = Color.Transparent
        ),
        title = { Text(fecha.format(formatter), fontWeight = FontWeight.Bold) },
        navigationIcon = {
            IconButton(onClick = onFechaAnterior, enabled = enabled) {
                Icon(Icons.AutoMirrored.Filled.ArrowBack, contentDescription = stringResource(R.string.cd_previous_day))
            }
        },
        actions = {
            IconButton(onClick = onFiltroClick, enabled = enabled) {
                Icon(Icons.Default.FilterList, contentDescription = stringResource(R.string.cd_filter_matches))
            }
            IconButton(onClick = onCalendarioClick, enabled = enabled) {
                Icon(Icons.Filled.DateRange, contentDescription = stringResource(R.string.cd_select_date))
            }
            IconButton(onClick = onFechaSiguiente, enabled = enabled) {
                Icon(Icons.AutoMirrored.Filled.ArrowForward, contentDescription = stringResource(R.string.cd_next_day))
            }
        }
    )
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/ui/components/CabeceraHistorialCuotaCaliente.kt
================================================
﻿package com.rigobertods.rdscore.ui.components




================================================
FILE: app/src/main/java/com/rigobertods/rdscore/ui/components/CabeceraLiga.kt
================================================
﻿package com.rigobertods.rdscore.ui.components

import androidx.compose.animation.AnimatedVisibility
import androidx.compose.animation.core.animateFloatAsState
import androidx.compose.foundation.clickable
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.Row
import androidx.compose.foundation.layout.Spacer
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.layout.size
import androidx.compose.foundation.layout.width
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.filled.ExpandMore
import androidx.compose.material3.Card
import androidx.compose.material3.CardDefaults
import androidx.compose.material3.Icon
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.Text
import androidx.compose.runtime.Composable
import androidx.compose.runtime.getValue
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.draw.rotate
import androidx.compose.ui.res.stringResource
import androidx.compose.ui.text.font.FontWeight
import androidx.compose.ui.unit.dp
import coil.compose.AsyncImage
import com.rigobertods.rdscore.R
import com.rigobertods.rdscore.features.partidos.data.Partido

import com.rigobertods.rdscore.features.ligas.data.Liga

@Composable
fun CabeceraLiga(
    partido: Partido,
    ligaInfo: Liga? = null,
    pagina: Int,
    estaExpandida: Boolean,
    onClick: () -> Unit,
    partidosDeLaLiga: List<Partido>,
    onPartidoClick: (Partido) -> Unit
) {
    Card(
        modifier = Modifier
            .fillMaxWidth()
            .padding(horizontal = 8.dp, vertical = 6.dp)
            .clickable(onClick = onClick),
        elevation = CardDefaults.cardElevation(defaultElevation = 2.dp),
        colors = CardDefaults.cardColors(
            containerColor = MaterialTheme.colorScheme.surfaceVariant
        )
    ) {
        Column {
            Row(
                modifier = Modifier
                    .fillMaxWidth()
                    .padding(vertical = 12.dp, horizontal = 16.dp),
                verticalAlignment = Alignment.CenterVertically
            ) {
                AsyncImage(
                    model = ligaInfo?.logo ?: partido.estadisticasLocal.liga.logo,
                    contentDescription = stringResource(R.string.cd_league_logo, ligaInfo?.nombre ?: partido.estadisticasLocal.liga.nombre),
                    modifier = Modifier.size(28.dp)
                )

                Spacer(modifier = Modifier.width(12.dp))

                Text(
                    text = ligaInfo?.nombre ?: partido.estadisticasLocal.liga.nombre,
                    style = MaterialTheme.typography.titleMedium,
                    fontWeight = FontWeight.Bold,
                    modifier = Modifier.weight(1f)
                )

                val anguloRotacion by animateFloatAsState(
                    targetValue = if (estaExpandida) 180f else 0f,
                    label = "rotation"
                )

                Icon(
                    imageVector = Icons.Default.ExpandMore,
                    contentDescription = if (estaExpandida) "Contraer" else "Expandir",
                    modifier = Modifier.rotate(anguloRotacion)
                )
            }
            AnimatedVisibility(visible = estaExpandida) {
                Column {
                    partidosDeLaLiga.forEach { partido ->
                        PartidoItem(
                            partido = partido,
                            pagina = pagina,
                            onClick = { onPartidoClick(partido) }
                        )
                    }
                }
            }
        }
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/ui/components/ContenidoEquipoClasificacion.kt
================================================
﻿package com.rigobertods.rdscore.ui.components

import androidx.compose.foundation.background
import androidx.compose.ui.Modifier
import androidx.compose.ui.Alignment
import androidx.compose.foundation.clickable
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.PaddingValues
import androidx.compose.foundation.layout.Row
import androidx.compose.foundation.layout.Spacer
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.layout.size
import androidx.compose.foundation.layout.width
import androidx.compose.foundation.lazy.LazyColumn
import androidx.compose.foundation.lazy.items
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.Text
import androidx.compose.runtime.Composable
import androidx.compose.ui.res.stringResource
import androidx.compose.ui.text.style.TextAlign
import com.rigobertods.rdscore.R
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.text.font.FontWeight
import androidx.compose.ui.text.style.TextOverflow
import androidx.compose.ui.unit.dp
import coil.compose.AsyncImage
import com.rigobertods.rdscore.features.partidos.data.Equipo
import com.rigobertods.rdscore.core.ui.VerdeFuerte

@Composable
fun ContenidoEquipoClasificacion(
    equipoBuscado: Equipo,
    equipos: List<Equipo>,
    onEquipoClick: (idEquipo: Int, idLiga: Int) -> Unit = { _, _ -> }
) {
    Column(modifier = Modifier.fillMaxSize()) {
        TablaHeader()
        LazyColumn(
            modifier = Modifier.fillMaxSize(),
            contentPadding = PaddingValues(vertical = 16.dp)
        ) {
            items(equipos) { equipo ->
                FilaEquipo(
                    idEquipoBuscado = equipoBuscado.id,
                    equipo = equipo,
                    onClick = { onEquipoClick(equipo.id, equipo.liga.id) }
                )
            }
        }
    }
}

@Composable
fun TablaHeader() {
    Row(
        modifier = Modifier
            .fillMaxWidth()
            .background(MaterialTheme.colorScheme.surfaceVariant)
            .padding(horizontal = 16.dp, vertical = 8.dp),
        verticalAlignment = Alignment.CenterVertically
    ) {
        Spacer(modifier = Modifier.weight(1.5f))
        Text(
            text = stringResource(R.string.header_team),
            modifier = Modifier.weight(4f),
            style = MaterialTheme.typography.labelSmall,
            fontWeight = FontWeight.Bold
        )
        val headerStyle = MaterialTheme.typography.labelSmall
        val headerWeight = 1f

        Text(stringResource(R.string.header_pj), Modifier.weight(headerWeight), style = headerStyle, textAlign = TextAlign.Center)
        Text(stringResource(R.string.header_g), Modifier.weight(headerWeight), style = headerStyle, textAlign = TextAlign.Center)
        Text(stringResource(R.string.header_e), Modifier.weight(headerWeight), style = headerStyle, textAlign = TextAlign.Center)
        Text(stringResource(R.string.header_p), Modifier.weight(headerWeight), style = headerStyle, textAlign = TextAlign.Center)
        Text(stringResource(R.string.header_pt), Modifier.weight(headerWeight), style = headerStyle, textAlign = TextAlign.Center)
    }
}

@Composable
fun FilaEquipo(
    idEquipoBuscado: Int,
    equipo: Equipo,
    onClick: () -> Unit = {}
) {
    val esSeleccionado = equipo.id == idEquipoBuscado

    Row(
        modifier = Modifier
            .fillMaxWidth()
            .clickable(onClick = onClick)
            .background(if (esSeleccionado) VerdeFuerte.copy(alpha = 0.2f) else Color.Transparent)
            .padding(horizontal = 16.dp, vertical = 12.dp),
        verticalAlignment = Alignment.CenterVertically
    ) {
        Row(
            modifier = Modifier.weight(1.5f),
            verticalAlignment = Alignment.CenterVertically
        ) {
            Text(text = "${equipo.posicion}.", style = MaterialTheme.typography.bodySmall)
            Spacer(Modifier.width(4.dp))
            AsyncImage(
                model = equipo.logo,
                contentDescription = null,
                modifier = Modifier.size(24.dp)
            )
        }
        Text(
            text = equipo.nombre,
            modifier = Modifier.weight(4f),
            maxLines = 1,
            overflow = TextOverflow.Ellipsis,
            style = MaterialTheme.typography.bodyMedium,
            fontWeight = if (esSeleccionado) FontWeight.Bold else FontWeight.Normal
        )
        val statModifier = Modifier.weight(1f)
        val statStyle = MaterialTheme.typography.bodySmall
        val align = TextAlign.Center

        Text("${equipo.partidosTotales}", statModifier, style = statStyle, textAlign = align)
        Text("${equipo.victoriasTotales}", statModifier, style = statStyle, textAlign = align)
        Text("${equipo.empatesTotales}", statModifier, style = statStyle, textAlign = align)
        Text("${equipo.derrotasTotales}", statModifier, style = statStyle, textAlign = align)
        Text(
            text = "${equipo.puntos}",
            modifier = statModifier,
            style = statStyle,
            textAlign = align,
            fontWeight = FontWeight.Bold
        )
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/ui/components/ContenidoEquipoEstadisticas.kt
================================================
﻿package com.rigobertods.rdscore.ui.components

import androidx.compose.foundation.layout.PaddingValues
import androidx.compose.foundation.layout.Row
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.lazy.LazyColumn
import androidx.compose.foundation.lazy.items
import androidx.compose.material3.HorizontalDivider
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.Text
import androidx.compose.runtime.Composable
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.text.font.FontWeight
import androidx.compose.ui.text.style.TextAlign
import androidx.compose.ui.unit.dp
import androidx.compose.ui.res.stringResource
import com.rigobertods.rdscore.features.partidos.data.Equipo
import com.rigobertods.rdscore.features.partidos.data.StatItemEquipo
import com.rigobertods.rdscore.core.common.mapEquipoToStatItemsEquipo

@Composable
fun ContenidoEquipoEstadisticas (equipo: Equipo) {
    val statsList = mapEquipoToStatItemsEquipo(equipo)

    LazyColumn(
        modifier = Modifier.fillMaxSize(),
        contentPadding = PaddingValues(vertical = 16.dp)
        ) {
        items(statsList) { statItem ->
            StatRowEquipo(item = statItem)
            HorizontalDivider(modifier = Modifier.padding(horizontal = 16.dp))
        }
    }
}

@Composable
fun StatRowEquipo(item: StatItemEquipo) {
    Row(
        modifier = Modifier
            .fillMaxWidth()
            .padding(horizontal = 16.dp, vertical = 12.dp),
        verticalAlignment = Alignment.CenterVertically
    ) {
        Text(
            text = stringResource(item.labelResId),
            modifier = Modifier.weight(5f),
            textAlign = TextAlign.Start,
            style = MaterialTheme.typography.bodyLarge
        )
        Text(
            text = item.valor,
            modifier = Modifier.weight(1f),
            textAlign = TextAlign.End,
            fontWeight = FontWeight.Bold,
            color = MaterialTheme.colorScheme.onBackground)
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/ui/components/ContenidoEquipoPartidos.kt
================================================
﻿package com.rigobertods.rdscore.ui.components

import androidx.compose.foundation.clickable
import androidx.compose.foundation.layout.Box
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.Row
import androidx.compose.foundation.layout.Spacer
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.layout.size
import androidx.compose.foundation.lazy.LazyColumn
import androidx.compose.foundation.lazy.items
import androidx.compose.foundation.lazy.rememberLazyListState
import androidx.compose.foundation.shape.CircleShape
import androidx.compose.material3.HorizontalDivider
import androidx.compose.material3.Surface
import androidx.compose.material3.Text
import androidx.compose.runtime.Composable
import androidx.compose.runtime.LaunchedEffect
import androidx.compose.runtime.remember
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.res.stringResource
import androidx.compose.ui.text.font.FontWeight
import androidx.compose.ui.unit.dp
import androidx.compose.ui.unit.sp
import coil.compose.AsyncImage
import com.rigobertods.rdscore.R
import com.rigobertods.rdscore.features.partidos.data.Equipo
import com.rigobertods.rdscore.features.partidos.data.Partido

@Composable
fun ContenidoEquipoPartidos (equipoBuscado: Equipo, partidos: List<Partido>, onPartidoClick: (Int) -> Unit = {}) {
    val partidosOrdenados = remember(partidos) {
        partidos.sortedByDescending { p ->
            val pts = p.fecha.split("/")
            if (pts.size == 3) "${pts[2]}${pts[1]}${pts[0]}" else ""
        }
    }
    val listState = rememberLazyListState()
    val indiceProximo = remember(partidosOrdenados) {
        val index = partidosOrdenados.indexOfLast { it.resultado == -1 }
        if (index != -1) index else 0
    }
    LaunchedEffect(partidosOrdenados) {
        if (partidosOrdenados.isNotEmpty()) {
            listState.animateScrollToItem(indiceProximo)
        }
    }
    LazyColumn(
        state = listState,
        modifier = Modifier.fillMaxSize()
    ) {
        items(partidosOrdenados) { partido ->
            FilaPartido(
                idEquipo = equipoBuscado.id,
                partido = partido,
                onClick = { onPartidoClick(partido.idPartido) }
            )
            HorizontalDivider(modifier = Modifier.padding(horizontal = 16.dp))
        }
    }
}

@Composable
fun FilaPartido (idEquipo: Int, partido: Partido, onClick: () -> Unit) {
    Row (
        modifier = Modifier
            .fillMaxSize()
            .clickable(onClick = onClick)
            .padding(16.dp)
    ){
        Column (
            modifier = Modifier.weight(1f)
        ) {
            Text(text = "${partido.fecha}, ${partido.hora}")
            Spacer(modifier = Modifier.size(8.dp))
            Row {
                Column(
                    modifier = Modifier.weight(1f)
                ) {
                    Row(verticalAlignment = Alignment.CenterVertically) {
                        AsyncImage(
                            model = partido.estadisticasLocal.logo,
                            contentDescription = null,
                            modifier = Modifier.size(24.dp)
                        )
                        Spacer(modifier = Modifier.size(8.dp))
                        Text(text = partido.nombreEquipoLocal, fontWeight = if (partido.estadisticasLocal.id == idEquipo) FontWeight.Bold else FontWeight.Normal)
                    }
                    Spacer(modifier = Modifier.size(4.dp))
                    Row(verticalAlignment = Alignment.CenterVertically) {
                        AsyncImage(
                            model = partido.estadisticasVisitante.logo,
                            contentDescription = null,
                            modifier = Modifier.size(24.dp)
                        )
                        Spacer(modifier = Modifier.size(8.dp))
                        Text(text = partido.nombreEquipoVisitante, fontWeight = if (partido.estadisticasVisitante.id == idEquipo) FontWeight.Bold else FontWeight.Normal)
                    }
                }
                Column {
                    Row {
                        Column {
                            Text(text = if (partido.estado == "FT") "${partido.golesLocal}" else "-")
                            Text(text = if (partido.estado == "FT") "${partido.golesVisitante}" else "-")
                        }
                        Spacer(modifier = Modifier.size(8.dp))
                        Column(
                            modifier = Modifier.align(Alignment.CenterVertically)
                        ) {
                            DefinirGanador(idEquipo, partido)
                        }
                    }
                }
            }
        }
    }
}

@Composable
fun DefinirGanador (idEquipo: Int, partido: Partido) {
    // Get translated labels
    val labelWin = stringResource(R.string.form_win)
    val labelDraw = stringResource(R.string.form_draw)
    val labelLoss = stringResource(R.string.form_loss)
    
    var esLocal = false
    if (partido.estadisticasLocal.id == idEquipo) {
        esLocal = true
    } else if (partido.estadisticasVisitante.id == idEquipo) {
        esLocal = false
    }
    val resultado = partido.resultado
    val (letra, colorFondo) = when (resultado) {
        1 if esLocal -> {
            labelWin to Color(0xFF4CAF50)
        }
        2 if !esLocal -> {
            labelWin to Color(0xFF4CAF50)
        }
        0 -> {
            labelDraw to Color(0xFF9E9E9E)
        }
        -1 -> {
            "" to Color.Transparent
        }
        else -> {
            labelLoss to Color(0xFFF44336)
        }
    }
    Surface(
        modifier = Modifier
            .padding(end = 4.dp)
            .size(24.dp),
        shape = CircleShape,
        color = colorFondo
    ) {
        Box(contentAlignment = Alignment.Center) {
            Text(
                text = letra,
                color = Color.White,
                fontSize = 12.sp,
                fontWeight = FontWeight.Bold
            )
        }
    }
}




================================================
FILE: app/src/main/java/com/rigobertods/rdscore/ui/components/ContenidoEstadisticas.kt
================================================
﻿package com.rigobertods.rdscore.ui.components

import androidx.compose.foundation.layout.PaddingValues
import androidx.compose.foundation.layout.Row
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.lazy.LazyColumn
import androidx.compose.foundation.lazy.items
import androidx.compose.material3.HorizontalDivider
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.Text
import androidx.compose.runtime.Composable
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.text.font.FontWeight
import androidx.compose.ui.text.style.TextAlign
import androidx.compose.ui.unit.dp
import androidx.compose.ui.res.stringResource
import com.rigobertods.rdscore.features.partidos.data.Partido
import com.rigobertods.rdscore.features.partidos.data.StatItem
import com.rigobertods.rdscore.core.common.mapEquiposToStatItems

@Composable
fun ContenidoEstadisticas(partido: Partido) {
    val statsList = mapEquiposToStatItems(partido.estadisticasLocal, partido.estadisticasVisitante)

    LazyColumn(
        modifier = Modifier.fillMaxSize(),
        contentPadding = PaddingValues(vertical = 16.dp) // Espacio arriba y abajo
    ) {
        items(statsList) { statItem ->
            StatRow(item = statItem) // Un composable que pinta una fila
            HorizontalDivider(modifier = Modifier.padding(horizontal = 16.dp))
        }
    }
}

@Composable
fun StatRow(item: StatItem) {
    Row(
        modifier = Modifier
            .fillMaxWidth()
            .padding(horizontal = 16.dp, vertical = 12.dp),
        verticalAlignment = Alignment.CenterVertically
    ) {
        Text(text = item.valorLocal, modifier = Modifier.weight(1f), textAlign = TextAlign.Start, style = MaterialTheme.typography.bodyLarge)
        Text(text = stringResource(item.labelResId), modifier = Modifier.weight(1.5f), textAlign = TextAlign.Center, fontWeight = FontWeight.Bold, color = MaterialTheme.colorScheme.onBackground)
        Text(text = item.valorVisitante, modifier = Modifier.weight(1f), textAlign = TextAlign.End, style = MaterialTheme.typography.bodyLarge)
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/ui/components/ContenidoInformacion.kt
================================================
﻿package com.rigobertods.rdscore.ui.components

import androidx.compose.foundation.layout.Box
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.rememberScrollState
import androidx.compose.foundation.verticalScroll
import androidx.compose.runtime.Composable
import androidx.compose.ui.Modifier
import androidx.compose.ui.res.stringResource
import androidx.compose.ui.unit.dp
import com.rigobertods.rdscore.R
import com.rigobertods.rdscore.features.partidos.data.Partido

@Composable
fun ContenidoInformacion(partido: Partido) {
    Box(
        modifier = Modifier
            .fillMaxSize()
            .verticalScroll(rememberScrollState())
            .padding(horizontal = 16.dp, vertical = 16.dp)
    ) {
        Column {
            InfoRow(stringResource(R.string.info_date), partido.fecha)
            InfoRow(stringResource(R.string.info_time), partido.hora)
            InfoRow(stringResource(R.string.info_stadium), partido.estadio)
            InfoRow(stringResource(R.string.info_city), partido.ciudad)
        }
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/ui/components/ContenidoRecomendaciones.kt
================================================
﻿package com.rigobertods.rdscore.ui.components

import androidx.compose.foundation.layout.Box
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.Spacer
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.height
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.rememberScrollState
import androidx.compose.foundation.verticalScroll
import androidx.compose.material3.Card
import androidx.compose.material3.CardDefaults
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.Text
import androidx.compose.runtime.Composable
import androidx.compose.runtime.rememberCoroutineScope
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.text.font.FontWeight
import androidx.compose.ui.unit.dp
import com.rigobertods.rdscore.features.partidos.data.Partido
import androidx.compose.ui.res.stringResource
import com.rigobertods.rdscore.R
import com.rigobertods.rdscore.features.partidos.data.TipoPrediccion
import com.rigobertods.rdscore.ui.util.traducirMensajeUi
import com.rigobertods.rdscore.ui.util.traducirPrediccion
import java.util.Locale

@Composable
fun ContenidoRecomendaciones(partido: Partido) {
    val coroutineScope = rememberCoroutineScope()
    val scrollState = rememberScrollState()

    Box(
        modifier = Modifier
            .fillMaxSize()
            .verticalScroll(scrollState)
            .padding(vertical = 16.dp)
        ) {
        Column {
            // Si el partido ha finalizado, muestra el resultado de forma prominente
            if (partido.estado == "FT") {
                Card(
                    modifier = Modifier.fillMaxWidth(),
                ) {
                    Column(
                        modifier = Modifier
                            .padding(16.dp)
                            .fillMaxWidth(),
                        horizontalAlignment = Alignment.CenterHorizontally
                    ) {
                        Text(stringResource(R.string.final_result), style = MaterialTheme.typography.titleMedium)
                        Text(
                            text = "${partido.golesLocal} - ${partido.golesVisitante}",
                            style = MaterialTheme.typography.displaySmall,
                            fontWeight = FontWeight.Bold
                        )
                    }
                }
                Spacer(Modifier.height(16.dp))
            }
            // Usamos 'when' para comprobar el tipo de la predicción
            when (val tipoPred = partido.prediccion) {

                // Caso 1: La predicción es detallada (el objeto completo)
                is TipoPrediccion.Detallada -> {
                    // Dentro de este bloque, 'tipoPred.datos' es de tipo 'Prediccion' y puedes acceder a sus campos
                    val datosPrediccion = tipoPred.datos
                    
                    // Verificar si los datos internos son null (puede pasar por deserialización de Room)
                    @Suppress("SENSELESS_COMPARISON")
                    if (datosPrediccion.resultado1x2 == null || datosPrediccion.btts == null || datosPrediccion.over25 == null) {
                        Card(
                            modifier = Modifier.fillMaxWidth(),
                            colors = CardDefaults.cardColors(containerColor = MaterialTheme.colorScheme.surfaceVariant)
                        ) {
                            Text(
                                text = stringResource(R.string.error_loading_predictions),
                                modifier = Modifier.padding(16.dp),
                                style = MaterialTheme.typography.bodyLarge
                            )
                        }
                    } else {
                    PrediccionCard(
                        titulo = stringResource(R.string.winner_title),
                        textoPrincipal = traducirPrediccion(datosPrediccion.resultado1x2.prediccion),
                        probabilidadesExtra = listOf(
                            stringResource(R.string.prob_local_format, String.format(Locale.getDefault(), "%.1f", datosPrediccion.resultado1x2.probabilidades.local * 100)),
                            stringResource(R.string.prob_draw_format, String.format(Locale.getDefault(), "%.1f", datosPrediccion.resultado1x2.probabilidades.empate * 100)),
                            stringResource(R.string.prob_away_format, String.format(Locale.getDefault(), "%.1f", datosPrediccion.resultado1x2.probabilidades.visitante * 100))
                        ).joinToString("\n"),
                        // --- Pasa las cuotas de 1X2 ---
                        etiquetasCuotas = listOf("1", "X", "2"),
                        valoresCuotas = listOf(
                            partido.cuotaLocal,
                            partido.cuotaEmpate,
                            partido.cuotaVisitante
                        ),
                        // ---
                        recomendacionConservadora = datosPrediccion.resultado1x2.recomendacion.conservadora,
                        recomendacionModerada = datosPrediccion.resultado1x2.recomendacion.moderada,
                        recomendacionArriesgada = datosPrediccion.resultado1x2.recomendacion.arriesgada,
                        coroutineScope = coroutineScope,
                        scrollState = scrollState
                    )

                    Spacer(Modifier.height(16.dp))

                    // ------------------ CARD BTTS --------------------
                    val probBttsYes = String.format(Locale.getDefault(), "%.1f", datosPrediccion.btts.probabilidad * 100)
                    val probBttsNo = String.format(Locale.getDefault(), "%.1f", (1 - datosPrediccion.btts.probabilidad) * 100)
                    val textoBtts = if (datosPrediccion.btts.prediccion == "Sí") {
                        listOf(
                            stringResource(R.string.prob_btts_yes_format, probBttsYes),
                            stringResource(R.string.prob_btts_no_format, probBttsNo)
                        ).joinToString("\n")
                    } else {
                        listOf(
                            stringResource(R.string.prob_btts_yes_format, probBttsNo),
                            stringResource(R.string.prob_btts_no_format, probBttsYes)
                        ).joinToString("\n")
                    }
                    PrediccionCard(
                        titulo = stringResource(R.string.btts_title),
                        textoPrincipal = traducirPrediccion(datosPrediccion.btts.prediccion),
                        probabilidadesExtra = textoBtts,
                        // --- Pasa las cuotas de BTTS ---
                        etiquetasCuotas = listOf(stringResource(R.string.yes_label), stringResource(R.string.no_label)),
                        valoresCuotas = listOf(partido.cuotaBtts, partido.cuotaBttsNo),
                        // ---
                        recomendacionConservadora = datosPrediccion.btts.recomendacion.conservadora,
                        recomendacionModerada = datosPrediccion.btts.recomendacion.moderada,
                        recomendacionArriesgada = datosPrediccion.btts.recomendacion.arriesgada,
                        coroutineScope = coroutineScope,
                        scrollState = scrollState
                    )

                    Spacer(Modifier.height(16.dp))

                    // ------------------ CARD OVER/UNDER --------------------
                    val probOver = String.format(Locale.getDefault(), "%.1f", datosPrediccion.over25.probabilidad * 100)
                    val probUnder = String.format(Locale.getDefault(), "%.1f", (1 - datosPrediccion.over25.probabilidad) * 100)
                    val textoOver = if (datosPrediccion.over25.prediccion == "Over") {
                        listOf(
                            stringResource(R.string.prob_over_format, probOver),
                            stringResource(R.string.prob_under_format, probUnder)
                        ).joinToString("\n")
                    } else {
                        listOf(
                            stringResource(R.string.prob_over_format, probUnder),
                            stringResource(R.string.prob_under_format, probOver)
                        ).joinToString("\n")
                    }
                    PrediccionCard(
                        titulo = stringResource(R.string.over_under_title),
                        textoPrincipal = traducirPrediccion(datosPrediccion.over25.prediccion),
                        probabilidadesExtra = textoOver,
                        // --- Pasa las cuotas de Over/Under ---
                        etiquetasCuotas = listOf(stringResource(R.string.more_label), stringResource(R.string.less_label)),
                        valoresCuotas = listOf(partido.cuotaOver, partido.cuotaUnder),
                        // ---
                        recomendacionConservadora = datosPrediccion.over25.recomendacion.conservadora,
                        recomendacionModerada = datosPrediccion.over25.recomendacion.moderada,
                        recomendacionArriesgada = datosPrediccion.over25.recomendacion.arriesgada,
                        coroutineScope = coroutineScope,
                        scrollState = scrollState
                    )
                    } // End of else block for null check
                }

                // Caso 2: La predicción es un simple String
                is TipoPrediccion.Simple -> {
                    Card(
                        modifier = Modifier.fillMaxWidth(),
                        colors = CardDefaults.cardColors(containerColor = MaterialTheme.colorScheme.surfaceVariant)
                    ) {
                        Text(
                            text = traducirMensajeUi(tipoPred.mensaje),
                            modifier = Modifier.padding(16.dp),
                            style = MaterialTheme.typography.bodyLarge
                        )
                    }
                }

                // Caso 3: La predicción no está disponible
                is TipoPrediccion.NoDisponible -> {
                    Card(
                        modifier = Modifier.fillMaxWidth(),
                        colors = CardDefaults.cardColors(containerColor = MaterialTheme.colorScheme.surfaceVariant)
                    ) {
                        Text(
                            text = stringResource(R.string.prediction_not_available),
                            modifier = Modifier.padding(16.dp),
                            style = MaterialTheme.typography.bodyLarge
                        )
                    }
                }
            }
            Spacer(Modifier.height(32.dp))
        }
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/ui/components/CuotaCalienteItem.kt
================================================
﻿package com.rigobertods.rdscore.ui.components

import androidx.compose.foundation.clickable
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.Row
import androidx.compose.foundation.layout.Spacer
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.height
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.layout.size
import androidx.compose.foundation.layout.width
import androidx.compose.foundation.shape.RoundedCornerShape
import androidx.compose.material3.Card
import androidx.compose.material3.CardDefaults
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.Surface
import androidx.compose.material3.Text
import androidx.compose.runtime.Composable
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.text.font.FontWeight
import androidx.compose.ui.unit.dp
import androidx.compose.ui.unit.sp
import androidx.compose.ui.res.stringResource
import coil.compose.AsyncImage
import com.rigobertods.rdscore.R
import com.rigobertods.rdscore.features.partidos.data.CuotaCaliente
import com.rigobertods.rdscore.features.partidos.data.Partido
import com.rigobertods.rdscore.core.ui.VerdeDebil
import com.rigobertods.rdscore.core.ui.VerdeFuerte
import com.rigobertods.rdscore.core.ui.VerdeMedio
import com.rigobertods.rdscore.ui.util.traducirMercado
import com.rigobertods.rdscore.ui.util.traducirPrediccion
import java.util.Locale

@Composable
fun CuotaCalienteItem (
    onClick: () -> Unit,
    partido: Partido,
    cuotaCaliente: CuotaCaliente
) {
    val pick = cuotaCaliente.pick
    val colorBanner = VerdeFuerte
    if (pick.value >= 0.30) {
        VerdeFuerte.copy(alpha = 0.2f)
    } else if (pick.value in 0.20..<0.3){
        VerdeMedio.copy(alpha = 0.2f)
    } else if (pick.value in 0.10..<0.2) {
        VerdeDebil.copy(alpha = 0.2f)
    } else {
        MaterialTheme.colorScheme.onBackground.copy(alpha = 0.2f)
    }

    Card(
        modifier = Modifier
            .fillMaxWidth()
            .padding(horizontal = 8.dp, vertical = 4.dp)
            .clickable(onClick = onClick),
        elevation = CardDefaults.cardElevation(defaultElevation = 2.dp),
    ) {
        Column {
            Row(
                modifier = Modifier.padding(16.dp),
                verticalAlignment = Alignment.CenterVertically
            ) {
                Column(modifier = Modifier.weight(1f)) {
                    Row(
                        modifier = Modifier.fillMaxWidth()
                    ) {
                        AsyncImage(
                            model = partido.estadisticasLocal.liga.logo,
                            contentDescription = stringResource(R.string.cd_team_logo, partido.nombreEquipoLocal),
                            modifier = Modifier.size(24.dp)
                        )
                        Spacer(modifier = Modifier.width(8.dp))
                        Text(
                            text = cuotaCaliente.liga,
                            style = MaterialTheme.typography.titleMedium,
                        )

                    }
                    ContenidoFechaHora(partido)
                    // Equipo Local
                    Row(verticalAlignment = Alignment.CenterVertically) {
                        AsyncImage(
                            model = partido.estadisticasLocal.logo,
                            contentDescription = stringResource(R.string.cd_team_logo, partido.nombreEquipoLocal),
                            modifier = Modifier.size(24.dp)
                        )
                        Spacer(modifier = Modifier.width(8.dp))
                        Text(partido.nombreEquipoLocal, fontWeight = FontWeight.SemiBold, fontSize = 14.sp)
                    }
                    Spacer(modifier = Modifier.height(8.dp))
                    // Equipo Visitante
                    Row(verticalAlignment = Alignment.CenterVertically) {
                        AsyncImage(
                            model = partido.estadisticasVisitante.logo,
                            contentDescription = stringResource(R.string.cd_team_logo, partido.nombreEquipoVisitante),
                            modifier = Modifier.size(24.dp)
                        )
                        Spacer(modifier = Modifier.width(8.dp))
                        Text(partido.nombreEquipoVisitante, fontWeight = FontWeight.SemiBold, fontSize = 14.sp)
                    }
                }
            }
            Spacer(modifier = Modifier.height(8.dp))
            Text(
                text = stringResource(R.string.pick_label),
                style = MaterialTheme.typography.titleSmall,
                modifier = Modifier.padding(horizontal = 16.dp)
                )
            Column(
                modifier = Modifier.padding(16.dp)
            ) {
                Text(
                    text = stringResource(R.string.market_format, traducirMercado(pick.mercado)),
                    fontWeight = FontWeight.SemiBold,
                    fontSize = 14.sp
                )
                Text(
                    text = stringResource(R.string.prediction_format, traducirPrediccion(pick.prediccion)),
                    fontWeight = FontWeight.SemiBold,
                    fontSize = 14.sp
                )
                Text(
                    text = stringResource(R.string.odds_format, pick.cuota),
                    fontWeight = FontWeight.SemiBold,
                    fontSize = 14.sp
                )
                Text(
                    text = stringResource(R.string.probability_format, String.format(Locale.getDefault(), "%.2f", pick.prob * 100)),
                    fontWeight = FontWeight.SemiBold,
                    fontSize = 14.sp
                )
                Surface(
                    shape = RoundedCornerShape(12.dp),
                    color = colorBanner.copy(alpha = 0.2f),
                    modifier = Modifier.padding(start = 8.dp)
                ) {
                    Text(
                        text = stringResource(R.string.value_format, String.format(Locale.getDefault(), "%.2f", pick.value * 100)),
                        style = MaterialTheme.typography.labelLarge,
                        color = colorBanner,
                        fontWeight = FontWeight.Bold,
                        modifier = Modifier.padding(horizontal = 12.dp, vertical = 6.dp)
                    )
                }
            }
        }
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/ui/components/DialogoFiltros.kt
================================================
﻿package com.rigobertods.rdscore.ui.components
import androidx.compose.foundation.clickable
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.Row
import androidx.compose.foundation.layout.Spacer
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.height
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.layout.width
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.filled.ChevronLeft
import androidx.compose.material.icons.filled.ChevronRight
import androidx.compose.material.icons.outlined.FilterAlt
import androidx.compose.material3.AlertDialog
import androidx.compose.material3.Checkbox
import androidx.compose.material3.Icon
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.Tab
import androidx.compose.material3.PrimaryTabRow
import androidx.compose.material3.TabRowDefaults
import androidx.compose.material3.Text
import androidx.compose.material3.TextButton
import androidx.compose.runtime.Composable
import androidx.compose.runtime.getValue
import androidx.compose.runtime.mutableIntStateOf
import androidx.compose.runtime.mutableStateOf
import androidx.compose.runtime.remember
import androidx.compose.runtime.setValue
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.res.stringResource
import androidx.compose.ui.unit.dp
import androidx.compose.ui.unit.sp
import com.rigobertods.rdscore.R

@Composable
fun DialogoFiltros(
    filtroState: FiltroState,
    onDismiss: () -> Unit,
    onAplicarFiltros: (FiltroState) -> Unit
) {
    var modoAvanzado by remember { mutableStateOf(false) }
    var estadoTemporal by remember { mutableStateOf(filtroState) }
    var tabSeleccionada by remember { mutableIntStateOf(0) }
    val titulosTabs = listOf(
        stringResource(R.string.tab_conservative),
        stringResource(R.string.tab_moderate),
        stringResource(R.string.tab_aggressive)
    )

    AlertDialog(
        onDismissRequest = onDismiss,
        title = {
            Row(verticalAlignment = Alignment.CenterVertically) {
                Text(if (modoAvanzado) stringResource(R.string.advanced_filters) else stringResource(R.string.quick_filters))
            }
        },
        text = {
            Column (
                modifier = Modifier.fillMaxWidth()
            ) {
                if (!modoAvanzado) {
                    // Botón para IR a la vista avanzada
                    TextButton(
                        onClick = { modoAvanzado = true },
                        modifier = Modifier.fillMaxWidth()
                    ) {
                        Icon(
                            imageVector = Icons.Outlined.FilterAlt,
                            contentDescription = stringResource(R.string.advanced_filters),
                            tint = MaterialTheme.colorScheme.onBackground
                        )
                        Spacer(Modifier.width(20.dp))
                        Text(
                            modifier = Modifier.weight(1f),
                            text = stringResource(R.string.open_advanced_filters),
                            style = MaterialTheme.typography.bodyLarge,
                            color = MaterialTheme.colorScheme.onBackground
                        )
                        Icon(
                            imageVector = Icons.Default.ChevronRight,
                            contentDescription = stringResource(R.string.open_advanced_filters),
                            tint = MaterialTheme.colorScheme.onBackground
                        )
                    }
                    FilaFiltro(
                        texto = stringResource(R.string.select_deselect_all),
                        seleccionado = estadoTemporal.esTodoMarcado(),
                        onCheckedChange = {
                            estadoTemporal = if (it) {
                                estadoTemporal.marcarTodo()
                            } else {
                                estadoTemporal.desmarcarTodo()
                            }
                        }
                    )
                    FilaFiltro(
                        texto = stringResource(R.string.result_1x2),
                        seleccionado = estadoTemporal.esSoloResultadoMarcado(),
                        onCheckedChange = {
                            estadoTemporal = if (it) {
                                estadoTemporal.marcarSoloResultado()
                            } else {
                                estadoTemporal.desmarcarSoloResultado()
                            }
                        }
                    )
                    FilaFiltro(
                        texto = stringResource(R.string.both_teams_score),
                        seleccionado = estadoTemporal.esSoloBTTSMarcado(),
                        onCheckedChange = {
                            estadoTemporal = if (it) {
                                estadoTemporal.marcarSoloBTTS()
                            } else {
                                estadoTemporal.desmarcarSoloBTTS()
                            }
                        }
                    )
                    FilaFiltro(
                        texto = stringResource(R.string.over_under_25),
                        seleccionado = estadoTemporal.esSoloOverUnderMarcado(),
                        onCheckedChange = {
                            estadoTemporal = if (it) {
                                estadoTemporal.marcarSoloOverUnder()
                            } else {
                                estadoTemporal.desmarcarSoloOverUnder()
                            }
                        }
                    )
                } else {
                    TextButton(
                        onClick = { modoAvanzado = false },
                        modifier = Modifier.fillMaxWidth()
                    ) {
                        Icon(
                            imageVector = Icons.Outlined.FilterAlt,
                            contentDescription = stringResource(R.string.quick_filters),
                            tint = MaterialTheme.colorScheme.onBackground
                        )
                        Spacer(Modifier.width(20.dp))
                        Text(
                            modifier = Modifier.weight(1f),
                            text = stringResource(R.string.back_to_quick_filters),
                            style = MaterialTheme.typography.bodyLarge,
                            color = MaterialTheme.colorScheme.onBackground
                        )
                        Icon(
                            imageVector = Icons.Default.ChevronLeft,
                            contentDescription = stringResource(R.string.back_to_quick_filters),
                            tint = MaterialTheme.colorScheme.onBackground
                        )
                    }
                    // Selector de pestañas por Modelo
                    PrimaryTabRow(
                        selectedTabIndex = tabSeleccionada,
                        containerColor = Color.Transparent,
                        contentColor = MaterialTheme.colorScheme.onBackground,
                        indicator = {
                            TabRowDefaults.SecondaryIndicator(
                                modifier = Modifier.tabIndicatorOffset(tabSeleccionada),
                                height = 3.dp,
                                color = MaterialTheme.colorScheme.onBackground
                            )
                        }
                    ) {
                        titulosTabs.forEachIndexed { index, titulo ->
                            Tab(
                                selected = tabSeleccionada == index,
                                onClick = { tabSeleccionada = index },
                                text = { Text(titulo, fontSize = 12.sp) }
                            )
                        }
                    }
                    Spacer(modifier = Modifier.height(8.dp))
                    // Contenido filtrado por la pestaña seleccionada
                    Column {
                        when (tabSeleccionada) {
                            0 -> { // Conservador
                                FilaFiltro(
                                    texto = stringResource(R.string.result_1x2),
                                    seleccionado = estadoTemporal.resultadoConservador,
                                    onCheckedChange = { estadoTemporal = estadoTemporal.copy(resultadoConservador = it) }
                                )
                                FilaFiltro(
                                    texto = stringResource(R.string.both_teams_score),
                                    seleccionado = estadoTemporal.bttsConservador,
                                    onCheckedChange = { estadoTemporal = estadoTemporal.copy(bttsConservador = it) }
                                )
                                FilaFiltro(
                                    texto = stringResource(R.string.over_under_25),
                                    seleccionado = estadoTemporal.overUnderConservador,
                                    onCheckedChange = { estadoTemporal = estadoTemporal.copy(overUnderConservador = it) }
                                )
                            }
                            1 -> { // Moderado
                                FilaFiltro(
                                    texto = stringResource(R.string.result_1x2),
                                    seleccionado = estadoTemporal.resultadoModerado,
                                    onCheckedChange = { estadoTemporal = estadoTemporal.copy(resultadoModerado = it) }
                                )
                                FilaFiltro(
                                    texto = stringResource(R.string.both_teams_score),
                                    seleccionado = estadoTemporal.bttsModerado,
                                    onCheckedChange = { estadoTemporal = estadoTemporal.copy(bttsModerado = it) }
                                )
                                FilaFiltro(
                                    texto = stringResource(R.string.over_under_25),
                                    seleccionado = estadoTemporal.overUnderModerado,
                                    onCheckedChange = { estadoTemporal = estadoTemporal.copy(overUnderModerado = it) }
                                )
                            }
                            2 -> { // Arriesgado
                                FilaFiltro(
                                    texto = stringResource(R.string.result_1x2),
                                    seleccionado = estadoTemporal.resultadoAgresivo,
                                    onCheckedChange = { estadoTemporal = estadoTemporal.copy(resultadoAgresivo = it) }
                                )
                                FilaFiltro(
                                    texto = stringResource(R.string.both_teams_score),
                                    seleccionado = estadoTemporal.bttsAgresivo,
                                    onCheckedChange = { estadoTemporal = estadoTemporal.copy(bttsAgresivo = it) }
                                )
                                FilaFiltro(
                                    texto = stringResource(R.string.over_under_25),
                                    seleccionado = estadoTemporal.overUnderAgresivo,
                                    onCheckedChange = { estadoTemporal = estadoTemporal.copy(overUnderAgresivo = it) }
                                )
                            }
                        }
                    }
                }
            }
        },
        confirmButton = {
            TextButton(onClick = { onAplicarFiltros(estadoTemporal) }) {
                Text(stringResource(R.string.apply), color = MaterialTheme.colorScheme.onBackground)
            }
        },
        dismissButton = {
            TextButton(onClick = onDismiss) {
                Text(stringResource(R.string.cancel), color = MaterialTheme.colorScheme.onBackground)
            }
        }
    )
}

@Composable
fun FilaFiltro(texto: String, seleccionado: Boolean, onCheckedChange: (Boolean) -> Unit) {
    Row(
        verticalAlignment = Alignment.CenterVertically,
        modifier = Modifier
            .clickable { onCheckedChange(!seleccionado) }
            .fillMaxWidth()
            .padding(vertical = 4.dp)
    ) {
        Checkbox(checked = seleccionado, onCheckedChange = onCheckedChange)
        Spacer(Modifier.width(8.dp))
        Text(texto, style = MaterialTheme.typography.bodyLarge)
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/ui/components/EquipoLogoYNombre.kt
================================================
﻿package com.rigobertods.rdscore.ui.components

import androidx.compose.foundation.clickable
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.Spacer
import androidx.compose.foundation.layout.height
import androidx.compose.foundation.layout.size
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.Text
import androidx.compose.runtime.Composable
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.unit.dp
import coil.compose.AsyncImage

@Composable
fun EquipoLogoYNombre(url: String, nombre: String, onIconClick: () -> Unit = {}) {
    Column(
        horizontalAlignment = Alignment.CenterHorizontally,
        modifier = Modifier.clickable(onClick = onIconClick)
    ) {
        AsyncImage(
            model = url,
            contentDescription = nombre,
            modifier = Modifier.size(90.dp).align(Alignment.CenterHorizontally)
        )
        Spacer(Modifier.height(8.dp))
        Text(
            text = nombre,
            style = MaterialTheme.typography.bodyMedium,
            modifier = Modifier.align(Alignment.CenterHorizontally),
            maxLines = 2
        )
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/ui/components/FiltroState.kt
================================================
﻿package com.rigobertods.rdscore.ui.components

import android.os.Parcelable
import kotlinx.parcelize.Parcelize

@Parcelize
data class FiltroState(
    val resultadoConservador: Boolean = false,
    val resultadoModerado: Boolean = false,
    val resultadoAgresivo: Boolean = false,
    val bttsConservador: Boolean = false,
    val bttsModerado: Boolean = false,
    val bttsAgresivo: Boolean = false,
    val overUnderConservador: Boolean = false,
    val overUnderModerado: Boolean = false,
    val overUnderAgresivo: Boolean = false
) : Parcelable {
    val algunFiltroActivo: Boolean
        get() = resultadoConservador || resultadoModerado || resultadoAgresivo ||
                bttsConservador || bttsModerado || bttsAgresivo ||
                overUnderConservador || overUnderModerado || overUnderAgresivo

    fun marcarTodo(): FiltroState {
        return copy(
            resultadoConservador = true, resultadoModerado = true, resultadoAgresivo = true,
            bttsConservador = true, bttsModerado = true, bttsAgresivo = true,
            overUnderConservador = true, overUnderModerado = true, overUnderAgresivo = true
        )
    }

    fun desmarcarTodo(): FiltroState {
        return copy(
            resultadoConservador = false, resultadoModerado = false, resultadoAgresivo = false,
            bttsConservador = false, bttsModerado = false, bttsAgresivo = false,
            overUnderConservador = false, overUnderModerado = false, overUnderAgresivo = false
        )
    }

    fun esTodoMarcado(): Boolean {
        return resultadoConservador && resultadoModerado && resultadoAgresivo &&
                bttsConservador && bttsModerado && bttsAgresivo &&
                overUnderConservador && overUnderModerado && overUnderAgresivo
    }

    fun marcarSoloResultado(): FiltroState {
        return copy(
            resultadoConservador = true, resultadoModerado = true, resultadoAgresivo = true
        )
    }

    fun desmarcarSoloResultado(): FiltroState {
        return copy(
            resultadoConservador = false, resultadoModerado = false, resultadoAgresivo = false
        )
    }

    fun esSoloResultadoMarcado(): Boolean {
        return resultadoConservador && resultadoModerado && resultadoAgresivo
    }

    fun marcarSoloBTTS(): FiltroState {
        return copy(
            bttsConservador = true, bttsModerado = true, bttsAgresivo = true
        )
    }

    fun desmarcarSoloBTTS(): FiltroState {
        return copy(
            bttsConservador = false, bttsModerado = false, bttsAgresivo = false
        )
    }

    fun esSoloBTTSMarcado(): Boolean {
        return bttsConservador && bttsModerado && bttsAgresivo
    }

    fun marcarSoloOverUnder(): FiltroState {
        return copy(
            overUnderConservador = true, overUnderModerado = true, overUnderAgresivo = true
        )
    }

    fun desmarcarSoloOverUnder(): FiltroState {
        return copy(
            overUnderConservador = false, overUnderModerado = false, overUnderAgresivo = false
        )
    }

    fun esSoloOverUnderMarcado(): Boolean {
        return overUnderConservador && overUnderModerado && overUnderAgresivo
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/ui/components/InfoDialog.kt
================================================
﻿package com.rigobertods.rdscore.ui.components

import androidx.compose.material3.AlertDialog
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.Text
import androidx.compose.material3.TextButton
import androidx.compose.runtime.Composable
import androidx.compose.ui.res.stringResource
import com.rigobertods.rdscore.R

@Composable
fun InfoDialog(
    show: Boolean,
    onDismiss: () -> Unit
) {
    if (show) {
        AlertDialog(
            onDismissRequest = onDismiss,
            title = {
                Text(stringResource(R.string.info_recommendations))
            },
            text = {
                Text(stringResource(R.string.info_dialog_message))
            },
            confirmButton = {
                TextButton(onClick = onDismiss) {
                    Text(stringResource(R.string.understood), color = MaterialTheme.colorScheme.onBackground)
                }
            }
        )
    }
}




================================================
FILE: app/src/main/java/com/rigobertods/rdscore/ui/components/InfoRow.kt
================================================
﻿package com.rigobertods.rdscore.ui.components

import androidx.compose.foundation.layout.Arrangement
import androidx.compose.foundation.layout.Row
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.padding
import androidx.compose.material3.Text
import androidx.compose.runtime.Composable
import androidx.compose.ui.Modifier
import androidx.compose.ui.text.font.FontWeight
import androidx.compose.ui.unit.dp

@Composable
fun InfoRow(label: String, value: String) {
    Row(
        modifier = Modifier
            .fillMaxWidth()
            .padding(vertical = 4.dp),
        horizontalArrangement = Arrangement.SpaceBetween
    ) {
        Text(label, fontWeight = FontWeight.Bold)
        Text(value)
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/ui/components/LanguageSelectorDialog.kt
================================================
package com.rigobertods.rdscore.ui.components

import androidx.compose.foundation.clickable
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.Row
import androidx.compose.foundation.layout.Spacer
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.layout.width
import androidx.compose.material3.AlertDialog
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.RadioButton
import androidx.compose.material3.RadioButtonDefaults
import androidx.compose.material3.Text
import androidx.compose.material3.TextButton
import androidx.compose.runtime.Composable
import androidx.compose.runtime.getValue
import androidx.compose.runtime.mutableStateOf
import androidx.compose.runtime.remember
import androidx.compose.runtime.setValue
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.res.stringResource
import androidx.compose.ui.text.font.FontWeight
import androidx.compose.ui.unit.dp
import androidx.compose.ui.unit.sp
import com.rigobertods.rdscore.R
import com.rigobertods.rdscore.core.common.LanguageInfo

@Composable
fun LanguageSelectorDialog(
    currentLanguage: String,
    languages: List<LanguageInfo>,
    onLanguageSelected: (String) -> Unit,
    onDismiss: () -> Unit
) {
    var selectedLanguage by remember { mutableStateOf(currentLanguage) }

    AlertDialog(
        onDismissRequest = onDismiss,
        title = {
            Text(
                text = stringResource(R.string.select_language),
                fontWeight = FontWeight.Bold
            )
        },
        text = {
            Column {
                languages.forEach { language ->
                    Row(
                        modifier = Modifier
                            .fillMaxWidth()
                            .clickable { selectedLanguage = language.code }
                            .padding(vertical = 12.dp),
                        verticalAlignment = Alignment.CenterVertically
                    ) {
                        RadioButton(
                            selected = selectedLanguage == language.code,
                            onClick = { selectedLanguage = language.code },
                            colors = RadioButtonDefaults.colors(
                                selectedColor = MaterialTheme.colorScheme.onBackground,
                                unselectedColor = MaterialTheme.colorScheme.onBackground.copy(alpha = 0.6f)
                            )

                        )
                        Spacer(modifier = Modifier.width(8.dp))
                        Text(
                            text = language.flag,
                            fontSize = 24.sp
                        )
                        Spacer(modifier = Modifier.width(12.dp))
                        Text(
                            text = language.displayName,
                            style = MaterialTheme.typography.bodyLarge
                        )
                    }
                }
            }
        },
        confirmButton = {
            TextButton(
                onClick = {
                    onLanguageSelected(selectedLanguage)
                    onDismiss()
                }
            ) {
                Text(
                    text = stringResource(R.string.ok),
                    color = MaterialTheme.colorScheme.onBackground
                )
            }
        },
        dismissButton = {
            TextButton(onClick = onDismiss) {
                Text(
                    text = stringResource(R.string.cancel),
                    color = MaterialTheme.colorScheme.onBackground
                )
            }
        }
    )
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/ui/components/PaginaDePartidos.kt
================================================
﻿package com.rigobertods.rdscore.ui.components

import androidx.compose.foundation.layout.Box
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.lazy.LazyColumn
import androidx.compose.foundation.lazy.rememberLazyListState
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.Tab
import androidx.compose.material3.PrimaryTabRow
import androidx.compose.material3.TabRowDefaults
import androidx.compose.material3.Text
import androidx.compose.runtime.Composable
import androidx.compose.runtime.LaunchedEffect
import androidx.compose.runtime.rememberCoroutineScope
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.unit.dp
import androidx.compose.ui.unit.sp
import com.rigobertods.rdscore.features.partidos.data.Partido
import com.rigobertods.rdscore.features.partidos.data.TipoPrediccion
import kotlinx.coroutines.launch
import java.time.LocalDate
import androidx.compose.ui.res.stringResource
import com.rigobertods.rdscore.R
import com.rigobertods.rdscore.features.ligas.data.Liga

@Composable
fun PaginaDePartidos(
    filtrosActivos: FiltroState,
    fecha: LocalDate,
    partidos: List<Partido>,
    leagues: Map<Int, Liga>,
    isMatchesLoaded: Boolean,
    onFetchMatches: (LocalDate) -> Unit,
    onPartidoClick: (Partido) -> Unit,
    ligasExpandidas: Set<Int>,
    onLigaToggle: (Int) -> Unit,
    tabSeleccionada: Int,
    onTabSelected: (Int) -> Unit
) {
    val listState = rememberLazyListState()
    val coroutineScope = rememberCoroutineScope()
    // var tabSeleccionada by remember { mutableIntStateOf(0) } // Hoisted to parent
    val titulosTabs = listOf(
        stringResource(R.string.market_winner),
        stringResource(R.string.market_btts),
        stringResource(R.string.market_over_under)
    )

    // LaunchedEffect para solicitar datos si no están cargados.
    LaunchedEffect(fecha) {
        if (!isMatchesLoaded) {
            onFetchMatches(fecha)
        }
    }

    if (!isMatchesLoaded) {
        Box(modifier = Modifier.fillMaxSize()) {}
    } else {
        val partidosFiltrados = if (!filtrosActivos.algunFiltroActivo) {
            partidos
        } else {
            partidos.filter { partido ->
                (partido.prediccion as? TipoPrediccion.Detallada)?.let { det ->
                    val pasaFiltroResultadoConservador = filtrosActivos.resultadoConservador && det.datos.resultado1x2.recomendacion.conservadora == 1
                    val pasaFiltroResultadoModerado = filtrosActivos.resultadoModerado && det.datos.resultado1x2.recomendacion.moderada == 1
                    val pasaFiltroResultadoAgresivo = filtrosActivos.resultadoAgresivo && det.datos.resultado1x2.recomendacion.arriesgada == 1
                    val pasaFiltroBttsConservador = filtrosActivos.bttsConservador && det.datos.btts.recomendacion.conservadora == 1
                    val pasaFiltroBttsModerado = filtrosActivos.bttsModerado && det.datos.btts.recomendacion.moderada == 1
                    val pasaFiltroBttsAgresivo = filtrosActivos.bttsAgresivo && det.datos.btts.recomendacion.arriesgada == 1
                    val pasaFiltroOverUnderConservador = filtrosActivos.overUnderConservador && det.datos.over25.recomendacion.conservadora == 1
                    val pasaFiltroOverUnderModerado = filtrosActivos.overUnderModerado && det.datos.over25.recomendacion.moderada == 1
                    val pasaFiltroOverUnderAgresivo = filtrosActivos.overUnderAgresivo && det.datos.over25.recomendacion.arriesgada == 1
                    pasaFiltroResultadoConservador || pasaFiltroResultadoModerado || pasaFiltroResultadoAgresivo ||
                            pasaFiltroBttsConservador || pasaFiltroBttsModerado || pasaFiltroBttsAgresivo ||
                            pasaFiltroOverUnderConservador || pasaFiltroOverUnderModerado || pasaFiltroOverUnderAgresivo
                } ?: false
            }
        }

        val partidosAgrupados = partidosFiltrados.groupBy { it.idLiga }
        
        // Orden de ligas por importancia (las más importantes primero)
        val ordenLigas = listOf(
            2,   // Champions League
            3,   // Europa League
            848, // Conference League
            140, // La Liga
            141, // La Liga 2
            39,  // Premier League
            40,  // Championship
            78,  // Bundesliga
            79,  // 2. Bundesliga
            135, // Serie A
            136, // Serie B
            61,  // Ligue 1
            62,  // Ligue 2
            88,  // Eredivisie
            94,  // Liga Portugal
            203, // Süper Lig
            71,  // Serie A Brasil
            128, // Liga Profesional Argentina
            253, // Major League Soccer
            262  // Liga MX
        )
        
        // Ordenar las claves de las ligas según la prioridad.
        // Ligas que no estén en la lista aparecerán al final (Int.MAX_VALUE).
        val leagueKeys = partidosAgrupados.keys.sortedBy { idLiga ->
            val index = ordenLigas.indexOf(idLiga)
            if (index != -1) index else Int.MAX_VALUE
        }

        Column(
            modifier = Modifier.fillMaxSize()
        ) {
            PrimaryTabRow (
                selectedTabIndex = tabSeleccionada,
                containerColor = Color.Transparent,
                contentColor = MaterialTheme.colorScheme.onBackground,
                indicator = {
                    TabRowDefaults.SecondaryIndicator(
                        modifier = Modifier.tabIndicatorOffset(tabSeleccionada),
                        height = 3.dp,
                        color = MaterialTheme.colorScheme.onBackground
                    )
                }
            ) {
                titulosTabs.forEachIndexed { index, titulo ->
                    Tab(
                        selected = tabSeleccionada == index,
                        onClick = { onTabSelected(index) },
                        text = { Text(titulo, fontSize = 12.sp) }
                    )
                }
            }

            LazyColumn(
                modifier = Modifier.fillMaxSize(),
                state = listState
            ) {
                if (partidosAgrupados.isEmpty()) {
                    item {
                        Box(modifier = Modifier.fillParentMaxSize(), contentAlignment = Alignment.Center) {
                            Text(stringResource(R.string.no_matches_selected_date), modifier = Modifier.padding(16.dp))
                        }
                    }
                } else {
                    leagueKeys.forEach { idLiga ->
                        val partidosDeLaLiga = partidosAgrupados[idLiga]!!
                        val ligaInfo = leagues[idLiga]

                        item(key = "header-$idLiga") {
                            CabeceraLiga(
                                partido = partidosDeLaLiga.first(),
                                ligaInfo = ligaInfo,
                                pagina = tabSeleccionada,
                                estaExpandida = ligasExpandidas.contains(idLiga),
                                onClick = {
                                    val estabaExpandida = idLiga in ligasExpandidas
                                    val esExpandiendo = !estabaExpandida

                                    onLigaToggle(idLiga)

                                    if (esExpandiendo) {
                                        coroutineScope.launch {
                                            val index = leagueKeys.indexOf(idLiga)
                                            if (index != -1) {
                                                listState.animateScrollToItem(index)
                                            }
                                        }
                                    }
                                },
                                partidosDeLaLiga = partidosDeLaLiga,
                                onPartidoClick = onPartidoClick
                            )
                        }
                    }
                }
            }
        }
    }
}




================================================
FILE: app/src/main/java/com/rigobertods/rdscore/ui/components/PaginaResumen.kt
================================================
﻿package com.rigobertods.rdscore.ui.components

import androidx.compose.foundation.ExperimentalFoundationApi
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.pager.HorizontalPager
import androidx.compose.foundation.pager.rememberPagerState
import androidx.compose.material3.Card
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.Tab
import androidx.compose.material3.PrimaryTabRow
import androidx.compose.material3.TabRowDefaults
import androidx.compose.material3.Text
import androidx.compose.runtime.Composable
import androidx.compose.runtime.rememberCoroutineScope
import androidx.compose.ui.Modifier
import androidx.compose.ui.res.stringResource
import com.rigobertods.rdscore.R
import androidx.compose.ui.unit.dp
import com.rigobertods.rdscore.features.partidos.data.Resumen
import com.rigobertods.rdscore.features.partidos.data.ResumenMercado
import kotlinx.coroutines.launch

@OptIn(ExperimentalFoundationApi::class)
@Composable
fun PaginaResumen(
    resumen: Resumen,
    resumenMercado: ResumenMercado
) {
    val models = listOf(
        stringResource(R.string.model_conservative),
        stringResource(R.string.model_moderate),
        stringResource(R.string.model_aggressive)
    )
    val mercados = listOf(
        stringResource(R.string.market_winner),
        stringResource(R.string.market_btts),
        stringResource(R.string.market_over_under)
    )

    val pagerState = rememberPagerState(
        initialPage = 1,
        pageCount = { models.size }
    )
    val pagerStateMercado = rememberPagerState(
        initialPage = 0,
        pageCount = { mercados.size }
    )
    val coroutineScope = rememberCoroutineScope()

    Text(
        text = stringResource(R.string.summary_title),
        style = MaterialTheme.typography.titleSmall,
        modifier = Modifier.padding(16.dp)
    )
    Card(
        modifier = Modifier
            .fillMaxWidth()
            .padding(8.dp)
    ) {
        Column {
            PrimaryTabRow(
                selectedTabIndex = pagerState.currentPage,
                contentColor = MaterialTheme.colorScheme.onBackground,
                containerColor = MaterialTheme.colorScheme.surfaceVariant,
                indicator = {
                    TabRowDefaults.SecondaryIndicator(
                        modifier = Modifier.tabIndicatorOffset(pagerState.currentPage),
                        height = 3.dp,
                        color = MaterialTheme.colorScheme.onBackground
                    )
                }
            ) {
                models.forEachIndexed { index, title ->
                    Tab(
                        selected = pagerState.currentPage == index,
                        onClick = {
                            coroutineScope.launch {
                                pagerState.animateScrollToPage(index)
                            }
                        },
                        text = {
                            Text(
                                text = title,
                                style = MaterialTheme.typography.bodyMedium
                            )
                        }
                    )
                }
            }
            HorizontalPager(
                state = pagerState,
                modifier = Modifier
                    .fillMaxWidth()
            ) { page ->
                when (page) {
                    0 -> ResumenModeloRow(resumen.partidosTotales, false, stringResource(R.string.summary_model_format, models[0]), resumen.modeloConservador)
                    1 -> ResumenModeloRow(resumen.partidosTotales, false, stringResource(R.string.summary_model_format, models[1]), resumen.modeloModerado)
                    else -> ResumenModeloRow(resumen.partidosTotales, false, stringResource(R.string.summary_model_format, models[2]), resumen.modeloArriesgado)
                }
            }
            PrimaryTabRow(
                selectedTabIndex = pagerStateMercado.currentPage,
                contentColor = MaterialTheme.colorScheme.onBackground,
                containerColor = MaterialTheme.colorScheme.surfaceVariant,
                indicator = {
                    TabRowDefaults.SecondaryIndicator(
                        modifier = Modifier.tabIndicatorOffset(pagerStateMercado.currentPage),
                        height = 3.dp,
                        color = MaterialTheme.colorScheme.onBackground
                    )
                }
            ) {
                mercados.forEachIndexed { index, title ->
                    Tab(
                        selected = pagerStateMercado.currentPage == index,
                        onClick = {
                            coroutineScope.launch {
                                pagerStateMercado.animateScrollToPage(index)
                            }
                        },
                        text = {
                            Text(
                                text = title,
                                style = MaterialTheme.typography.bodyMedium
                            )
                        }
                    )
                }
            }
            HorizontalPager(
                state = pagerStateMercado,
                modifier = Modifier
                    .fillMaxWidth()
            ) { page ->
                when (page) {
                    0 ->
                        when (pagerState.currentPage) {
                            0 -> {
                                ResumenModeloRow(
                                    resumen.partidosTotales,
                                    false,
                    stringResource(R.string.summary_market_format, mercados[0]),
                                    resumenMercado.resultado.conservador
                                )
                            }
                            1 -> {
                                ResumenModeloRow(
                                    resumen.partidosTotales,
                                    false,
                    stringResource(R.string.summary_market_format, mercados[0]),
                                    resumenMercado.resultado.moderado
                                )
                            }
                            else -> {
                                ResumenModeloRow(
                                    resumen.partidosTotales,
                                    false,
                    stringResource(R.string.summary_market_format, mercados[0]),
                                    resumenMercado.resultado.agresivo
                                )
                            }
                        }
                    1 ->
                        when (pagerState.currentPage) {
                            0 -> {
                                ResumenModeloRow(
                                    resumen.partidosTotales,
                                    false,
                    stringResource(R.string.summary_market_format, mercados[1]),
                                    resumenMercado.btts.conservador
                                )
                            }
                            1 -> {
                                ResumenModeloRow(
                                    resumen.partidosTotales,
                                    false,
                    stringResource(R.string.summary_market_format, mercados[1]),
                                    resumenMercado.btts.moderado
                                )
                            }
                            else -> {
                                ResumenModeloRow(
                                    resumen.partidosTotales,
                                    false,
                    stringResource(R.string.summary_market_format, mercados[1]),
                                    resumenMercado.btts.agresivo
                                )
                            }
                        }
                    else ->
                        when (pagerState.currentPage) {
                            0 -> {
                                ResumenModeloRow(
                                    resumen.partidosTotales,
                                    false,
                    stringResource(R.string.summary_market_format, mercados[2]),
                                    resumenMercado.over.conservador
                                )
                            }
                            1 -> {
                                ResumenModeloRow(
                                    resumen.partidosTotales,
                                    false,
                    stringResource(R.string.summary_market_format, mercados[2]),
                                    resumenMercado.over.moderado
                                )
                            }
                            else -> {

                                ResumenModeloRow(

                                    resumen.partidosTotales,
                                    false,
                    stringResource(R.string.summary_market_format, mercados[2]),
                                    resumenMercado.over.agresivo
                                )
                            }
                        }
                }
            }
        }
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/ui/components/PartidoItem.kt
================================================
﻿package com.rigobertods.rdscore.ui.components

import androidx.compose.foundation.clickable
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.Row
import androidx.compose.foundation.layout.Spacer
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.height
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.layout.size
import androidx.compose.foundation.layout.width
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.filled.Check
import androidx.compose.material.icons.filled.Close
import androidx.compose.material3.Card
import androidx.compose.material3.CardDefaults
import androidx.compose.material3.Icon
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.Text
import androidx.compose.runtime.Composable
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.text.font.FontWeight
import androidx.compose.ui.unit.dp
import androidx.compose.ui.unit.sp
import androidx.compose.ui.res.stringResource
import com.rigobertods.rdscore.R
import coil.compose.AsyncImage
import com.rigobertods.rdscore.features.partidos.data.Partido
import com.rigobertods.rdscore.features.partidos.data.TipoPrediccion
import com.rigobertods.rdscore.features.partidos.util.PredictionHelper
import com.rigobertods.rdscore.ui.util.DateUtils
import com.rigobertods.rdscore.ui.util.traducirPrediccion
import java.util.Locale

@Composable
fun PartidoItem(
    partido: Partido,
    pagina: Int,
    onClick: () -> Unit
) {
    Card(
        modifier = Modifier
            .fillMaxWidth()
            .padding(horizontal = 8.dp, vertical = 8.dp)
            .clickable(onClick = onClick),
        elevation = CardDefaults.cardElevation(defaultElevation = 2.dp),
        colors = CardDefaults.cardColors(
            containerColor = MaterialTheme.colorScheme.surfaceVariant
        )
    )
     {
        Row(
            modifier = Modifier
                .fillMaxWidth()
                .padding(16.dp),
            verticalAlignment = Alignment.CenterVertically
        ) {
            // --- Columna Izquierda: Equipos ---
            Column(modifier = Modifier.weight(1f)) {
                ContenidoFechaHora(partido)
                // Equipo Local
                Row(verticalAlignment = Alignment.CenterVertically) {
                    AsyncImage(
                        model = partido.estadisticasLocal.logo,
                        contentDescription = stringResource(R.string.cd_team_logo, partido.nombreEquipoLocal),
                        modifier = Modifier.size(24.dp)
                    )
                    Spacer(modifier = Modifier.width(8.dp))
                    Text(partido.nombreEquipoLocal, fontWeight = FontWeight.SemiBold, fontSize = 14.sp)
                }
                Spacer(modifier = Modifier.height(8.dp))
                // Equipo Visitante
                Row(verticalAlignment = Alignment.CenterVertically) {
                    AsyncImage(
                        model = partido.estadisticasVisitante.logo,
                        contentDescription = stringResource(R.string.cd_team_logo, partido.nombreEquipoVisitante),
                        modifier = Modifier.size(24.dp)
                    )
                    Spacer(modifier = Modifier.width(8.dp))
                    Text(partido.nombreEquipoVisitante, fontWeight = FontWeight.SemiBold, fontSize = 14.sp)
                }
            }

            // --- Columna Derecha: Contenido Dinámico (Unificado V2) ---
            Column(horizontalAlignment = Alignment.CenterHorizontally) {
                // Si el partido ha terminado, mostramos el resultado arriba
                if (partido.estado == "FT") {
                    ContenidoResultadoFinal(partido)
                    Spacer(modifier = Modifier.height(8.dp))
                }

                // Si hay predicción detallada, la mostramos SIEMPRE (futuro o pasado)
                if (partido.prediccion is TipoPrediccion.Detallada) {
                    ContenidoPrediccion(partido, partido.prediccion, pagina)
                } else if (partido.estado != "FT") {
                    // Si no es FT y no hay predicción, mostramos el mensaje de "No hay predicción"
                    Text(stringResource(R.string.no_predictions), style = MaterialTheme.typography.bodySmall)
                }
            }
        }
    }
}

@Composable
fun ContenidoResultadoFinal(partido: Partido) {
    Column(horizontalAlignment = Alignment.CenterHorizontally) {
        Text(stringResource(R.string.finished), style = MaterialTheme.typography.labelSmall, color = Color.Red)
        Spacer(modifier = Modifier.height(2.dp))
        Text(
            text = "${partido.golesLocal} - ${partido.golesVisitante}",
            style = MaterialTheme.typography.titleMedium,
            fontWeight = FontWeight.Bold
        )
    }
}

@Composable
fun ContenidoPrediccion(partido: Partido, prediccion: TipoPrediccion.Detallada, pagina: Int) {
    val acierto = PredictionHelper.verificarAcierto(partido, pagina)

    Column(horizontalAlignment = Alignment.CenterHorizontally) {
        Text(stringResource(R.string.prediction), style = MaterialTheme.typography.labelSmall)
        Spacer(modifier = Modifier.height(4.dp))
        
        Row(verticalAlignment = Alignment.CenterVertically) {
            val textoPred = when (pagina) {
                0 -> traducirPrediccion(prediccion.datos.resultado1x2.prediccion)
                1 -> traducirPrediccion(prediccion.datos.btts.prediccion)
                2 -> traducirPrediccion(prediccion.datos.over25.prediccion)
                else -> ""
            }

            val porcentaje = when (pagina) {
                0 -> prediccion.datos.resultado1x2.probabilidadMax
                1 -> prediccion.datos.btts.probabilidad
                2 -> prediccion.datos.over25.probabilidad
                else -> 0.0
            }

            Column(horizontalAlignment = Alignment.CenterHorizontally) {
                Row(verticalAlignment = Alignment.CenterVertically) {
                    Text(
                        text = textoPred,
                        style = MaterialTheme.typography.titleMedium,
                        fontWeight = FontWeight.Bold
                    )
                    
                    // Icono de acierto/fallo si el partido terminó y FUE RECOMENDADO
                    if (acierto != null && PredictionHelper.esRecomendada(partido, pagina)) {
                        Spacer(modifier = Modifier.width(4.dp))
                        Icon(
                            imageVector = if (acierto) Icons.Default.Check else Icons.Default.Close,
                            contentDescription = null,
                            modifier = Modifier.size(16.dp),
                            tint = if (acierto) Color(0xFF4CAF50) else Color(0xFFF44336)
                        )
                    }
                }
                Text(
                    text = String.format(Locale.getDefault(), "%.0f%%", porcentaje * 100),
                    style = MaterialTheme.typography.bodySmall
                )
            }
        }
    }
}

@Composable
fun ContenidoFechaHora(partido: Partido) {
        Text(
            text = "${DateUtils.formatearFechaParaDisplay(partido.fecha)}, ${partido.hora}",
            style = MaterialTheme.typography.labelSmall
        )
    Spacer(modifier = Modifier.height(8.dp))
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/ui/components/PrediccionCard.kt
================================================
﻿package com.rigobertods.rdscore.ui.components

import androidx.compose.animation.AnimatedVisibility
import androidx.compose.foundation.ScrollState
import androidx.compose.foundation.border
import androidx.compose.foundation.clickable
import androidx.compose.foundation.layout.Arrangement
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.Row
import androidx.compose.foundation.layout.Spacer
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.height
import androidx.compose.foundation.layout.padding
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.filled.KeyboardArrowDown
import androidx.compose.material.icons.filled.KeyboardArrowUp
import androidx.compose.material3.Card
import androidx.compose.material3.CardDefaults
import androidx.compose.material3.Icon
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.Text
import androidx.compose.runtime.Composable
import androidx.compose.runtime.getValue
import androidx.compose.runtime.mutableFloatStateOf
import androidx.compose.runtime.mutableStateOf
import androidx.compose.runtime.remember
import androidx.compose.runtime.setValue
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.layout.onGloballyPositioned
import androidx.compose.ui.layout.positionInParent
import androidx.compose.ui.text.font.FontWeight
import androidx.compose.ui.unit.dp
import androidx.compose.ui.unit.sp
import androidx.compose.ui.res.stringResource
import com.rigobertods.rdscore.R
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.launch
import java.util.Locale

@Composable
fun PrediccionCard(
    titulo: String,
    textoPrincipal: String,
    probabilidadesExtra: String? = null,
    etiquetasCuotas: List<String> = emptyList(),
    valoresCuotas: List<Double> = emptyList(),
    recomendacionModerada: Int,
    recomendacionConservadora: Int,
    recomendacionArriesgada: Int,
    coroutineScope: CoroutineScope,
    scrollState: ScrollState
) {
    var isExpanded by remember { mutableStateOf(false) }
    var cardYPosition by remember { mutableFloatStateOf(0f) }
    
    // Determinar si hay alguna recomendación activa
    val tieneRecomendacion = recomendacionConservadora == 1 || 
                             recomendacionModerada == 1 || 
                             recomendacionArriesgada == 1
    
    // Color del borde según si hay recomendación
    val borderColor = if (tieneRecomendacion) {
        androidx.compose.ui.graphics.Color(0xFF4CAF50) // Verde para recomendación
    } else {
        androidx.compose.ui.graphics.Color.Transparent
    }

    Card(
        modifier = Modifier
            .fillMaxWidth()
            .then(
                if (tieneRecomendacion) {
                    Modifier.border(
                        width = 2.dp,
                        color = borderColor,
                        shape = MaterialTheme.shapes.medium
                    )
                } else {
                    Modifier
                }
            )
            .onGloballyPositioned { coordinates ->
                cardYPosition = coordinates.positionInParent().y
            }
            .clickable {
                isExpanded = !isExpanded
                if (isExpanded) {
                    coroutineScope.launch {
                        // Esperamos un poco para que la UI se recomponga tras la expansión
                        kotlinx.coroutines.delay(100)
                        // Hacemos scroll a la posición Y de la tarjeta
                        scrollState.animateScrollTo(cardYPosition.toInt())
                    }
                }
            },
        colors = CardDefaults.cardColors(
            containerColor = MaterialTheme.colorScheme.surfaceVariant
        ),
        elevation = CardDefaults.cardElevation(6.dp),
        shape = MaterialTheme.shapes.medium
    ) {
        Column(Modifier.padding(16.dp)) {
            // --- PARTE SUPERIOR ---
            Row(
                modifier = Modifier.fillMaxWidth(),
                horizontalArrangement = Arrangement.SpaceBetween,
                verticalAlignment = Alignment.CenterVertically
            ) {
                Row (
                    modifier = Modifier.weight(1f),
                    verticalAlignment = Alignment.CenterVertically
                ){
                    Text(
                        titulo,
                        style = MaterialTheme.typography.titleMedium
                    )
                    Text(
                        text = textoPrincipal,
                        style = MaterialTheme.typography.headlineSmall.copy(fontWeight = FontWeight.Bold),
                        modifier = Modifier.padding(start = 16.dp)
                    )
                }
                Icon(
                    imageVector = if (isExpanded) Icons.Default.KeyboardArrowUp else Icons.Default.KeyboardArrowDown,
                    contentDescription = if (isExpanded) stringResource(R.string.collapse) else stringResource(R.string.expand)
                )
            }

            AnimatedVisibility(visible = isExpanded) {
                Column {
                    Spacer(Modifier.height(8.dp))
                    if (probabilidadesExtra != null || valoresCuotas.any { it > 0 }) {
                        Row(
                            modifier = Modifier.fillMaxWidth(),
                            horizontalArrangement = Arrangement.SpaceBetween // Clave para la alineación
                        ) {
                            // --- COLUMNA DE PROBABILIDADES (Izquierda) ---
                            if (probabilidadesExtra != null) {
                                Column(
                                    modifier = Modifier.weight(1f),
                                    horizontalAlignment = Alignment.Start
                                ) {
                                    Text(stringResource(R.string.probabilities), style = MaterialTheme.typography.titleMedium)
                                    Spacer(Modifier.height(4.dp))
                                    // El texto con el desglose que pasamos como parámetro
                                    Text(probabilidadesExtra, style = MaterialTheme.typography.bodyMedium, lineHeight = 20.sp)
                                }
                            }

                            if (valoresCuotas.any { it > 0 }) {
                                Column(
                                    modifier = Modifier.weight(1f),
                                    horizontalAlignment = Alignment.End
                                ) {
                                    Text(stringResource(R.string.odds_label), style = MaterialTheme.typography.titleMedium)
                                    Spacer(Modifier.height(4.dp))
                                    // Genera dinámicamente las filas de cuotas
                                    valoresCuotas.forEachIndexed { index, cuota ->
                                        if (index < etiquetasCuotas.size) {
                                            val etiqueta = etiquetasCuotas[index]
                                            val textoCuota: String
                                            if (cuota > 0) {
                                                // 1. Calcula la probabilidad implícita como un número
                                                val probImplicita = (1 / cuota) * 100

                                                // 2. Formatea la cuota y la probabilidad por separado
                                                val cuotaFormateada = String.format(Locale.getDefault(), "%.2f", cuota)
                                                val probFormateada = String.format(Locale.getDefault(), "%.1f", probImplicita)

                                                textoCuota = "$cuotaFormateada ($probFormateada%)"
                                            } else {
                                                textoCuota = stringResource(R.string.not_available)
                                            }
                                            Text(
                                                text = "$etiqueta: $textoCuota",
                                                style = MaterialTheme.typography.bodyMedium,
                                                lineHeight = 20.sp
                                            )
                                        }
                                    }
                                }
                            }
                        }
                    }
                    Spacer(Modifier.height(8.dp))
                    Text(stringResource(R.string.recommendations), style = MaterialTheme.typography.titleMedium)
                    Spacer(Modifier.height(4.dp))
                    RecomendacionRow(stringResource(R.string.conservative), recomendacionConservadora)
                    RecomendacionRow(stringResource(R.string.moderate), recomendacionModerada)
                    RecomendacionRow(stringResource(R.string.aggressive), recomendacionArriesgada)
                }
            }
        }
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/ui/components/RecomendacionRow.kt
================================================
﻿package com.rigobertods.rdscore.ui.components

import androidx.compose.foundation.layout.Row
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.padding
import androidx.compose.material3.Text
import androidx.compose.runtime.Composable
import androidx.compose.ui.Modifier
import androidx.compose.ui.text.font.FontWeight
import androidx.compose.ui.unit.dp
import androidx.compose.ui.unit.sp
import com.rigobertods.rdscore.core.ui.Rojo
import com.rigobertods.rdscore.core.ui.VerdeFuerte
import com.rigobertods.rdscore.ui.util.obtenerRecomendacion

@Composable
fun RecomendacionRow(titulo: String, valor: Int) {

    val texto = obtenerRecomendacion(valor)
    Row(
        modifier = Modifier
            .fillMaxWidth()
            .padding(vertical = 4.dp)
    ) {
        Text(
            titulo,
            modifier = Modifier
                .fillMaxWidth().weight(1f),
            fontWeight = FontWeight.Bold,
            fontSize = 20.sp
        )
        Text(
            texto,
            color = when (valor) {
                1 -> VerdeFuerte
                0 -> Rojo
                else -> {
                    return
                }
            }
        )
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/ui/components/ResumenModeloRow.kt
================================================
﻿package com.rigobertods.rdscore.ui.components

import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.Row
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.padding
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.Text
import androidx.compose.runtime.Composable
import androidx.compose.ui.Modifier
import androidx.compose.ui.res.stringResource
import androidx.compose.ui.unit.dp
import com.rigobertods.rdscore.features.partidos.data.ModeloResumen
import com.rigobertods.rdscore.R
import com.rigobertods.rdscore.core.ui.Rojo
import com.rigobertods.rdscore.core.ui.VerdeFuerte
import java.util.Locale

@Composable
fun ResumenModeloRow(
    partidosTotales: Int,
    mostrarTotal: Boolean,
    modelo: String,
    resumen: ModeloResumen
) {
    Column (
        modifier = Modifier.fillMaxWidth().padding(8.dp)
    ) {
        Text(
            text = modelo,
            style = MaterialTheme.typography.titleSmall,
            modifier = Modifier.padding(bottom = 4.dp)
        )
        Row {
            Column (
                modifier = Modifier.weight(1f)
            ) {
                if (mostrarTotal) {
                    Text(
                        text = stringResource(R.string.summary_total_matches),
                        style = MaterialTheme.typography.titleSmall
                    )
                }
                Text(
                    text = stringResource(R.string.summary_recommendations),
                    style = MaterialTheme.typography.bodyMedium
                )
                Text(
                    text = stringResource(R.string.summary_hits),
                    style = MaterialTheme.typography.bodyMedium
                )
                Text(
                    text = stringResource(R.string.summary_roi),
                    style = MaterialTheme.typography.bodyMedium
                )
            }
            Column (
                modifier = Modifier.weight(1f).padding(start = 64.dp)
            ){
                if (mostrarTotal) {
                    Text(
                        text = "$partidosTotales",
                        style = MaterialTheme.typography.titleSmall,
                    )
                }
                Text(
                    text = "${resumen.apuestas}",
                    style = MaterialTheme.typography.bodyMedium,
                )
                Text(
                    text = "${resumen.aciertosBrutos}/${resumen.apuestas} (${
                        String.format(
                            Locale.getDefault(),
                            "%.2f",
                            resumen.aciertos
                        )
                    }%)",
                    style = MaterialTheme.typography.bodyMedium,
                )
                Text(
                    text = "${String.format(Locale.getDefault(), "%.2f", resumen.roi)}%",
                    style = MaterialTheme.typography.bodyLarge,
                    color = if (resumen.roi >= 0) VerdeFuerte else Rojo
                )
            }
        }
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/ui/navigation/NavRoutes.kt
================================================
﻿package com.rigobertods.rdscore.ui.navigation

sealed class NavRoutes(val route: String) {
    data object Main : NavRoutes("main")
    data object Perfil : NavRoutes("perfil")
    data object DetallePartido : NavRoutes("detalle_partido/{partidoId}") {
        fun createRoute(partidoId: Int) = "detalle_partido/$partidoId"
    }
    data object DetalleEquipo : NavRoutes("detalle_equipo/{equipoId}/{ligaId}") {
        fun createRoute(equipoId: Int, ligaId: Int) = "detalle_equipo/$equipoId/$ligaId"
    }
    data object EditarPerfil : NavRoutes("editar_perfil/{username}/{email}") {
        fun createRoute(username: String, email: String) = "editar_perfil/$username/$email"
    }
    data object EditarPassword : NavRoutes("editar_password")
    data object Resumen : NavRoutes("resumen")
    data object CuotasCalientes : NavRoutes("cuotas_calientes")
    
    // Auth Routes
    data object Login : NavRoutes("login")
    data object Registro : NavRoutes("registro")
    data object RecuperarCuenta : NavRoutes("recuperar_cuenta")
    data object RestablecerPassword : NavRoutes("restablecer_password/{email}") {
        fun createRoute(email: String) = "restablecer_password/$email"
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/ui/util/DateUtils.kt
================================================
package com.rigobertods.rdscore.ui.util

import java.time.LocalDate
import java.time.format.DateTimeFormatter

object DateUtils {
    private val apiFormatter = DateTimeFormatter.ofPattern("yyyy-MM-dd")
    private val displayFormatter = DateTimeFormatter.ofPattern("dd/MM/yyyy")

    /**
     * Convierte una fecha de formato API (yyyy-MM-dd) a formato legible (dd/MM/yyyy).
     * Si el formato es inválido o falla, devuelve la cadena original.
     */
    fun formatearFechaParaDisplay(fechaApi: String): String {
        return try {
            val date = LocalDate.parse(fechaApi, apiFormatter)
            date.format(displayFormatter)
        } catch (_: Exception) {
            fechaApi // Fallback al original si no es formato API
        }
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/ui/util/MessageMapper.kt
================================================
package com.rigobertods.rdscore.ui.util

import com.rigobertods.rdscore.R

/**
 * Mapa de códigos de backend a recursos de string de Android.
 * Permite la traducción en el cliente basada en códigos estándar.
 */
object MessageMapper {
    private val codeMap = mapOf(
        // Errores de Auth
        "AUTH_MISSING_FIELDS" to R.string.error_missing_fields,
        "AUTH_USERNAME_TAKEN" to R.string.error_username_taken,
        "AUTH_USERNAME_EXISTS" to R.string.error_username_taken,
        "AUTH_EMAIL_REGISTERED" to R.string.error_email_registered,
        "AUTH_EMAIL_EXISTS" to R.string.error_email_registered,
        "AUTH_MISSING_CREDENTIALS" to R.string.error_missing_credentials,
        "AUTH_INVALID_CREDENTIALS" to R.string.error_invalid_credentials,
        "AUTH_EMAIL_REQUIRED" to R.string.error_email_required,
        "AUTH_USER_NOT_FOUND" to R.string.error_user_not_found,
        "AUTH_NO_PERMISSION" to R.string.error_no_permission,
        "AUTH_PERMISSION_DENIED" to R.string.error_no_permission,
        "AUTH_MISSING_DATA" to R.string.error_missing_data,
        "AUTH_CODE_INVALID" to R.string.error_code_invalid_expired,
        "AUTH_TOKEN_INVALID" to R.string.error_token_invalid,
        "AUTH_TOKEN_EXPIRED" to R.string.error_token_invalid_expired,
        "AUTH_CURRENT_PASSWORD_WRONG" to R.string.error_current_password_wrong,
        "AUTH_EMAIL_SEND_FAILED" to R.string.error_email_send_failed,
        
        // Data Errors
        "DATA_INVALID_FORMAT" to R.string.error_data_invalid_format,
        "DATA_NOT_FOUND" to R.string.error_data_not_found,
        "DATA_FETCH_ERROR" to R.string.error_data_fetch,
        
        // Server Errors
        "SERVER_INTERNAL_ERROR" to R.string.error_server_internal,

        // Éxitos de Auth
        "AUTH_ACCOUNT_CREATED" to R.string.success_account_created,
        "AUTH_REGISTER_SUCCESS" to R.string.success_account_created,
        "AUTH_LOGIN_SUCCESS" to R.string.success_login,
        "AUTH_LOGOUT_SUCCESS" to R.string.success_logout,
        "AUTH_EMAIL_SENT" to R.string.msg_email_sent,
        "AUTH_PASSWORD_RESET_EMAIL_SENT" to R.string.msg_email_sent,
        "AUTH_EMAIL_SENT_IF_REGISTERED" to R.string.msg_email_sent_if_registered,
        "AUTH_ACCOUNT_DELETED" to R.string.msg_account_deleted,
        "AUTH_PASSWORD_UPDATED" to R.string.msg_password_updated,
        "AUTH_PASSWORD_RESET_SUCCESS" to R.string.msg_password_updated,
        "AUTH_PASSWORD_CHANGED" to R.string.msg_password_updated,
        
        // Predicciones
        "PREDICTION_NOT_AVAILABLE" to R.string.prediction_not_available
    )

    fun getResourceId(code: String): Int? {
        return codeMap[code]
    }
}



================================================
FILE: app/src/main/java/com/rigobertods/rdscore/ui/util/TraducirPrediccion.kt
================================================
package com.rigobertods.rdscore.ui.util

import android.content.Context
import androidx.compose.runtime.Composable
import androidx.compose.ui.res.stringResource
import com.rigobertods.rdscore.R

/**
 * Traduce los valores de predicción del backend al idioma del usuario.
 * Mapea: Local, Empate, Visitante, Sí, No, Over, Under
 */
@Composable
fun traducirPrediccion(valor: String): String {
    return when (valor) {
        // Resultado 1X2
        "Local" -> stringResource(R.string.pred_local)
        "Empate" -> stringResource(R.string.pred_draw)
        "Visitante" -> stringResource(R.string.pred_away)
        // BTTS
        "Sí" -> stringResource(R.string.pred_yes)
        "No" -> stringResource(R.string.pred_no)
        // Over/Under
        "Over" -> stringResource(R.string.pred_over)
        "Under" -> stringResource(R.string.pred_under)
        // Si no coincide, devolver original
        else -> valor
    }
}

/**
 * Traduce los valores de mercado del backend al idioma del usuario.
 * Mapea: Ganador, BTTS, Over 2.5
 */
@Composable
fun traducirMercado(valor: String): String {
    return when (valor) {
        "Ganador" -> stringResource(R.string.market_winner)
        "BTTS" -> stringResource(R.string.market_btts)
        "Over 2.5" -> stringResource(R.string.market_over_under)
        // Fallbacks para otros formatos posibles
        "Resultado" -> stringResource(R.string.market_result)
        "Ambos Marcan" -> stringResource(R.string.market_btts_full)
        "Más/Menos 2.5" -> stringResource(R.string.market_over_under_full)
        // Si no coincide, devolver original
        else -> valor
    }
}

/**
 * Traduce los valores de modelo del backend al idioma del usuario.
 * Mapea: Agresivo, Moderado, Conservador
 */
@Composable
fun traducirModelo(valor: String): String {
    return when (valor) {
        "Agresivo" -> stringResource(R.string.model_aggressive_full)
        "Moderado" -> stringResource(R.string.model_moderate_full)
        "Conservador" -> stringResource(R.string.model_conservative_full)
        // Si no coincide, devolver original
        else -> valor
    }
}

/**
 * Obtiene el texto de recomendación traducido.
 * Mapea: 1 -> Apostar, 0 -> No apostar, else -> No hay datos
 */
@Composable
fun obtenerRecomendacion(recomendacion: Int): String {
    return when (recomendacion) {
        1 -> stringResource(R.string.rec_bet)
        0 -> stringResource(R.string.rec_no_bet)
        else -> stringResource(R.string.rec_no_data)
    }
}

/**
 * Versión no-composable de traducirMensajeServidor para usar en callbacks.
 * @param context El contexto de Android para obtener los string resources
 * @param mensaje El mensaje o código del servidor a traducir
 * @return El mensaje traducido al idioma actual
 */
fun traducirMensaje(context: Context, mensaje: String): String {
    // Intentar buscar por código
    val resId = MessageMapper.getResourceId(mensaje)
    if (resId != null) {
        return context.getString(resId)
    }

    // Fallback: devolver el mensaje original si no es un código conocido
    return mensaje
}

/**
 * Versión composable de traducirMensajeServidor para usar directamente en UI.
 * @param mensaje El mensaje o código del servidor a traducir
 * @return El mensaje traducido al idioma actual
 */
@Composable
fun traducirMensajeUi(mensaje: String): String {
    // Intentar buscar por código
    val resId = MessageMapper.getResourceId(mensaje)
    if (resId != null) {
        return stringResource(resId)
    }

    // Fallback: devolver el mensaje original
    return mensaje
}






================================================
FILE: app/src/main/res/mipmap-hdpi/ic_launcher.webp
================================================
[Binary file]


================================================
FILE: app/src/main/res/mipmap-hdpi/ic_launcher_round.webp
================================================
[Binary file]


================================================
FILE: app/src/main/res/mipmap-mdpi/ic_launcher.webp
================================================
[Binary file]


================================================
FILE: app/src/main/res/mipmap-mdpi/ic_launcher_round.webp
================================================
[Binary file]


================================================
FILE: app/src/main/res/mipmap-xhdpi/ic_launcher.webp
================================================
[Binary file]


================================================
FILE: app/src/main/res/mipmap-xhdpi/ic_launcher_round.webp
================================================
[Binary file]


================================================
FILE: app/src/main/res/mipmap-xxhdpi/ic_launcher.webp
================================================
[Binary file]


================================================
FILE: app/src/main/res/mipmap-xxhdpi/ic_launcher_round.webp
================================================
[Binary file]


================================================
FILE: app/src/main/res/mipmap-xxxhdpi/ic_launcher.webp
================================================
[Binary file]


================================================
FILE: app/src/main/res/mipmap-xxxhdpi/ic_launcher_round.webp
================================================
[Binary file]


================================================
FILE: app/src/main/res/values/colors.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="negro">#FF000000</color>
    <color name="blanco">#FFFFFFFF</color>
    <color name="gris_oscuro">#494343</color>
</resources>


================================================
FILE: app/src/main/res/values/strings.xml
================================================
<resources>
    <!-- General -->
    <string name="app_name">RDScore</string>
    <string name="error">Error</string>
    <string name="ok">OK</string>
    <string name="cancel">Cancelar</string>
    <string name="apply">APLICAR</string>
    <string name="expand">Expandir</string>
    <string name="collapse">Contraer</string>

    <!-- Language Selection -->
    <string name="select_language">Seleccionar idioma</string>

    <!-- Navigation / Bottom Bar -->
    <string name="nav_summary">Resumen</string>

    <!-- Main Screen -->
    <string name="no_predictions">Sin predicción</string>
    <string name="view_model_stats">Ver estadísticas de los modelos</string>
    <string name="hot_odds_button">Cuotas Calientes</string>

    <!-- Match Card -->
    <string name="finished">Finalizado</string>
    <string name="prediction">Predicción</string>
    <string name="not_available">No disp.</string>

    <!-- Prediction Card -->
    <string name="probabilities">Probabilidades:</string>
    <string name="odds_label">Cuotas:</string>
    <string name="recommendations">Recomendaciones:</string>
    <string name="conservative">Conservadora</string>
    <string name="moderate">Moderada</string>
    <string name="aggressive">Arriesgada</string>

    <!-- Filters Dialog -->
    <string name="quick_filters">Filtros Rápidos</string>
    <string name="advanced_filters">Filtros Avanzados</string>
    <string name="open_advanced_filters">Abrir filtros avanzados</string>
    <string name="back_to_quick_filters">Volver a filtros rápidos</string>
    <string name="select_deselect_all">Marcar/Desmarcar Todo</string>
    <string name="result_1x2">Resultado (1X2)</string>
    <string name="both_teams_score">Ambos Marcan</string>
    <string name="over_under_25">Más/Menos 2.5</string>
    <string name="tab_conservative">Cons.</string>
    <string name="tab_moderate">Mode.</string>
    <string name="tab_aggressive">Arri.</string>

    <!-- Banner Warning -->
    <!--
    <string name="banner_result_disabled_title">Aviso: Mercado Resultado temporalmente desactivado</string>
    <string name="banner_result_disabled_text">El modelo de predicción del mercado Resultado se encuentra en proceso de recalibración.\nLos pronósticos se volverán a habilitar una vez finalizado el ajuste.</string>
    -->

    <!-- Hot Odds -->
    <string name="hot_odds">Cuotas Calientes</string>

    <!-- InicioActivity -->
    <string name="tv_bienvenida">Bienvenido a RDScore</string>
    <string name="et_contrasena">Contraseña</string>
    <string name="tv_recuperar_contrasena">¿Olvidaste tu contraseña?</string>
    <string name="bt_iniciar_sesion">Iniciar Sesión</string>
    <string name="tv_registrarse">¿No tienes una cuenta? Regístrate</string>

    <!-- RegistroActivity -->
    <string name="tv_bienvenida_registro">Crear cuenta</string>
    <string name="et_contrasena_registro">Contraseña</string>
    <string name="tv_ya_tienes_cuenta">¿Ya tienes una cuenta? Inicia sesión</string>
    <string name="bt_registrar">Crear Cuenta</string>

    <!-- RecuperarCuentaActivity -->
    <string name="tv_bienvenida_recuperar">Recuperar cuenta</string>
    <string name="tv_recuperar">Introduce tu E-Mail para recibir un código de recuperación.</string>
    <string name="bt_mandar_email">Mandar E-Mail</string>

    <!-- RestablecerPasswordActivity -->
    <string name="tv_bienvenida_restablecer">Restablecer contraseña</string>
    <string name="tv_codigo">Introduce el código que has recibido por E-Mail.</string>
    <string name="et_codigo">Código</string>
    <string name="et_nueva_contrasena">Nueva Contraseña</string>
    <string name="bt_restablecer">Restablecer</string>
    <string name="tv_reenviar_email">¿No has recibido el código? Volver a intentarlo</string>

    <!-- PerfilActivity -->
    <string name="tv_bienvenida_perfil">Perfil</string>
    <string name="bt_modificar_password">Cambiar Contraseña</string>
    <string name="bt_cerrar_sesion">Cerrar Sesión</string>
    <string name="bt_eliminar_cuenta">Eliminar Cuenta</string>

    <!-- EditarPerfilActivity -->
    <string name="tv_bienvenida_editar">Editar Perfil</string>
    <string name="et_usuario_editar">Usuario</string>
    <string name="et_email_editar">E-Mail</string>
    <string name="bt_guardar_editar">Guardar</string>
    <string name="bt_cancelar_editar">Cancelar</string>

    <!-- EditarPasswordActivity -->
    <string name="tv_bienvenida_editar_password">Editar Contraseña</string>
    <string name="et_contrasena_actual_editar_password">Contraseña Actual</string>
    <string name="et_nueva_contrasena_editar_password">Nueva Contraseña</string>
    <string name="bt_guardar_editar_password">Guardar</string>
    <string name="bt_cancelar_editar_password">Cancelar</string>

    <!-- Components -->
    <string name="no_matches_selected_date">No hay partidos para la fecha seleccionada.</string>
    <string name="info_recommendations">Información sobre las recomendaciones</string>
    <string name="understood">Entendido</string>
    <string name="final_result">Resultado Final</string>
    <string name="header_pj">PJ</string>
    <string name="header_g">G</string>
    <string name="header_e">E</string>
    <string name="header_p">P</string>
    <string name="header_pt">PT</string>

    <!-- Validation -->
    <string name="val_name_empty">El nombre no puede estar vacío</string>
    <string name="val_email_invalid">Introduce un email válido</string>

    <!-- Profile Dialogs -->
    <string name="dialog_delete_title">Confirmar eliminación</string>
    <string name="dialog_delete_message">¿Estás seguro de que quieres eliminar tu cuenta? Esta acción no se puede deshacer.</string>
    <string name="delete">Eliminar</string>

    <!-- Labels -->
    <string name="label_competition">Competición</string>

    <!-- Stats Labels -->
    <string name="stat_total_matches">Partidos Totales</string>
    <string name="stat_record_total">Récord Total (V-E-D)</string>
    <string name="stat_home_matches">Partidos Casa</string>
    <string name="stat_record_home">Récord Casa (V-E-D)</string>
    <string name="stat_away_matches">Partidos Fuera</string>
    <string name="stat_record_away">Récord Fuera (V-E-D)</string>
    <string name="stat_goals_for">Goles a Favor</string>
    <string name="stat_goals_against">Goles en Contra</string>
    <string name="stat_goal_diff">Diferencia Goles</string>
    <string name="stat_goals_for_per_match">Goles Favor / Partido</string>
    <string name="stat_goals_against_per_match">Goles Contra / Partido</string>
    <string name="stat_goals_for_home">Goles a Favor Casa</string>
    <string name="stat_goals_against_home">Goles en Contra Casa</string>
    <string name="stat_goal_diff_home">Diferencia Goles Casa</string>
    <string name="stat_goals_for_per_match_home">Goles Favor / Partido Casa</string>
    <string name="stat_goals_against_per_match_home">Goles Contra / Partido Casa</string>
    <string name="stat_goals_for_away">Goles a Favor Fuera</string>
    <string name="stat_goals_against_away">Goles en Contra Fuera</string>
    <string name="stat_goal_diff_away">Diferencia Goles Fuera</string>
    <string name="stat_goals_for_per_match_away">Goles Favor / Partido Fuera</string>
    <string name="stat_goals_against_per_match_away">Goles Contra / Partido Fuera</string>
    <string name="stat_position">Posición</string>
    <string name="stat_points">Puntos</string>
    <string name="stat_form">Forma (últimos 5)</string>
    <string name="stat_home_away_matches">Partidos Casa/Fuera</string>
    <string name="stat_record_home_away">Récord Casa/Fuera (V-E-D)</string>
    <string name="stat_goals_for_home_away">Goles a Favor Casa/Fuera</string>
    <string name="stat_goals_against_home_away">Goles en Contra Casa/Fuera</string>
    <string name="stat_goal_diff_home_away">Diferencia Goles Casa/Fuera</string>
    <string name="stat_goals_for_per_match_home_away">Goles Favor / Partido Casa/Fuera</string>
    <string name="stat_goals_against_per_match_home_away">Goles Contra / Partido Casa/Fuera</string>

    <!-- Content Descriptions (Accessibility) -->
    <string name="cd_logo">Logo</string>
    <string name="cd_back">Atrás</string>
    <string name="cd_info">Información</string>
    <string name="cd_change_theme">Cambiar tema</string>
    <string name="cd_profile">Perfil</string>
    <string name="cd_edit_profile">Editar Perfil</string>
    <string name="cd_summary_icon">Icono resumen</string>
    <string name="cd_hot_odds_icon">Icono cuotas calientes</string>
    <string name="cd_featured">Destacado</string>

    <!-- Snackbar/Error Messages -->
    <string name="error_username_empty">El nombre de usuario no puede estar vacío</string>
    <string name="error_password_empty">La contraseña no puede estar vacía</string>
    <string name="error_email_invalid">El formato del email no es válido</string>
    <string name="error_complete_fields">Por favor, completa todos los campos</string>

    <!-- Features UI Labels -->
    <string name="featured_recommendation">Recomendación Destacada:</string>
    <string name="model_market_format">Modelo %1$s - Mercado %2$s</string>
    <string name="hits_format">(%1$d/%2$d) aciertos</string>
    <string name="form_label">Forma:</string>
    <string name="next_match_label">Próximo partido:</string>
    <string name="no_valuable_picks_today">Hoy no hay picks con suficiente valor.</string>
    <string name="hot_odds_disclaimer">Oportunidades con alto valor estadístico según nuestro modelo. Cuotas orientativas.</string>
    <string name="top_picks">Top Picks:</string>

    <!-- UI Components -->
    <string name="cd_team_logo">Logo %1$s</string>
    <string name="cd_league_logo">Logo de la %1$s</string>
    <string name="cd_previous_day">Día anterior</string>
    <string name="cd_filter_matches">Filtrar Partidos</string>
    <string name="cd_select_date">Seleccionar fecha</string>
    <string name="cd_next_day">Día siguiente</string>
    <string name="cd_warning_icon">Icono de advertencia</string>
    <string name="summary_total_matches">Total de partidos analizados:</string>
    <string name="summary_recommendations">Recomendaciones:</string>
    <string name="summary_hits">Aciertos:</string>
    <string name="summary_roi">ROI (rentabilidad):</string>
    <string name="summary_title">Resumen:</string>
    <string name="pick_label">Pick:</string>
    <string name="market_format">Mercado: %1$s</string>
    <string name="prediction_format">Predicción: %1$s</string>
    <string name="odds_format">Cuota: %1$s</string>
    <string name="probability_format">Probabilidad: %1$s%%</string>
    <string name="value_format">+%1$s%% Value</string>
    <string name="error_loading_predictions">Error cargando los datos de predicción. Intenta recargar.</string>
    <string name="prediction_not_available">La predicción para este partido no está disponible.</string>
    <string name="header_team">EQUIPO</string>

    <!-- InfoDialog -->
    <string name="info_dialog_message">Esta aplicación ofrece análisis estadísticos, cuotas, value bets y recomendaciones basadas en modelos matemáticos y datos históricos.\n\nLas predicciones no garantizan resultados. La aplicación no permite realizar apuestas ni está afiliada a ninguna casa de apuestas.\n\nLas decisiones tomadas son responsabilidad exclusiva del usuario.</string>

    <!-- Prediction Card Titles -->
    <string name="winner_title">Ganador:</string>
    <string name="btts_title">Ambos marcan:</string>
    <string name="over_under_title">Más/Menos 2.5:</string>

    <!-- Odds Labels -->
    <string name="yes_label">Sí</string>
    <string name="no_label">No</string>
    <string name="more_label">Más</string>
    <string name="less_label">Menos</string>

    <!-- Tab Titles -->
    <string name="tab_predictions">Pronósticos</string>
    <string name="tab_statistics">Estadísticas</string>
    <string name="tab_info">Información</string>
    <string name="tab_standings">Clasificación</string>
    <string name="tab_matches">Eventos</string>

    <!-- Model/Market Names -->
    <string name="model_conservative">Conservador</string>
    <string name="model_moderate">Moderado</string>
    <string name="model_aggressive">Arriesgado</string>
    <string name="market_winner">Ganador</string>
    <string name="market_btts">Ambos Marcan</string>
    <string name="market_over_under">Más/Menos 2.5</string>

    <!-- Summary Formats -->
    <string name="summary_model_format">Resumen Modelo %1$s:</string>
    <string name="summary_market_format">Resumen Mercado %1$s:</string>

    <!-- Info Labels -->
    <string name="info_date">Fecha:</string>
    <string name="info_time">Hora:</string>
    <string name="info_stadium">Estadio:</string>
    <string name="info_city">Ciudad:</string>

    <!-- Prediction Values (from backend) -->
    <string name="pred_local">Local</string>
    <string name="pred_draw">Empate</string>
    <string name="pred_away">Visitante</string>
    <string name="pred_yes">Sí</string>
    <string name="pred_no">No</string>
    <string name="pred_over">Over</string>
    <string name="pred_under">Under</string>

    <!-- Probability Format Labels -->
    <string name="prob_local_format">Local: %1$s%%</string>
    <string name="prob_draw_format">Empate: %1$s%%</string>
    <string name="prob_away_format">Visitante: %1$s%%</string>
    <string name="prob_btts_yes_format">Ambos Marcan: %1$s%%</string>
    <string name="prob_btts_no_format">Ambos No Marcan: %1$s%%</string>
    <string name="prob_over_format">Más de 2,5: %1$s%%</string>
    <string name="prob_under_format">Menos de 2,5: %1$s%%</string>

    <!-- Recommendation Labels -->
    <string name="rec_bet">Apostar</string>
    <string name="rec_no_bet">No apostar</string>
    <string name="rec_no_data">No hay datos</string>

    <!-- Market Translations (backend values) -->
    <string name="market_result">Resultado</string>
    <string name="market_btts_full">Ambos Marcan</string>
    <string name="market_over_under_full">Más/Menos 2.5</string>

    <!-- Model Translations -->
    <string name="model_aggressive_full">Agresivo</string>
    <string name="model_moderate_full">Moderado</string>
    <string name="model_conservative_full">Conservador</string>

    <!-- Server Error Messages -->
    <string name="error_missing_fields">Faltan campos obligatorios (nombre, email, contraseña)</string>
    <string name="error_username_taken">El nombre de usuario no está disponible</string>
    <string name="error_email_registered">El email ya está registrado</string>
    <string name="success_account_created">Cuenta creada con éxito</string>
    <string name="error_missing_credentials">Faltan usuario o contraseña</string>
    <string name="error_invalid_credentials">Credenciales incorrectas</string>
    
    <!-- Forgot Password Messages -->
    <string name="error_email_required">Email obligatorio</string>
    <string name="msg_email_sent_if_registered">Si tu email está registrado, recibirás un correo.</string>
    <string name="error_email_send_failed">Error al enviar email</string>
    <string name="msg_email_sent">Se ha enviado el email.</string>
    
    <!-- Delete Account Messages -->
    <string name="error_user_not_found">Usuario no encontrado</string>
    <string name="msg_account_deleted">Tu cuenta ha sido eliminada correctamente</string>
    <string name="error_no_permission">No tienes permiso para realizar esta acción</string>
    
    <!-- Reset Password Messages -->
    <string name="error_missing_data">Faltan datos</string>
    <string name="error_code_invalid_expired">Código inválido o expirado</string>
    <string name="error_token_invalid">Token inválido</string>
    <string name="msg_password_updated">Contraseña actualizada correctamente.</string>
    <string name="error_token_invalid_expired">Token inválido o expirado</string>
    <string name="error_current_password_wrong">La contraseña actual es incorrecta</string>
    
    <!-- Forma Indicators (V=Victoria, E=Empate, D=Derrota) -->
    <string name="form_win">V</string>
    <string name="form_draw">E</string>
    <string name="form_loss">D</string>

    <!-- Data & Server Errors -->
    <string name="error_data_invalid_format">Formato de datos inválido</string>
    <string name="error_data_not_found">Datos no encontrados</string>
    <string name="error_data_fetch">Error al obtener datos</string>
    <string name="error_server_internal">Error interno del servidor</string>
    <string name="success_login">Sesión iniciada correctamente</string>
    <string name="success_logout">Sesión cerrada correctamente</string>

    <!-- Maintenance Mode -->

</resources>



================================================
FILE: app/src/main/res/values/theme.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <!-- Tema principal para el modo claro -->
    <style name="Mi.Tema" parent="Theme.Material3.Light.NoActionBar">
        <item name="colorPrimary">@color/negro</item>
        <item name="colorPrimaryVariant">@color/gris_oscuro</item>
        <item name="colorOnPrimary">@color/blanco</item>

        <item name="android:textColor">@color/negro</item>
    </style>

</resources>


================================================
FILE: app/src/main/res/values-de/strings.xml
================================================
<resources>
    <!-- General -->
    <string name="app_name">RDScore</string>
    <string name="error">Fehler</string>
    <string name="ok">OK</string>
    <string name="cancel">Abbrechen</string>
    <string name="apply">ANWENDEN</string>
    <string name="expand">Erweitern</string>
    <string name="collapse">Einklappen</string>

    <!-- Language Selection -->
    <string name="select_language">Sprache wählen</string>

    <!-- Navigation / Bottom Bar -->
    <string name="nav_summary">Zusammenfassung</string>

    <!-- Main Screen -->
    <string name="no_predictions">Keine Vorhersage</string>
    <string name="view_model_stats">Modellstatistiken anzeigen</string>
    <string name="hot_odds_button">Heiße Quoten</string>

    <!-- Match Card -->
    <string name="finished">Beendet</string>
    <string name="prediction">Vorhersage</string>
    <string name="not_available">N/V</string>

    <!-- Prediction Card -->
    <string name="probabilities">Wahrscheinlichkeiten:</string>
    <string name="odds_label">Quoten:</string>
    <string name="recommendations">Empfehlungen:</string>
    <string name="conservative">Konservativ</string>
    <string name="moderate">Moderat</string>
    <string name="aggressive">Aggressiv</string>

    <!-- Filters Dialog -->
    <string name="quick_filters">Schnellfilter</string>
    <string name="advanced_filters">Erweiterte Filter</string>
    <string name="open_advanced_filters">Erweiterte Filter öffnen</string>
    <string name="back_to_quick_filters">Zurück zu Schnellfiltern</string>
    <string name="select_deselect_all">Alle auswählen/abwählen</string>
    <string name="result_1x2">Ergebnis (1X2)</string>
    <string name="both_teams_score">Beide Teams treffen</string>
    <string name="over_under_25">Über/Unter 2.5</string>
    <string name="tab_conservative">Kons.</string>
    <string name="tab_moderate">Mode.</string>
    <string name="tab_aggressive">Aggr.</string>

    <!-- Banner Warning -->
    <!--
    <string name="banner_result_disabled_title">Hinweis: Ergebnismarkt vorübergehend deaktiviert</string>
    <string name="banner_result_disabled_text">Das Vorhersagemodell für den Ergebnismarkt wird neu kalibriert.\nPrognosen werden nach Abschluss der Anpassung wieder aktiviert.</string>
    -->

    <!-- Hot Odds -->
    <string name="hot_odds">Heiße Quoten</string>

    <!-- LoginActivity -->
    <string name="tv_bienvenida">Willkommen bei RDScore</string>
    <string name="et_contrasena">Passwort</string>
    <string name="tv_recuperar_contrasena">Passwort vergessen?</string>
    <string name="bt_iniciar_sesion">Anmelden</string>
    <string name="tv_registrarse">Kein Konto? Registrieren</string>

    <!-- RegisterActivity -->
    <string name="tv_bienvenida_registro">Konto erstellen</string>
    <string name="et_contrasena_registro">Passwort</string>
    <string name="tv_ya_tienes_cuenta">Bereits ein Konto? Anmelden</string>
    <string name="bt_registrar">Konto erstellen</string>

    <!-- RecoverAccountActivity -->
    <string name="tv_bienvenida_recuperar">Konto wiederherstellen</string>
    <string name="tv_recuperar">Geben Sie Ihre E-Mail ein, um einen Wiederherstellungscode zu erhalten.</string>
    <string name="bt_mandar_email">E-Mail senden</string>

    <!-- ResetPasswordActivity -->
    <string name="tv_bienvenida_restablecer">Passwort zurücksetzen</string>
    <string name="tv_codigo">Geben Sie den per E-Mail erhaltenen Code ein.</string>
    <string name="et_codigo">Code</string>
    <string name="et_nueva_contrasena">Neues Passwort</string>
    <string name="bt_restablecer">Zurücksetzen</string>
    <string name="tv_reenviar_email">Code nicht erhalten? Erneut versuchen</string>

    <!-- ProfileActivity -->
    <string name="tv_bienvenida_perfil">Profil</string>
    <string name="bt_modificar_password">Passwort ändern</string>
    <string name="bt_cerrar_sesion">Abmelden</string>
    <string name="bt_eliminar_cuenta">Konto löschen</string>

    <!-- EditProfileActivity -->
    <string name="tv_bienvenida_editar">Profil bearbeiten</string>
    <string name="et_usuario_editar">Benutzername</string>
    <string name="et_email_editar">E-Mail</string>
    <string name="bt_guardar_editar">Speichern</string>
    <string name="bt_cancelar_editar">Abbrechen</string>

    <!-- EditPasswordActivity -->
    <string name="tv_bienvenida_editar_password">Passwort bearbeiten</string>
    <string name="et_contrasena_actual_editar_password">Aktuelles Passwort</string>
    <string name="et_nueva_contrasena_editar_password">Neues Passwort</string>
    <string name="bt_guardar_editar_password">Speichern</string>
    <string name="bt_cancelar_editar_password">Abbrechen</string>

    <!-- Components -->
    <string name="no_matches_selected_date">Keine Spiele für das ausgewählte Datum.</string>
    <string name="info_recommendations">Informationen zu Empfehlungen</string>
    <string name="understood">Verstanden</string>
    <string name="final_result">Endergebnis</string>
    <string name="header_pj">SP</string>
    <string name="header_g">S</string>
    <string name="header_e">U</string>
    <string name="header_p">N</string>
    <string name="header_pt">Pkt</string>

    <!-- Validation -->
    <string name="val_name_empty">Name darf nicht leer sein</string>
    <string name="val_email_invalid">Gültige E-Mail eingeben</string>

    <!-- Profile Dialogs -->
    <string name="dialog_delete_title">Löschen bestätigen</string>
    <string name="dialog_delete_message">Möchten Sie Ihr Konto wirklich löschen? Diese Aktion kann nicht rückgängig gemacht werden.</string>
    <string name="delete">Löschen</string>

    <!-- Labels -->
    <string name="label_competition">Wettbewerb</string>

    <!-- Stats Labels -->
    <string name="stat_total_matches">Gesamtspiele</string>
    <string name="stat_record_total">Gesamtbilanz (S-U-N)</string>
    <string name="stat_home_matches">Heimspiele</string>
    <string name="stat_record_home">Heimbilanz (S-U-N)</string>
    <string name="stat_away_matches">Auswärtsspiele</string>
    <string name="stat_record_away">Auswärtsbilanz (S-U-N)</string>
    <string name="stat_goals_for">Tore dafür</string>
    <string name="stat_goals_against">Tore dagegen</string>
    <string name="stat_goal_diff">Tordifferenz</string>
    <string name="stat_goals_for_per_match">Tore dafür / Spiel</string>
    <string name="stat_goals_against_per_match">Tore dagegen / Spiel</string>
    <string name="stat_goals_for_home">Tore dafür Heim</string>
    <string name="stat_goals_against_home">Tore dagegen Heim</string>
    <string name="stat_goal_diff_home">Tordifferenz Heim</string>
    <string name="stat_goals_for_per_match_home">Tore dafür / Spiel Heim</string>
    <string name="stat_goals_against_per_match_home">Tore dagegen / Spiel Heim</string>
    <string name="stat_goals_for_away">Tore dafür Auswärts</string>
    <string name="stat_goals_against_away">Tore dagegen Auswärts</string>
    <string name="stat_goal_diff_away">Tordifferenz Auswärts</string>
    <string name="stat_goals_for_per_match_away">Tore dafür / Spiel Auswärts</string>
    <string name="stat_goals_against_per_match_away">Tore dagegen / Spiel Auswärts</string>
    <string name="stat_position">Position</string>
    <string name="stat_points">Punkte</string>
    <string name="stat_form">Form (letzte 5)</string>
    <string name="stat_home_away_matches">Heim/Auswärtsspiele</string>
    <string name="stat_record_home_away">Heim/Auswärtsbilanz (S-U-N)</string>
    <string name="stat_goals_for_home_away">Tore dafür Heim/Auswärts</string>
    <string name="stat_goals_against_home_away">Tore dagegen Heim/Auswärts</string>
    <string name="stat_goal_diff_home_away">Tordifferenz Heim/Auswärts</string>
    <string name="stat_goals_for_per_match_home_away">Tore dafür / Spiel Heim/Auswärts</string>
    <string name="stat_goals_against_per_match_home_away">Tore dagegen / Spiel Heim/Auswärts</string>

    <!-- Content Descriptions (Accessibility) -->
    <string name="cd_logo">Logo</string>
    <string name="cd_back">Zurück</string>
    <string name="cd_info">Information</string>
    <string name="cd_change_theme">Thema wechseln</string>
    <string name="cd_profile">Profil</string>
    <string name="cd_edit_profile">Profil bearbeiten</string>
    <string name="cd_summary_icon">Zusammenfassung-Symbol</string>
    <string name="cd_hot_odds_icon">Heiße Quoten-Symbol</string>
    <string name="cd_featured">Empfohlen</string>

    <!-- Snackbar/Error Messages -->
    <string name="error_username_empty">Benutzername darf nicht leer sein</string>
    <string name="error_password_empty">Passwort darf nicht leer sein</string>
    <string name="error_email_invalid">Ungültiges E-Mail-Format</string>
    <string name="error_complete_fields">Bitte alle Felder ausfüllen</string>

    <!-- Features UI Labels -->
    <string name="featured_recommendation">Vorgeschlagene Empfehlung:</string>
    <string name="model_market_format">Modell %1$s - Markt %2$s</string>
    <string name="hits_format">(%1$d/%2$d) Treffer</string>
    <string name="form_label">Form: </string>
    <string name="next_match_label">Nächstes Spiel: </string>
    <string name="no_valuable_picks_today">Heute keine Picks mit ausreichendem Wert.</string>
    <string name="hot_odds_disclaimer">Chancen mit hohem statistischen Wert laut unserem Modell. Richtwerte.</string>
    <string name="top_picks">Top Picks:</string>

    <!-- UI Components -->
    <string name="cd_team_logo">Logo %1$s</string>
    <string name="cd_league_logo">Liga-Logo von %1$s</string>
    <string name="cd_previous_day">Vorheriger Tag</string>
    <string name="cd_filter_matches">Spiele filtern</string>
    <string name="cd_select_date">Datum auswählen</string>
    <string name="cd_next_day">Nächster Tag</string>
    <string name="cd_warning_icon">Warnsymbol</string>
    <string name="summary_total_matches">Analysierte Spiele insgesamt:</string>
    <string name="summary_recommendations">Empfehlungen:</string>
    <string name="summary_hits">Treffer:</string>
    <string name="summary_roi">ROI (Kapitalrendite):</string>
    <string name="summary_title">Zusammenfassung:</string>
    <string name="pick_label">Pick:</string>
    <string name="market_format">Markt: %1$s</string>
    <string name="prediction_format">Vorhersage: %1$s</string>
    <string name="odds_format">Quote: %1$s</string>
    <string name="probability_format">Wahrscheinlichkeit: %1$s%%</string>
    <string name="value_format">+%1$s%% Value</string>
    <string name="error_loading_predictions">Fehler beim Laden der Vorhersagedaten. Bitte erneut versuchen.</string>
    <string name="prediction_not_available">Vorhersage für dieses Spiel nicht verfügbar.</string>
    <string name="header_team">TEAM</string>

    <!-- InfoDialog -->
    <string name="info_dialog_message">Diese App bietet statistische Analysen, Quoten, Value Bets und Empfehlungen basierend auf mathematischen Modellen und historischen Daten.\n\nVorhersagen garantieren keine Ergebnisse. Die App ermöglicht keine Wetten und ist mit keinem Buchmacher verbunden.\n\nGetroffene Entscheidungen liegen in der alleinigen Verantwortung des Nutzers.</string>

    <!-- Prediction Card Titles -->
    <string name="winner_title">Gewinner:</string>
    <string name="btts_title">Beide Teams treffen:</string>
    <string name="over_under_title">Über/Unter 2.5:</string>

    <!-- Odds Labels -->
    <string name="yes_label">Ja</string>
    <string name="no_label">Nein</string>
    <string name="more_label">Über</string>
    <string name="less_label">Unter</string>

    <!-- Tab Titles -->
    <string name="tab_predictions">Vorhersagen</string>
    <string name="tab_statistics">Statistiken</string>
    <string name="tab_info">Information</string>
    <string name="tab_standings">Tabelle</string>
    <string name="tab_matches">Spiele</string>

    <!-- Model/Market Names -->
    <string name="model_conservative">Konservativ</string>
    <string name="model_moderate">Moderat</string>
    <string name="model_aggressive">Aggressiv</string>
    <string name="market_winner">Gewinner</string>
    <string name="market_btts">Beide treffen</string>
    <string name="market_over_under">Über/Unter 2.5</string>

    <!-- Summary Formats -->
    <string name="summary_model_format">Modell %1$s Zusammenfassung:</string>
    <string name="summary_market_format">Markt %1$s Zusammenfassung:</string>

    <!-- Info Labels -->
    <string name="info_date">Datum:</string>
    <string name="info_time">Zeit:</string>
    <string name="info_stadium">Stadion:</string>
    <string name="info_city">Stadt:</string>

    <!-- Prediction Values (from backend) -->
    <string name="pred_local">Heim</string>
    <string name="pred_draw">Unentschieden</string>
    <string name="pred_away">Auswärts</string>
    <string name="pred_yes">Ja</string>
    <string name="pred_no">Nein</string>
    <string name="pred_over">Über</string>
    <string name="pred_under">Unter</string>

    <!-- Probability Format Labels -->
    <string name="prob_local_format">Heim: %1$s%%</string>
    <string name="prob_draw_format">Unentschieden: %1$s%%</string>
    <string name="prob_away_format">Auswärts: %1$s%%</string>
    <string name="prob_btts_yes_format">Beide treffen: %1$s%%</string>
    <string name="prob_btts_no_format">Keiner trifft: %1$s%%</string>
    <string name="prob_over_format">Über 2,5: %1$s%%</string>
    <string name="prob_under_format">Unter 2,5: %1$s%%</string>

    <!-- Recommendation Labels -->
    <string name="rec_bet">Wetten</string>
    <string name="rec_no_bet">Nicht wetten</string>
    <string name="rec_no_data">Keine Daten</string>

    <!-- Market Translations (backend values) -->
    <string name="market_result">Ergebnis</string>
    <string name="market_btts_full">Beide treffen</string>
    <string name="market_over_under_full">Über/Unter 2.5</string>

    <!-- Model Translations -->
    <string name="model_aggressive_full">Aggressiv</string>
    <string name="model_moderate_full">Moderat</string>
    <string name="model_conservative_full">Konservativ</string>

    <!-- Server Error Messages -->
    <string name="error_missing_fields">Erforderliche Felder fehlen (Name, E-Mail, Passwort)</string>
    <string name="error_username_taken">Benutzername ist nicht verfügbar</string>
    <string name="error_email_registered">E-Mail ist bereits registriert</string>
    <string name="success_account_created">Konto erfolgreich erstellt</string>
    <string name="error_missing_credentials">Benutzername oder Passwort fehlt</string>
    <string name="error_invalid_credentials">Ungültige Anmeldedaten</string>
    
    <!-- Forgot Password Messages -->
    <string name="error_email_required">E-Mail erforderlich</string>
    <string name="msg_email_sent_if_registered">Wenn Ihre E-Mail registriert ist, erhalten Sie eine E-Mail.</string>
    <string name="error_email_send_failed">Fehler beim Senden der E-Mail</string>
    <string name="msg_email_sent">E-Mail wurde gesendet.</string>
    
    <!-- Delete Account Messages -->
    <string name="error_user_not_found">Benutzer nicht gefunden</string>
    <string name="msg_account_deleted">Ihr Konto wurde erfolgreich gelöscht</string>
    <string name="error_no_permission">Sie haben keine Berechtigung für diese Aktion</string>
    
    <!-- Reset Password Messages -->
    <string name="error_missing_data">Fehlende Daten</string>
    <string name="error_code_invalid_expired">Ungültiger oder abgelaufener Code</string>
    <string name="error_token_invalid">Ungültiges Token</string>
    <string name="msg_password_updated">Passwort erfolgreich aktualisiert.</string>
    <string name="error_token_invalid_expired">Ungültiges oder abgelaufenes Token</string>
    <string name="error_current_password_wrong">Das aktuelle Passwort ist falsch</string>
    
    <!-- Forma Indicators (S=Sieg, U=Unentschieden, N=Niederlage) -->
    <string name="form_win">S</string>
    <string name="form_draw">U</string>
    <string name="form_loss">N</string>

    <!-- Data & Server Errors -->
    <string name="error_data_invalid_format">Ungültiges Datenformat</string>
    <string name="error_data_not_found">Daten nicht gefunden</string>
    <string name="error_data_fetch">Fehler beim Abrufen der Daten</string>
    <string name="error_server_internal">Interner Serverfehler</string>
    <string name="success_login">Anmeldung erfolgreich</string>
    <string name="success_logout">Abmeldung erfolgreich</string>

    <!-- Maintenance Mode -->

</resources>



================================================
FILE: app/src/main/res/values-en/strings.xml
================================================
<resources>
    <!-- General -->
    <string name="app_name">RDScore</string>
    <string name="error">Error</string>
    <string name="ok">OK</string>
    <string name="cancel">Cancel</string>
    <string name="apply">APPLY</string>
    <string name="expand">Expand</string>
    <string name="collapse">Collapse</string>

    <!-- Language Selection -->
    <string name="select_language">Select language</string>

    <!-- Navigation / Bottom Bar -->
    <string name="nav_summary">Summary</string>

    <!-- Main Screen -->
    <string name="no_predictions">No prediction</string>
    <string name="view_model_stats">View model statistics</string>
    <string name="hot_odds_button">Hot Odds</string>

    <!-- Match Card -->
    <string name="finished">Finished</string>
    <string name="prediction">Prediction</string>
    <string name="not_available">N/A</string>

    <!-- Prediction Card -->
    <string name="probabilities">Probabilities:</string>
    <string name="odds_label">Odds:</string>
    <string name="recommendations">Recommendations:</string>
    <string name="conservative">Conservative</string>
    <string name="moderate">Moderate</string>
    <string name="aggressive">Aggressive</string>

    <!-- Filters Dialog -->
    <string name="quick_filters">Quick Filters</string>
    <string name="advanced_filters">Advanced Filters</string>
    <string name="open_advanced_filters">Open advanced filters</string>
    <string name="back_to_quick_filters">Back to quick filters</string>
    <string name="select_deselect_all">Select/Deselect All</string>
    <string name="result_1x2">Result (1X2)</string>
    <string name="both_teams_score">Both Teams Score</string>
    <string name="over_under_25">Over/Under 2.5</string>
    <string name="tab_conservative">Cons.</string>
    <string name="tab_moderate">Mode.</string>
    <string name="tab_aggressive">Aggr.</string>

    <!-- Banner Warning -->
    <!--
    <string name="banner_result_disabled_title">Notice: Result Market temporarily disabled</string>
    <string name="banner_result_disabled_text">The Result market prediction model is undergoing recalibration.\nForecasts will be re-enabled once the adjustment is complete.</string>
    -->

    <!-- Hot Odds -->
    <string name="hot_odds">Hot Odds</string>

    <!-- LoginActivity -->
    <string name="tv_bienvenida">Welcome to RDScore</string>
    <string name="et_contrasena">Password</string>
    <string name="tv_recuperar_contrasena">Forgot your password?</string>
    <string name="bt_iniciar_sesion">Log In</string>
    <string name="tv_registrarse">Don\'t have an account? Sign up</string>

    <!-- RegisterActivity -->
    <string name="tv_bienvenida_registro">Create account</string>
    <string name="et_contrasena_registro">Password</string>
    <string name="tv_ya_tienes_cuenta">Already have an account? Log in</string>
    <string name="bt_registrar">Create Account</string>

    <!-- RecoverAccountActivity -->
    <string name="tv_bienvenida_recuperar">Recover account</string>
    <string name="tv_recuperar">Enter your E-Mail to receive a recovery code.</string>
    <string name="bt_mandar_email">Send E-Mail</string>

    <!-- ResetPasswordActivity -->
    <string name="tv_bienvenida_restablecer">Reset password</string>
    <string name="tv_codigo">Enter the code you received by E-Mail.</string>
    <string name="et_codigo">Code</string>
    <string name="et_nueva_contrasena">New Password</string>
    <string name="bt_restablecer">Reset</string>
    <string name="tv_reenviar_email">Didn\'t receive the code? Try again</string>

    <!-- ProfileActivity -->
    <string name="tv_bienvenida_perfil">Profile</string>
    <string name="bt_modificar_password">Change Password</string>
    <string name="bt_cerrar_sesion">Log Out</string>
    <string name="bt_eliminar_cuenta">Delete Account</string>

    <!-- EditProfileActivity -->
    <string name="tv_bienvenida_editar">Edit Profile</string>
    <string name="et_usuario_editar">Username</string>
    <string name="et_email_editar">E-Mail</string>
    <string name="bt_guardar_editar">Save</string>
    <string name="bt_cancelar_editar">Cancel</string>

    <!-- EditPasswordActivity -->
    <string name="tv_bienvenida_editar_password">Edit Password</string>
    <string name="et_contrasena_actual_editar_password">Current Password</string>
    <string name="et_nueva_contrasena_editar_password">New Password</string>
    <string name="bt_guardar_editar_password">Save</string>
    <string name="bt_cancelar_editar_password">Cancel</string>

    <!-- Components -->
    <string name="no_matches_selected_date">No matches for the selected date.</string>
    <string name="info_recommendations">Information about recommendations</string>
    <string name="understood">Understood</string>
    <string name="final_result">Final Result</string>
    <string name="header_pj">MP</string>
    <string name="header_g">W</string>
    <string name="header_e">D</string>
    <string name="header_p">L</string>
    <string name="header_pt">Pts</string>

    <!-- Validation -->
    <string name="val_name_empty">Name cannot be empty</string>
    <string name="val_email_invalid">Enter a valid email</string>

    <!-- Profile Dialogs -->
    <string name="dialog_delete_title">Confirm deletion</string>
    <string name="dialog_delete_message">Are you sure you want to delete your account? This action cannot be undone.</string>
    <string name="delete">Delete</string>

    <!-- Labels -->
    <string name="label_competition">Competition</string>

    <!-- Stats Labels -->
    <string name="stat_total_matches">Total Matches</string>
    <string name="stat_record_total">Total Record (W-D-L)</string>
    <string name="stat_home_matches">Home Matches</string>
    <string name="stat_record_home">Home Record (W-D-L)</string>
    <string name="stat_away_matches">Away Matches</string>
    <string name="stat_record_away">Away Record (W-D-L)</string>
    <string name="stat_goals_for">Goals For</string>
    <string name="stat_goals_against">Goals Against</string>
    <string name="stat_goal_diff">Goal Difference</string>
    <string name="stat_goals_for_per_match">Goals For / Match</string>
    <string name="stat_goals_against_per_match">Goals Against / Match</string>
    <string name="stat_goals_for_home">Goals For Home</string>
    <string name="stat_goals_against_home">Goals Against Home</string>
    <string name="stat_goal_diff_home">Goal Diff Home</string>
    <string name="stat_goals_for_per_match_home">Goals For / Match Home</string>
    <string name="stat_goals_against_per_match_home">Goals Against / Match Home</string>
    <string name="stat_goals_for_away">Goals For Away</string>
    <string name="stat_goals_against_away">Goals Against Away</string>
    <string name="stat_goal_diff_away">Goal Diff Away</string>
    <string name="stat_goals_for_per_match_away">Goals For / Match Away</string>
    <string name="stat_goals_against_per_match_away">Goals Against / Match Away</string>
    <string name="stat_position">Position</string>
    <string name="stat_points">Points</string>
    <string name="stat_form">Form (last 5)</string>
    <string name="stat_home_away_matches">Home/Away Matches</string>
    <string name="stat_record_home_away">Home/Away Record (W-D-L)</string>
    <string name="stat_goals_for_home_away">Goals For Home/Away</string>
    <string name="stat_goals_against_home_away">Goals Against Home/Away</string>
    <string name="stat_goal_diff_home_away">Goal Diff Home/Away</string>
    <string name="stat_goals_for_per_match_home_away">Goals For / Match Home/Away</string>
    <string name="stat_goals_against_per_match_home_away">Goals Against / Match Home/Away</string>

    <!-- Content Descriptions (Accessibility) -->
    <string name="cd_logo">Logo</string>
    <string name="cd_back">Back</string>
    <string name="cd_info">Information</string>
    <string name="cd_change_theme">Change theme</string>
    <string name="cd_profile">Profile</string>
    <string name="cd_edit_profile">Edit Profile</string>
    <string name="cd_summary_icon">Summary icon</string>
    <string name="cd_hot_odds_icon">Hot odds icon</string>
    <string name="cd_featured">Featured</string>

    <!-- Snackbar/Error Messages -->
    <string name="error_username_empty">Username cannot be empty</string>
    <string name="error_password_empty">Password cannot be empty</string>
    <string name="error_email_invalid">Invalid email format</string>
    <string name="error_complete_fields">Please complete all fields</string>

    <!-- Features UI Labels -->
    <string name="featured_recommendation">Featured Recommendation:</string>
    <string name="model_market_format">Model %1$s - Market %2$s</string>
    <string name="hits_format">(%1$d/%2$d) hits</string>
    <string name="form_label">Form: </string>
    <string name="next_match_label">Next match: </string>
    <string name="no_valuable_picks_today">No valuable picks for today.</string>
    <string name="hot_odds_disclaimer">High statistical value opportunities according to our model. Indicative odds.</string>
    <string name="top_picks">Top Picks:</string>

    <!-- UI Components -->
    <string name="cd_team_logo">Logo %1$s</string>
    <string name="cd_league_logo">Logo of %1$s</string>
    <string name="cd_previous_day">Previous day</string>
    <string name="cd_filter_matches">Filter Matches</string>
    <string name="cd_select_date">Select date</string>
    <string name="cd_next_day">Next day</string>
    <string name="cd_warning_icon">Warning icon</string>
    <string name="summary_total_matches">Total matches analyzed:</string>
    <string name="summary_recommendations">Recommendations:</string>
    <string name="summary_hits">Hits:</string>
    <string name="summary_roi">ROI (Return on Investment):</string>
    <string name="summary_title">Summary:</string>
    <string name="pick_label">Pick:</string>
    <string name="market_format">Market: %1$s</string>
    <string name="prediction_format">Prediction: %1$s</string>
    <string name="odds_format">Odds: %1$s</string>
    <string name="probability_format">Probability: %1$s%%</string>
    <string name="value_format">+%1$s%% Value</string>
    <string name="error_loading_predictions">Error loading prediction data. Please retry.</string>
    <string name="prediction_not_available">Prediction not available for this match.</string>
    <string name="header_team">TEAM</string>

    <!-- InfoDialog -->
    <string name="info_dialog_message">This app offers statistical analysis, odds, value bets and recommendations based on mathematical models and historical data.\n\nPredictions do not guarantee results. The app does not allow betting and is not affiliated with any bookmaker.\n\nDecisions made are the sole responsibility of the user.</string>

    <!-- Prediction Card Titles -->
    <string name="winner_title">Winner:</string>
    <string name="btts_title">Both Teams to Score:</string>
    <string name="over_under_title">Over/Under 2.5:</string>

    <!-- Odds Labels -->
    <string name="yes_label">Yes</string>
    <string name="no_label">No</string>
    <string name="more_label">Over</string>
    <string name="less_label">Under</string>

    <!-- Tab Titles -->
    <string name="tab_predictions">Predictions</string>
    <string name="tab_statistics">Statistics</string>
    <string name="tab_info">Information</string>
    <string name="tab_standings">Standings</string>
    <string name="tab_matches">Matches</string>

    <!-- Model/Market Names -->
    <string name="model_conservative">Conservative</string>
    <string name="model_moderate">Moderate</string>
    <string name="model_aggressive">Aggressive</string>
    <string name="market_winner">Winner</string>
    <string name="market_btts">Both Teams Score</string>
    <string name="market_over_under">Over/Under 2.5</string>

    <!-- Summary Formats -->
    <string name="summary_model_format">Model %1$s Summary:</string>
    <string name="summary_market_format">Market %1$s Summary:</string>

    <!-- Info Labels -->
    <string name="info_date">Date:</string>
    <string name="info_time">Time:</string>
    <string name="info_stadium">Stadium:</string>
    <string name="info_city">City:</string>

    <!-- Prediction Values (from backend) -->
    <string name="pred_local">Home</string>
    <string name="pred_draw">Draw</string>
    <string name="pred_away">Away</string>
    <string name="pred_yes">Yes</string>
    <string name="pred_no">No</string>
    <string name="pred_over">Over</string>
    <string name="pred_under">Under</string>

    <!-- Probability Format Labels -->
    <string name="prob_local_format">Home: %1$s%%</string>
    <string name="prob_draw_format">Draw: %1$s%%</string>
    <string name="prob_away_format">Away: %1$s%%</string>
    <string name="prob_btts_yes_format">Both Score: %1$s%%</string>
    <string name="prob_btts_no_format">Neither Scores: %1$s%%</string>
    <string name="prob_over_format">Over 2.5: %1$s%%</string>
    <string name="prob_under_format">Under 2.5: %1$s%%</string>

    <!-- Recommendation Labels -->
    <string name="rec_bet">Bet</string>
    <string name="rec_no_bet">Don\'t bet</string>
    <string name="rec_no_data">No data</string>

    <!-- Market Translations (backend values) -->
    <string name="market_result">Result</string>
    <string name="market_btts_full">Both Teams Score</string>
    <string name="market_over_under_full">Over/Under 2.5</string>

    <!-- Model Translations -->
    <string name="model_aggressive_full">Aggressive</string>
    <string name="model_moderate_full">Moderate</string>
    <string name="model_conservative_full">Conservative</string>

    <!-- Server Error Messages -->
    <string name="error_missing_fields">Missing required fields (name, email, password)</string>
    <string name="error_username_taken">Username is not available</string>
    <string name="error_email_registered">Email is already registered</string>
    <string name="success_account_created">Account created successfully</string>
    <string name="error_missing_credentials">Missing username or password</string>
    <string name="error_invalid_credentials">Invalid credentials</string>
    
    <!-- Forgot Password Messages -->
    <string name="error_email_required">Email required</string>
    <string name="msg_email_sent_if_registered">If your email is registered, you will receive an email.</string>
    <string name="error_email_send_failed">Error sending email</string>
    <string name="msg_email_sent">Email has been sent.</string>
    
    <!-- Delete Account Messages -->
    <string name="error_user_not_found">User not found</string>
    <string name="msg_account_deleted">Your account has been successfully deleted</string>
    <string name="error_no_permission">You don\'t have permission to perform this action</string>
    
    <!-- Reset Password Messages -->
    <string name="error_missing_data">Missing data</string>
    <string name="error_code_invalid_expired">Invalid or expired code</string>
    <string name="error_token_invalid">Invalid token</string>
    <string name="msg_password_updated">Password updated successfully.</string>
    <string name="error_token_invalid_expired">Invalid or expired token</string>
    <string name="error_current_password_wrong">Current password is incorrect</string>
    
    <!-- Forma Indicators (W=Win, D=Draw, L=Loss) -->
    <string name="form_win">W</string>
    <string name="form_draw">D</string>
    <string name="form_loss">L</string>

    <!-- Data & Server Errors -->
    <string name="error_data_invalid_format">Invalid data format</string>
    <string name="error_data_not_found">Data not found</string>
    <string name="error_data_fetch">Error fetching data</string>
    <string name="error_server_internal">Internal server error</string>
    <string name="success_login">Logged in successfully</string>
    <string name="success_logout">Logged out successfully</string>

    <!-- Maintenance Mode -->

</resources>



================================================
FILE: app/src/main/res/values-fr/strings.xml
================================================
<resources>
    <!-- General -->
    <string name="app_name">RDScore</string>
    <string name="error">Erreur</string>
    <string name="ok">OK</string>
    <string name="cancel">Annuler</string>
    <string name="apply">APPLIQUER</string>
    <string name="expand">Développer</string>
    <string name="collapse">Réduire</string>

    <!-- Language Selection -->
    <string name="select_language">Sélectionner la langue</string>

    <!-- Navigation / Bottom Bar -->
    <string name="nav_summary">Résumé</string>

    <!-- Main Screen -->
    <string name="no_predictions">Sans prédiction</string>
    <string name="view_model_stats">Voir les statistiques des modèles</string>
    <string name="hot_odds_button">Cotes Chaudes</string>

    <!-- Match Card -->
    <string name="finished">Terminé</string>
    <string name="prediction">Prédiction</string>
    <string name="not_available">Non disp.</string>

    <!-- Prediction Card -->
    <string name="probabilities">Probabilités:</string>
    <string name="odds_label">Cotes:</string>
    <string name="recommendations">Recommandations:</string>
    <string name="conservative">Conservatrice</string>
    <string name="moderate">Modérée</string>
    <string name="aggressive">Risquée</string>

    <!-- Filters Dialog -->
    <string name="quick_filters">Filtres Rapides</string>
    <string name="advanced_filters">Filtres Avancés</string>
    <string name="open_advanced_filters">Ouvrir les filtres avancés</string>
    <string name="back_to_quick_filters">Retour aux filtres rapides</string>
    <string name="select_deselect_all">Tout sélectionner/désélectionner</string>
    <string name="result_1x2">Résultat (1X2)</string>
    <string name="both_teams_score">Les deux marquent</string>
    <string name="over_under_25">Plus/Moins 2.5</string>
    <string name="tab_conservative">Cons.</string>
    <string name="tab_moderate">Modé.</string>
    <string name="tab_aggressive">Risq.</string>

    <!-- Banner Warning -->
    <!--
    <string name="banner_result_disabled_title">Avis: Marché Résultat temporairement désactivé</string>
    <string name="banner_result_disabled_text">Le modèle de prédiction du marché Résultat est en cours de recalibration.\nLes pronostics seront réactivés une fois l\'ajustement terminé.</string>
    -->

    <!-- Hot Odds -->
    <string name="hot_odds">Cotes Chaudes</string>

    <!-- InicioActivity -->
    <string name="tv_bienvenida">Bienvenue sur RDScore</string>
    <string name="et_contrasena">Mot de passe</string>
    <string name="tv_recuperar_contrasena">Mot de passe oublié?</string>
    <string name="bt_iniciar_sesion">Se connecter</string>
    <string name="tv_registrarse">Pas de compte? Inscrivez-vous</string>

    <!-- RegistroActivity -->
    <string name="tv_bienvenida_registro">Créer un compte</string>
    <string name="et_contrasena_registro">Mot de passe</string>
    <string name="tv_ya_tienes_cuenta">Déjà un compte? Connectez-vous</string>
    <string name="bt_registrar">Créer un compte</string>

    <!-- RecuperarCuentaActivity -->
    <string name="tv_bienvenida_recuperar">Récupérer le compte</string>
    <string name="tv_recuperar">Entrez votre e-mail pour recevoir un code de récupération.</string>
    <string name="bt_mandar_email">Envoyer l\'e-mail</string>

    <!-- RestablecerPasswordActivity -->
    <string name="tv_bienvenida_restablecer">Réinitialiser le mot de passe</string>
    <string name="tv_codigo">Entrez le code que vous avez reçu par e-mail.</string>
    <string name="et_codigo">Code</string>
    <string name="et_nueva_contrasena">Nouveau mot de passe</string>
    <string name="bt_restablecer">Réinitialiser</string>
    <string name="tv_reenviar_email">Code non reçu? Réessayer</string>

    <!-- PerfilActivity -->
    <string name="tv_bienvenida_perfil">Profil</string>
    <string name="bt_modificar_password">Changer le mot de passe</string>
    <string name="bt_cerrar_sesion">Déconnexion</string>
    <string name="bt_eliminar_cuenta">Supprimer le compte</string>

    <!-- EditarPerfilActivity -->
    <string name="tv_bienvenida_editar">Modifier le profil</string>
    <string name="et_usuario_editar">Utilisateur</string>
    <string name="et_email_editar">E-Mail</string>
    <string name="bt_guardar_editar">Enregistrer</string>
    <string name="bt_cancelar_editar">Annuler</string>

    <!-- EditarPasswordActivity -->
    <string name="tv_bienvenida_editar_password">Modifier le mot de passe</string>
    <string name="et_contrasena_actual_editar_password">Mot de passe actuel</string>
    <string name="et_nueva_contrasena_editar_password">Nouveau mot de passe</string>
    <string name="bt_guardar_editar_password">Enregistrer</string>
    <string name="bt_cancelar_editar_password">Annuler</string>

    <!-- Components -->
    <string name="no_matches_selected_date">Pas de matchs pour la date sélectionnée.</string>
    <string name="info_recommendations">Informations sur les recommandations</string>
    <string name="understood">Compris</string>
    <string name="final_result">Résultat Final</string>
    <string name="header_pj">MJ</string>
    <string name="header_g">V</string>
    <string name="header_e">N</string>
    <string name="header_p">D</string>
    <string name="header_pt">PT</string>

    <!-- Validation -->
    <string name="val_name_empty">Le nom ne peut pas être vide</string>
    <string name="val_email_invalid">Entrez un e-mail valide</string>

    <!-- Profile Dialogs -->
    <string name="dialog_delete_title">Confirmer la suppression</string>
    <string name="dialog_delete_message">Êtes-vous sûr de vouloir supprimer votre compte? Cette action est irréversible.</string>
    <string name="delete">Supprimer</string>

    <!-- Labels -->
    <string name="label_competition">Compétition</string>

    <!-- Stats Labels -->
    <string name="stat_total_matches">Matchs Totaux</string>
    <string name="stat_record_total">Bilan Total (V-N-D)</string>
    <string name="stat_home_matches">Matchs Domicile</string>
    <string name="stat_record_home">Bilan Domicile (V-N-D)</string>
    <string name="stat_away_matches">Matchs Extérieur</string>
    <string name="stat_record_away">Bilan Extérieur (V-N-D)</string>
    <string name="stat_goals_for">Buts Pour</string>
    <string name="stat_goals_against">Buts Contre</string>
    <string name="stat_goal_diff">Différence de Buts</string>
    <string name="stat_goals_for_per_match">Buts Pour / Match</string>
    <string name="stat_goals_against_per_match">Buts Contre / Match</string>
    <string name="stat_goals_for_home">Buts Pour Domicile</string>
    <string name="stat_goals_against_home">Buts Contre Domicile</string>
    <string name="stat_goal_diff_home">Différence Buts Domicile</string>
    <string name="stat_goals_for_per_match_home">Buts Pour / Match Domicile</string>
    <string name="stat_goals_against_per_match_home">Buts Contre / Match Domicile</string>
    <string name="stat_goals_for_away">Buts Pour Extérieur</string>
    <string name="stat_goals_against_away">Buts Contre Extérieur</string>
    <string name="stat_goal_diff_away">Différence Buts Extérieur</string>
    <string name="stat_goals_for_per_match_away">Buts Pour / Match Extérieur</string>
    <string name="stat_goals_against_per_match_away">Buts Contre / Match Extérieur</string>
    <string name="stat_position">Position</string>
    <string name="stat_points">Points</string>
    <string name="stat_form">Forme (5 derniers)</string>
    <string name="stat_home_away_matches">Matchs Dom/Ext</string>
    <string name="stat_record_home_away">Bilan Dom/Ext (V-N-D)</string>
    <string name="stat_goals_for_home_away">Buts Pour Dom/Ext</string>
    <string name="stat_goals_against_home_away">Buts Contre Dom/Ext</string>
    <string name="stat_goal_diff_home_away">Différence Buts Dom/Ext</string>
    <string name="stat_goals_for_per_match_home_away">Buts Pour / Match Dom/Ext</string>
    <string name="stat_goals_against_per_match_home_away">Buts Contre / Match Dom/Ext</string>

    <!-- Content Descriptions (Accessibility) -->
    <string name="cd_logo">Logo</string>
    <string name="cd_back">Retour</string>
    <string name="cd_info">Information</string>
    <string name="cd_change_theme">Changer de thème</string>
    <string name="cd_profile">Profil</string>
    <string name="cd_edit_profile">Modifier le profil</string>
    <string name="cd_summary_icon">Icône résumé</string>
    <string name="cd_hot_odds_icon">Icône cotes chaudes</string>
    <string name="cd_featured">En vedette</string>

    <!-- Snackbar/Error Messages -->
    <string name="error_username_empty">Le nom d\'utilisateur ne peut pas être vide</string>
    <string name="error_password_empty">Le mot de passe ne peut pas être vide</string>
    <string name="error_email_invalid">Le format de l\'e-mail n\'est pas valide</string>
    <string name="error_complete_fields">Veuillez remplir tous les champs</string>

    <!-- Features UI Labels -->
    <string name="featured_recommendation">Recommandation en vedette:</string>
    <string name="model_market_format">Modèle %1$s - Marché %2$s</string>
    <string name="hits_format">(%1$d/%2$d) réussites</string>
    <string name="form_label">Forme:</string>
    <string name="next_match_label">Prochain match:</string>
    <string name="no_valuable_picks_today">Pas de picks de valeur aujourd\'hui.</string>
    <string name="hot_odds_disclaimer">Opportunités à haute valeur statistique selon notre modèle. Cotes indicatives.</string>
    <string name="top_picks">Top Picks:</string>

    <!-- UI Components -->
    <string name="cd_team_logo">Logo %1$s</string>
    <string name="cd_league_logo">Logo de la %1$s</string>
    <string name="cd_previous_day">Jour précédent</string>
    <string name="cd_filter_matches">Filtrer les matchs</string>
    <string name="cd_select_date">Sélectionner la date</string>
    <string name="cd_next_day">Jour suivant</string>
    <string name="cd_warning_icon">Icône d\'avertissement</string>
    <string name="summary_total_matches">Total des matchs analysés:</string>
    <string name="summary_recommendations">Recommandations:</string>
    <string name="summary_hits">Réussites:</string>
    <string name="summary_roi">ROI (rentabilité):</string>
    <string name="summary_title">Résumé:</string>
    <string name="pick_label">Pick:</string>
    <string name="market_format">Marché: %1$s</string>
    <string name="prediction_format">Prédiction: %1$s</string>
    <string name="odds_format">Cote: %1$s</string>
    <string name="probability_format">Probabilité: %1$s%%</string>
    <string name="value_format">+%1$s%% Value</string>
    <string name="error_loading_predictions">Erreur de chargement des prédictions. Essayez de recharger.</string>
    <string name="prediction_not_available">La prédiction pour ce match n\'est pas disponible.</string>
    <string name="header_team">ÉQUIPE</string>

    <!-- InfoDialog -->
    <string name="info_dialog_message">Cette application offre des analyses statistiques, des cotes, des value bets et des recommandations basées sur des modèles mathématiques et des données historiques.\n\nLes prédictions ne garantissent pas les résultats. L\'application ne permet pas de parier et n\'est affiliée à aucun bookmaker.\n\nLes décisions prises sont de la responsabilité exclusive de l\'utilisateur.</string>

    <!-- Prediction Card Titles -->
    <string name="winner_title">Vainqueur:</string>
    <string name="btts_title">Les deux marquent:</string>
    <string name="over_under_title">Plus/Moins 2.5:</string>

    <!-- Odds Labels -->
    <string name="yes_label">Oui</string>
    <string name="no_label">Non</string>
    <string name="more_label">Plus</string>
    <string name="less_label">Moins</string>

    <!-- Tab Titles -->
    <string name="tab_predictions">Pronostics</string>
    <string name="tab_statistics">Statistiques</string>
    <string name="tab_info">Information</string>
    <string name="tab_standings">Classement</string>
    <string name="tab_matches">Événements</string>

    <!-- Model/Market Names -->
    <string name="model_conservative">Conservateur</string>
    <string name="model_moderate">Modéré</string>
    <string name="model_aggressive">Risqué</string>
    <string name="market_winner">Vainqueur</string>
    <string name="market_btts">Les deux marquent</string>
    <string name="market_over_under">Plus/Moins 2.5</string>

    <!-- Summary Formats -->
    <string name="summary_model_format">Résumé Modèle %1$s:</string>
    <string name="summary_market_format">Résumé Marché %1$s:</string>

    <!-- Info Labels -->
    <string name="info_date">Date:</string>
    <string name="info_time">Heure:</string>
    <string name="info_stadium">Stade:</string>
    <string name="info_city">Ville:</string>

    <!-- Prediction Values (from backend) -->
    <string name="pred_local">Domicile</string>
    <string name="pred_draw">Nul</string>
    <string name="pred_away">Extérieur</string>
    <string name="pred_yes">Oui</string>
    <string name="pred_no">Non</string>
    <string name="pred_over">Over</string>
    <string name="pred_under">Under</string>

    <!-- Probability Format Labels -->
    <string name="prob_local_format">Domicile: %1$s%%</string>
    <string name="prob_draw_format">Nul: %1$s%%</string>
    <string name="prob_away_format">Extérieur: %1$s%%</string>
    <string name="prob_btts_yes_format">Les deux marquent: %1$s%%</string>
    <string name="prob_btts_no_format">Aucun ne marque: %1$s%%</string>
    <string name="prob_over_format">Plus de 2,5: %1$s%%</string>
    <string name="prob_under_format">Moins de 2,5: %1$s%%</string>

    <!-- Recommendation Labels -->
    <string name="rec_bet">Parier</string>
    <string name="rec_no_bet">Ne pas parier</string>
    <string name="rec_no_data">Pas de données</string>

    <!-- Market Translations (backend values) -->
    <string name="market_result">Résultat</string>
    <string name="market_btts_full">Les deux marquent</string>
    <string name="market_over_under_full">Plus/Moins 2.5</string>

    <!-- Model Translations -->
    <string name="model_aggressive_full">Agressif</string>
    <string name="model_moderate_full">Modéré</string>
    <string name="model_conservative_full">Conservateur</string>

    <!-- Server Error Messages -->
    <string name="error_missing_fields">Champs obligatoires manquants (nom, e-mail, mot de passe)</string>
    <string name="error_username_taken">Le nom d\'utilisateur n\'est pas disponible</string>
    <string name="error_email_registered">L\'e-mail est déjà enregistré</string>
    <string name="success_account_created">Compte créé avec succès</string>
    <string name="error_missing_credentials">Nom d\'utilisateur ou mot de passe manquant</string>
    <string name="error_invalid_credentials">Identifiants incorrects</string>
    
    <!-- Forgot Password Messages -->
    <string name="error_email_required">E-mail requis</string>
    <string name="msg_email_sent_if_registered">Si votre e-mail est enregistré, vous recevrez un e-mail.</string>
    <string name="error_email_send_failed">Erreur lors de l\'envoi de l\'e-mail</string>
    <string name="msg_email_sent">L\'e-mail a été envoyé.</string>
    
    <!-- Delete Account Messages -->
    <string name="error_user_not_found">Utilisateur non trouvé</string>
    <string name="msg_account_deleted">Votre compte a été supprimé avec succès</string>
    <string name="error_no_permission">Vous n\'avez pas la permission d\'effectuer cette action</string>
    
    <!-- Reset Password Messages -->
    <string name="error_missing_data">Données manquantes</string>
    <string name="error_code_invalid_expired">Code invalide ou expiré</string>
    <string name="error_token_invalid">Token invalide</string>
    <string name="msg_password_updated">Mot de passe mis à jour avec succès.</string>
    <string name="error_token_invalid_expired">Token invalide ou expiré</string>
    <string name="error_current_password_wrong">Le mot de passe actuel est incorrect</string>
    
    <!-- Forma Indicators (V=Victoire, N=Nul, D=Défaite) -->
    <string name="form_win">V</string>
    <string name="form_draw">N</string>
    <string name="form_loss">D</string>

    <!-- Data & Server Errors -->
    <string name="error_data_invalid_format">Format de données invalide</string>
    <string name="error_data_not_found">Données introuvables</string>
    <string name="error_data_fetch">Erreur lors de la récupération des données</string>
    <string name="error_server_internal">Erreur interne du serveur</string>
    <string name="success_login">Connexion réussie</string>
    <string name="success_logout">Déconnexion réussie</string>

    <!-- Maintenance Mode -->

</resources>



================================================
FILE: app/src/main/res/values-it/strings.xml
================================================
<resources>
    <!-- General -->
    <string name="app_name">RDScore</string>
    <string name="error">Errore</string>
    <string name="ok">OK</string>
    <string name="cancel">Annulla</string>
    <string name="apply">APPLICA</string>
    <string name="expand">Espandi</string>
    <string name="collapse">Riduci</string>

    <!-- Language Selection -->
    <string name="select_language">Seleziona lingua</string>

    <!-- Navigation / Bottom Bar -->
    <string name="nav_summary">Riepilogo</string>

    <!-- Main Screen -->
    <string name="no_predictions">Senza previsione</string>
    <string name="view_model_stats">Vedi statistiche dei modelli</string>
    <string name="hot_odds_button">Quote Calde</string>

    <!-- Match Card -->
    <string name="finished">Terminato</string>
    <string name="prediction">Previsione</string>
    <string name="not_available">Non disp.</string>

    <!-- Prediction Card -->
    <string name="probabilities">Probabilità:</string>
    <string name="odds_label">Quote:</string>
    <string name="recommendations">Raccomandazioni:</string>
    <string name="conservative">Conservativa</string>
    <string name="moderate">Moderata</string>
    <string name="aggressive">Rischiosa</string>

    <!-- Filters Dialog -->
    <string name="quick_filters">Filtri Rapidi</string>
    <string name="advanced_filters">Filtri Avanzati</string>
    <string name="open_advanced_filters">Apri filtri avanzati</string>
    <string name="back_to_quick_filters">Torna ai filtri rapidi</string>
    <string name="select_deselect_all">Seleziona/Deseleziona tutto</string>
    <string name="result_1x2">Risultato (1X2)</string>
    <string name="both_teams_score">Entrambi segnano</string>
    <string name="over_under_25">Sopra/Sotto 2.5</string>
    <string name="tab_conservative">Cons.</string>
    <string name="tab_moderate">Mode.</string>
    <string name="tab_aggressive">Risc.</string>

    <!-- Banner Warning -->
    <!--
    <string name="banner_result_disabled_title">Avviso: Mercato Risultato temporaneamente disattivato</string>
    <string name="banner_result_disabled_text">Il modello di previsione del mercato Risultato è in fase di ricalibrazione.\nI pronostici saranno riattivati al termine della regolazione.</string>
    -->

    <!-- Hot Odds -->
    <string name="hot_odds">Quote Calde</string>

    <!-- InicioActivity -->
    <string name="tv_bienvenida">Benvenuto su RDScore</string>
    <string name="et_contrasena">Password</string>
    <string name="tv_recuperar_contrasena">Password dimenticata?</string>
    <string name="bt_iniciar_sesion">Accedi</string>
    <string name="tv_registrarse">Non hai un account? Registrati</string>

    <!-- RegistroActivity -->
    <string name="tv_bienvenida_registro">Crea account</string>
    <string name="et_contrasena_registro">Password</string>
    <string name="tv_ya_tienes_cuenta">Hai già un account? Accedi</string>
    <string name="bt_registrar">Crea Account</string>

    <!-- RecuperarCuentaActivity -->
    <string name="tv_bienvenida_recuperar">Recupera account</string>
    <string name="tv_recuperar">Inserisci la tua e-mail per ricevere un codice di recupero.</string>
    <string name="bt_mandar_email">Invia E-Mail</string>

    <!-- RestablecerPasswordActivity -->
    <string name="tv_bienvenida_restablecer">Reimposta password</string>
    <string name="tv_codigo">Inserisci il codice che hai ricevuto via e-mail.</string>
    <string name="et_codigo">Codice</string>
    <string name="et_nueva_contrasena">Nuova Password</string>
    <string name="bt_restablecer">Reimposta</string>
    <string name="tv_reenviar_email">Non hai ricevuto il codice? Riprova</string>

    <!-- PerfilActivity -->
    <string name="tv_bienvenida_perfil">Profilo</string>
    <string name="bt_modificar_password">Cambia Password</string>
    <string name="bt_cerrar_sesion">Esci</string>
    <string name="bt_eliminar_cuenta">Elimina Account</string>

    <!-- EditarPerfilActivity -->
    <string name="tv_bienvenida_editar">Modifica Profilo</string>
    <string name="et_usuario_editar">Utente</string>
    <string name="et_email_editar">E-Mail</string>
    <string name="bt_guardar_editar">Salva</string>
    <string name="bt_cancelar_editar">Annulla</string>

    <!-- EditarPasswordActivity -->
    <string name="tv_bienvenida_editar_password">Modifica Password</string>
    <string name="et_contrasena_actual_editar_password">Password Attuale</string>
    <string name="et_nueva_contrasena_editar_password">Nuova Password</string>
    <string name="bt_guardar_editar_password">Salva</string>
    <string name="bt_cancelar_editar_password">Annulla</string>

    <!-- Components -->
    <string name="no_matches_selected_date">Nessuna partita per la data selezionata.</string>
    <string name="info_recommendations">Informazioni sulle raccomandazioni</string>
    <string name="understood">Capito</string>
    <string name="final_result">Risultato Finale</string>
    <string name="header_pj">PG</string>
    <string name="header_g">V</string>
    <string name="header_e">P</string>
    <string name="header_p">S</string>
    <string name="header_pt">PT</string>

    <!-- Validation -->
    <string name="val_name_empty">Il nome non può essere vuoto</string>
    <string name="val_email_invalid">Inserisci un\'e-mail valida</string>

    <!-- Profile Dialogs -->
    <string name="dialog_delete_title">Conferma eliminazione</string>
    <string name="dialog_delete_message">Sei sicuro di voler eliminare il tuo account? Questa azione non può essere annullata.</string>
    <string name="delete">Elimina</string>

    <!-- Labels -->
    <string name="label_competition">Competizione</string>

    <!-- Stats Labels -->
    <string name="stat_total_matches">Partite Totali</string>
    <string name="stat_record_total">Record Totale (V-P-S)</string>
    <string name="stat_home_matches">Partite Casa</string>
    <string name="stat_record_home">Record Casa (V-P-S)</string>
    <string name="stat_away_matches">Partite Trasferta</string>
    <string name="stat_record_away">Record Trasferta (V-P-S)</string>
    <string name="stat_goals_for">Gol Fatti</string>
    <string name="stat_goals_against">Gol Subiti</string>
    <string name="stat_goal_diff">Differenza Reti</string>
    <string name="stat_goals_for_per_match">Gol Fatti / Partita</string>
    <string name="stat_goals_against_per_match">Gol Subiti / Partita</string>
    <string name="stat_goals_for_home">Gol Fatti Casa</string>
    <string name="stat_goals_against_home">Gol Subiti Casa</string>
    <string name="stat_goal_diff_home">Differenza Reti Casa</string>
    <string name="stat_goals_for_per_match_home">Gol Fatti / Partita Casa</string>
    <string name="stat_goals_against_per_match_home">Gol Subiti / Partita Casa</string>
    <string name="stat_goals_for_away">Gol Fatti Trasferta</string>
    <string name="stat_goals_against_away">Gol Subiti Trasferta</string>
    <string name="stat_goal_diff_away">Differenza Reti Trasferta</string>
    <string name="stat_goals_for_per_match_away">Gol Fatti / Partita Trasferta</string>
    <string name="stat_goals_against_per_match_away">Gol Subiti / Partita Trasferta</string>
    <string name="stat_position">Posizione</string>
    <string name="stat_points">Punti</string>
    <string name="stat_form">Forma (ultime 5)</string>
    <string name="stat_home_away_matches">Partite Casa/Trasferta</string>
    <string name="stat_record_home_away">Record Casa/Trasferta (V-P-S)</string>
    <string name="stat_goals_for_home_away">Gol Fatti Casa/Trasferta</string>
    <string name="stat_goals_against_home_away">Gol Subiti Casa/Trasferta</string>
    <string name="stat_goal_diff_home_away">Differenza Reti Casa/Trasferta</string>
    <string name="stat_goals_for_per_match_home_away">Gol Fatti / Partita Casa/Trasferta</string>
    <string name="stat_goals_against_per_match_home_away">Gol Subiti / Partita Casa/Trasferta</string>

    <!-- Content Descriptions (Accessibility) -->
    <string name="cd_logo">Logo</string>
    <string name="cd_back">Indietro</string>
    <string name="cd_info">Informazione</string>
    <string name="cd_change_theme">Cambia tema</string>
    <string name="cd_profile">Profilo</string>
    <string name="cd_edit_profile">Modifica Profilo</string>
    <string name="cd_summary_icon">Icona riepilogo</string>
    <string name="cd_hot_odds_icon">Icona quote calde</string>
    <string name="cd_featured">In evidenza</string>

    <!-- Snackbar/Error Messages -->
    <string name="error_username_empty">Il nome utente non può essere vuoto</string>
    <string name="error_password_empty">La password non può essere vuota</string>
    <string name="error_email_invalid">Il formato dell\'e-mail non è valido</string>
    <string name="error_complete_fields">Per favore, compila tutti i campi</string>

    <!-- Features UI Labels -->
    <string name="featured_recommendation">Raccomandazione in evidenza:</string>
    <string name="model_market_format">Modello %1$s - Mercato %2$s</string>
    <string name="hits_format">(%1$d/%2$d) successi</string>
    <string name="form_label">Forma:</string>
    <string name="next_match_label">Prossima partita:</string>
    <string name="no_valuable_picks_today">Oggi nessun pick con valore sufficiente.</string>
    <string name="hot_odds_disclaimer">Opportunità ad alto valore statistico secondo il nostro modello. Quote indicative.</string>
    <string name="top_picks">Top Picks:</string>

    <!-- UI Components -->
    <string name="cd_team_logo">Logo %1$s</string>
    <string name="cd_league_logo">Logo della %1$s</string>
    <string name="cd_previous_day">Giorno precedente</string>
    <string name="cd_filter_matches">Filtra Partite</string>
    <string name="cd_select_date">Seleziona data</string>
    <string name="cd_next_day">Giorno successivo</string>
    <string name="cd_warning_icon">Icona di avviso</string>
    <string name="summary_total_matches">Totale partite analizzate:</string>
    <string name="summary_recommendations">Raccomandazioni:</string>
    <string name="summary_hits">Successi:</string>
    <string name="summary_roi">ROI (redditività):</string>
    <string name="summary_title">Riepilogo:</string>
    <string name="pick_label">Pick:</string>
    <string name="market_format">Mercato: %1$s</string>
    <string name="prediction_format">Previsione: %1$s</string>
    <string name="odds_format">Quota: %1$s</string>
    <string name="probability_format">Probabilità: %1$s%%</string>
    <string name="value_format">+%1$s%% Value</string>
    <string name="error_loading_predictions">Errore nel caricamento delle previsioni. Prova a ricaricare.</string>
    <string name="prediction_not_available">La previsione per questa partita non è disponibile.</string>
    <string name="header_team">SQUADRA</string>

    <!-- InfoDialog -->
    <string name="info_dialog_message">Questa applicazione offre analisi statistiche, quote, value bet e raccomandazioni basate su modelli matematici e dati storici.\n\nLe previsioni non garantiscono risultati. L\'applicazione non permette di scommettere e non è affiliata a nessun bookmaker.\n\nLe decisioni prese sono di esclusiva responsabilità dell\'utente.</string>

    <!-- Prediction Card Titles -->
    <string name="winner_title">Vincitore:</string>
    <string name="btts_title">Entrambi segnano:</string>
    <string name="over_under_title">Sopra/Sotto 2.5:</string>

    <!-- Odds Labels -->
    <string name="yes_label">Sì</string>
    <string name="no_label">No</string>
    <string name="more_label">Più</string>
    <string name="less_label">Meno</string>

    <!-- Tab Titles -->
    <string name="tab_predictions">Pronostici</string>
    <string name="tab_statistics">Statistiche</string>
    <string name="tab_info">Informazione</string>
    <string name="tab_standings">Classifica</string>
    <string name="tab_matches">Eventi</string>

    <!-- Model/Market Names -->
    <string name="model_conservative">Conservativo</string>
    <string name="model_moderate">Moderato</string>
    <string name="model_aggressive">Rischioso</string>
    <string name="market_winner">Vincitore</string>
    <string name="market_btts">Entrambi Segnano</string>
    <string name="market_over_under">Sopra/Sotto 2.5</string>

    <!-- Summary Formats -->
    <string name="summary_model_format">Riepilogo Modello %1$s:</string>
    <string name="summary_market_format">Riepilogo Mercato %1$s:</string>

    <!-- Info Labels -->
    <string name="info_date">Data:</string>
    <string name="info_time">Ora:</string>
    <string name="info_stadium">Stadio:</string>
    <string name="info_city">Città:</string>

    <!-- Prediction Values (from backend) -->
    <string name="pred_local">Casa</string>
    <string name="pred_draw">Pareggio</string>
    <string name="pred_away">Trasferta</string>
    <string name="pred_yes">Sì</string>
    <string name="pred_no">No</string>
    <string name="pred_over">Over</string>
    <string name="pred_under">Under</string>

    <!-- Probability Format Labels -->
    <string name="prob_local_format">Casa: %1$s%%</string>
    <string name="prob_draw_format">Pareggio: %1$s%%</string>
    <string name="prob_away_format">Trasferta: %1$s%%</string>
    <string name="prob_btts_yes_format">Entrambi Segnano: %1$s%%</string>
    <string name="prob_btts_no_format">Nessuno Segna: %1$s%%</string>
    <string name="prob_over_format">Più di 2,5: %1$s%%</string>
    <string name="prob_under_format">Meno di 2,5: %1$s%%</string>

    <!-- Recommendation Labels -->
    <string name="rec_bet">Scommetti</string>
    <string name="rec_no_bet">Non scommettere</string>
    <string name="rec_no_data">Nessun dato</string>

    <!-- Market Translations (backend values) -->
    <string name="market_result">Risultato</string>
    <string name="market_btts_full">Entrambi Segnano</string>
    <string name="market_over_under_full">Sopra/Sotto 2.5</string>

    <!-- Model Translations -->
    <string name="model_aggressive_full">Aggressivo</string>
    <string name="model_moderate_full">Moderato</string>
    <string name="model_conservative_full">Conservativo</string>

    <!-- Server Error Messages -->
    <string name="error_missing_fields">Campi obbligatori mancanti (nome, e-mail, password)</string>
    <string name="error_username_taken">Il nome utente non è disponibile</string>
    <string name="error_email_registered">L\'e-mail è già registrata</string>
    <string name="success_account_created">Account creato con successo</string>
    <string name="error_missing_credentials">Nome utente o password mancante</string>
    <string name="error_invalid_credentials">Credenziali non valide</string>
    
    <!-- Forgot Password Messages -->
    <string name="error_email_required">E-mail richiesta</string>
    <string name="msg_email_sent_if_registered">Se la tua e-mail è registrata, riceverai un\'e-mail.</string>
    <string name="error_email_send_failed">Errore nell\'invio dell\'e-mail</string>
    <string name="msg_email_sent">L\'e-mail è stata inviata.</string>
    
    <!-- Delete Account Messages -->
    <string name="error_user_not_found">Utente non trovato</string>
    <string name="msg_account_deleted">Il tuo account è stato eliminato con successo</string>
    <string name="error_no_permission">Non hai il permesso di eseguire questa azione</string>
    
    <!-- Reset Password Messages -->
    <string name="error_missing_data">Dati mancanti</string>
    <string name="error_code_invalid_expired">Codice invalido o scaduto</string>
    <string name="error_token_invalid">Token non valido</string>
    <string name="msg_password_updated">Password aggiornata con successo.</string>
    <string name="error_token_invalid_expired">Token non valido o scaduto</string>
    <string name="error_current_password_wrong">La password attuale non è corretta</string>
    
    <!-- Forma Indicators (V=Vittoria, P=Pareggio, S=Sconfitta) -->
    <string name="form_win">V</string>
    <string name="form_draw">P</string>
    <string name="form_loss">S</string>

    <!-- Data & Server Errors -->
    <string name="error_data_invalid_format">Formato dati non valido</string>
    <string name="error_data_not_found">Dati non trovati</string>
    <string name="error_data_fetch">Errore durante il recupero dei dati</string>
    <string name="error_server_internal">Errore interno del server</string>
    <string name="success_login">Accesso riuscito</string>
    <string name="success_logout">Disconnessione riuscita</string>

    <!-- Maintenance Mode -->

</resources>



================================================
FILE: app/src/main/res/values-night/theme.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <!-- Tema principal para el modo oscuro -->
    <style name="Mi.Tema" parent="Theme.Material3.DayNight.NoActionBar">
        <item name="colorPrimary">@color/negro</item>
        <item name="colorPrimaryVariant">@color/gris_oscuro</item>
        <item name="colorOnPrimary">@color/blanco</item>

        <item name="android:textColor">@color/blanco</item>
    </style>

</resources>


================================================
FILE: app/src/main/res/xml/backup_rules.xml
================================================
<?xml version="1.0" encoding="utf-8"?><!--
   Sample backup rules file; uncomment and customize as necessary.
   See https://developer.android.com/guide/topics/data/autobackup
   for details.
   Note: This file is ignored for devices older that API 31
   See https://developer.android.com/about/versions/12/backup-restore
-->
<full-backup-content>
    <!--
   <include domain="sharedpref" path="."/>
   <exclude domain="sharedpref" path="device.xml"/>
-->
</full-backup-content>


================================================
FILE: app/src/main/res/xml/data_extraction_rules.xml
================================================
<?xml version="1.0" encoding="utf-8"?><!--
   Sample data extraction rules file; uncomment and customize as necessary.
   See https://developer.android.com/about/versions/12/backup-restore#xml-changes
   for details.
-->
<data-extraction-rules>
    <cloud-backup>
        <!--
        <include .../>
        <exclude .../>
        -->
    </cloud-backup>
    <!--
    <device-transfer>
        <include .../>
        <exclude .../>
    </device-transfer>
    -->
</data-extraction-rules>


================================================
FILE: app/src/test/java/com/rigobertods/rdscore/ExampleUnitTest.kt
================================================
package com.rigobertods.rdscore

import org.junit.Assert
import org.junit.Test

/**
 * Example local unit test, which will execute on the development machine (host).
 *
 * @see [Testing documentation](http://d.android.com/tools/testing)
 */
class ExampleUnitTest {
    @Test
    fun addition_isCorrect() {
        Assert.assertEquals(4, (2 + 2).toLong())
    }
}


================================================
FILE: gradle/gradle-daemon-jvm.properties
================================================
#This file is generated by updateDaemonJvm
toolchainUrl.FREE_BSD.AARCH64=https\://api.foojay.io/disco/v3.0/ids/536afcd1dff540251f85e5d2c80458cf/redirect
toolchainUrl.FREE_BSD.X86_64=https\://api.foojay.io/disco/v3.0/ids/67a0fee3c4236b6397dcbe8575ca2011/redirect
toolchainUrl.LINUX.AARCH64=https\://api.foojay.io/disco/v3.0/ids/536afcd1dff540251f85e5d2c80458cf/redirect
toolchainUrl.LINUX.X86_64=https\://api.foojay.io/disco/v3.0/ids/67a0fee3c4236b6397dcbe8575ca2011/redirect
toolchainUrl.MAC_OS.AARCH64=https\://api.foojay.io/disco/v3.0/ids/0b98aec810298c2c1d7fdac5dac37910/redirect
toolchainUrl.MAC_OS.X86_64=https\://api.foojay.io/disco/v3.0/ids/658299a896470fbb3103ba3a430ee227/redirect
toolchainUrl.UNIX.AARCH64=https\://api.foojay.io/disco/v3.0/ids/536afcd1dff540251f85e5d2c80458cf/redirect
toolchainUrl.UNIX.X86_64=https\://api.foojay.io/disco/v3.0/ids/67a0fee3c4236b6397dcbe8575ca2011/redirect
toolchainUrl.WINDOWS.AARCH64=https\://api.foojay.io/disco/v3.0/ids/23adb857f3cb3cbe28750bc7faa7abc0/redirect
toolchainUrl.WINDOWS.X86_64=https\://api.foojay.io/disco/v3.0/ids/056dc25d3b9d168ede8b94d3d2f99942/redirect
toolchainVendor=JETBRAINS
toolchainVersion=21



================================================
FILE: gradle/libs.versions.toml
================================================
[versions]
agp = "9.0.1"
datastore = "1.2.0"
kotlin = "2.3.10"
coreKtx = "1.17.0"
junit = "4.13.2"
junitVersion = "1.3.0"
espressoCore = "3.7.0"
appcompat = "1.7.1"
kotlinxCoroutinesAndroid = "1.10.2"
loggingInterceptor = "5.3.2"
material = "1.13.0"
activity = "1.12.4"
annotation = "1.9.1"
lifecycleLivedataKtx = "2.10.0"
lifecycleViewmodelKtx = "2.10.0"
lifecycleRuntimeCompose = "2.10.0"
retrofit = "3.0.0"
javaxInject = "1"
androidxComposeBom = "2026.02.00"
androidxActivityCompose = "1.12.4"
coilCompose = "2.7.0"
coreI18n = "1.0.0"
ksp = "2.3.2"
room = "2.8.4"
hilt = "2.59.1"

[libraries]
androidx-core-ktx = { group = "androidx.core", name = "core-ktx", version.ref = "coreKtx" }
converter-gson = { module = "com.squareup.retrofit2:converter-gson", version.ref = "retrofit" }
junit = { group = "junit", name = "junit", version.ref = "junit" }
androidx-junit = { group = "androidx.test.ext", name = "junit", version.ref = "junitVersion" }
androidx-espresso-core = { group = "androidx.test.espresso", name = "espresso-core", version.ref = "espressoCore" }
androidx-appcompat = { group = "androidx.appcompat", name = "appcompat", version.ref = "appcompat" }
kotlinx-coroutines-android = { module = "org.jetbrains.kotlinx:kotlinx-coroutines-android", version.ref = "kotlinxCoroutinesAndroid" }
kotlinx-coroutines-core = { module = "org.jetbrains.kotlinx:kotlinx-coroutines-core", version.ref = "kotlinxCoroutinesAndroid" }
logging-interceptor = { module = "com.squareup.okhttp3:logging-interceptor", version.ref = "loggingInterceptor" }
material = { group = "com.google.android.material", name = "material", version.ref = "material" }
androidx-activity = { group = "androidx.activity", name = "activity", version.ref = "activity" }
androidx-annotation = { group = "androidx.annotation", name = "annotation", version.ref = "annotation" }
androidx-lifecycle-livedata-ktx = { group = "androidx.lifecycle", name = "lifecycle-livedata-ktx", version.ref = "lifecycleLivedataKtx" }
androidx-lifecycle-viewmodel-ktx = { group = "androidx.lifecycle", name = "lifecycle-viewmodel-ktx", version.ref = "lifecycleViewmodelKtx" }
androidx-lifecycle-runtime-compose = { group = "androidx.lifecycle", name = "lifecycle-runtime-compose", version.ref = "lifecycleRuntimeCompose" }
retrofit = { module = "com.squareup.retrofit2:retrofit", version.ref = "retrofit" }
javax-inject = { group = "javax.inject", name = "javax.inject", version.ref = "javaxInject" }
coil-compose = { group = "io.coil-kt", name = "coil-compose", version.ref = "coilCompose" }

# Jetpack Compose
androidx-compose-bom = { group = "androidx.compose", name = "compose-bom", version.ref = "androidxComposeBom" }
androidx-activity-compose = { group = "androidx.activity", name = "activity-compose", version.ref = "androidxActivityCompose" }
androidx-ui = { group = "androidx.compose.ui", name = "ui" }
androidx-foundation = { group = "androidx.compose.foundation", name = "foundation" }
androidx-material3 = { group = "androidx.compose.material3", name = "material3" }
androidx-ui-tooling-preview = { group = "androidx.compose.ui", name = "ui-tooling-preview" }
androidx-ui-tooling = { group = "androidx.compose.ui", name = "ui-tooling" }
androidx-core-i18n = { group = "androidx.core", name = "core-i18n", version.ref = "coreI18n" }
androidx-compose-material-icons-extended = { group = "androidx.compose.material", name = "material-icons-extended" }
hilt-android = { group = "com.google.dagger", name = "hilt-android", version.ref = "hilt" }
hilt-compiler = { group = "com.google.dagger", name = "hilt-compiler", version.ref = "hilt" }
androidx-datastore-preferences = { group = "androidx.datastore", name = "datastore-preferences", version.ref = "datastore" }
androidx-room-runtime = { group = "androidx.room", name = "room-runtime", version.ref = "room" }
androidx-room-ktx = { group = "androidx.room", name = "room-ktx", version.ref = "room" }
androidx-room-compiler = { group = "androidx.room", name = "room-compiler", version.ref = "room" }
androidx-navigation-compose = { group = "androidx.navigation", name = "navigation-compose", version = "2.9.7" }
androidx-hilt-navigation-compose = { group = "androidx.hilt", name = "hilt-navigation-compose", version = "1.3.0" }

[plugins]
android-application = { id = "com.android.application", version.ref = "agp" }
kotlin-android = { id = "org.jetbrains.kotlin.android", version.ref = "kotlin" }
hilt = { id = "com.google.dagger.hilt.android", version.ref = "hilt" }
compose-compiler = { id = "org.jetbrains.kotlin.plugin.compose", version.ref = "kotlin" }
ksp = { id = "com.google.devtools.ksp", version.ref = "ksp" }



================================================
FILE: gradle/wrapper/gradle-wrapper.properties
================================================
#Mon Sep 22 12:35:13 CEST 2025
distributionBase=GRADLE_USER_HOME
distributionPath=wrapper/dists
distributionUrl=https\://services.gradle.org/distributions/gradle-9.3.1-bin.zip
zipStoreBase=GRADLE_USER_HOME
zipStorePath=wrapper/dists


